= ドキュメント命名規則・管理ガイドライン
:toc: left
:toc-title: 目次
:sectnums:

**作成日**: 2025-11-26
**目的**: プロジェクト内のドキュメントの命名規則を統一し、管理方法を標準化する。

== 命名規則

=== 基本ルール

. **言語**: ファイル名は *英語（kebab-case）* を基本とする
. **バージョン**: バージョン情報が必要な場合は `-v{major}.{minor}` を付与
. **日付**: 日付が必要な場合は末尾に `-YYYY-MM-DD` を付与
. **拡張子**: AsciiDoc は `.adoc`、SQL は `.sql`

=== ファイル名パターン

[cols="1,1,1"]
|===
| パターン | 形式 | 例

| 基本
| `{topic}.adoc`
| `codebase-structure.adoc`

| バージョン付き
| `{topic}-v{version}.adoc`
| `api-migration-guide-v2.2.adoc`

| 日付付き
| `{topic}-{date}.adoc`
| `backend-cleanup-2025-11-18.adoc`

| 両方
| `{topic}-v{version}-{date}.adoc`
| `schema-v2.3-2025-11-19.adoc`
|===

=== NGパターン

[cols="1,1,1"]
|===
| NG | 理由 | 修正例

| `API_Reference.adoc`
| 大文字・アンダースコア混在
| `api-reference.adoc`

| `設計書v2.1.adoc`
| 日本語ファイル名
| `design-spec-v2.1.adoc`

| `refactor_20251110.adoc`
| アンダースコア・日付形式
| `refactor-2025-11-10.adoc`

| `CHANGELOG_v2.0.adoc`
| 大文字・アンダースコア
| `changelog-v2.0.adoc`
|===

=== 例外（許容されるパターン）

[cols="1,1"]
|===
| ファイル名 | 理由

| `README.adoc`
| 業界標準（AsciiDoc版）

| `CLAUDE.md`
| プロジェクト固有の標準（Markdown維持）

| `SETUP_GUIDE.adoc`
| ルートレベルの重要ドキュメント
|===

== ディレクトリ構造

=== 標準構造

----
docs/
├── README.adoc              # ドキュメントインデックス
├── DOCUMENT_GUIDELINES.adoc # このファイル
│
├── schema/                  # データベーススキーマ
│   ├── er-diagram-v{version}.adoc
│   ├── base/
│   │   └── lot_management_schema_v{version}.sql
│   └── current/
│       └── current_openapi.json
│
├── architecture/            # アーキテクチャドキュメント
│   ├── codebase-structure.adoc
│   ├── api-refactor-plan-v{version}.adoc
│   └── common-type-candidates.adoc
│
├── api/                     # APIドキュメント
│   ├── api-reference.adoc
│   └── api-migration-guide-v{version}.adoc
│
├── design/                  # 設計書（日本語可）
│   ├── {システム名}_概要設計書_v{version}.adoc
│   └── {トピック}ガイド.adoc
│
├── troubleshooting/         # トラブルシューティング
│   └── {topic}.adoc
----

=== カテゴリ説明

[cols="1,1,1"]
|===
| カテゴリ | 用途 | ファイル名言語

| `schema/`
| DBスキーマ、ER図
| 英語

| `architecture/`
| 技術アーキテクチャ
| 英語

| `api/`
| APIリファレンス
| 英語

| `design/`
| 業務設計書
| 日本語可

| `troubleshooting/`
| 問題解決ガイド
| 英語
|===

== コンテンツ言語

=== 原則

[cols="1,1,1"]
|===
| 種類 | 言語 | 理由

| 技術ドキュメント
| 英語
| グローバル標準、ツール連携

| 業務設計書
| 日本語
| ステークホルダーとの共有

| コメント（コード内）
| 英語
| コードとの整合性

| UI文言
| 日本語
| ユーザー向け
|===

=== 具体例

[cols="1,1,1"]
|===
| ドキュメント | 言語 | 例

| API Reference
| 英語
| `=== GET /api/orders`

| Architecture docs
| 英語
| `== Layered Architecture`

| 概要設計書
| 日本語
| `== 1. システム概要`

| ER図ドキュメント
| 英語 + 日本語コメント
| `-- 倉庫マスタ`
|===

== バージョン管理

=== バージョン形式

* **メジャー.マイナー**: `v2.3`, `v3.0`
* **セマンティックバージョニング準拠**を推奨

=== バージョン更新ルール

[cols="1,1,1"]
|===
| 変更内容 | バージョン更新 | 例

| 破壊的変更（スキーマ変更等）
| メジャー
| v2.0 → v3.0

| 機能追加
| マイナー
| v2.2 → v2.3

| バグ修正・誤字修正
| 更新なし（コミットで追跡）
| -
|===

=== 最新バージョンの明示

各カテゴリで「最新」を明示：

[source,asciidoc]
----
== 最新ドキュメント

* *Schema*: v2.3 (link:schema/er-diagram-v2.3.adoc[er-diagram-v2.3.adoc])
* *API Guide*: v2.2 (link:api/api-migration-guide-v2.2.adoc[api-migration-guide-v2.2.adoc])
----

== 旧バージョンの扱い

=== 基本ルール

* **削除推奨**: 不要になったドキュメントは削除する
* **履歴管理**: 過去のドキュメントが必要な場合は Git の履歴から参照する
* **アーカイブ不要**: `docs/archive` ディレクトリは作成しない

== ドキュメント作成フロー

=== 新規作成

. カテゴリを決定（schema / architecture / api / design / troubleshooting）
. 命名規則に従ってファイル名を決定
. 適切なフォルダに配置
. `docs/README.adoc` のインデックスを更新
. 必要に応じて `CLAUDE.md` も更新

=== 更新

. 既存ファイルを直接編集（マイナー更新）
. バージョン番号更新が必要な場合はファイル名も変更
. 旧バージョンをarchiveに移動

=== 削除

. 不要になった時点で `git rm` で削除
. `docs/README.adoc` から参照を削除

== レビューチェックリスト

新規ドキュメント作成時：

* [ ] ファイル名が命名規則に従っている
* [ ] 適切なフォルダに配置されている
* [ ] `docs/README.adoc` が更新されている
* [ ] 日本語/英語の使い分けが適切
* [ ] バージョン情報が正しい

ドキュメント更新時：

* [ ] バージョン番号の更新が必要か確認
* [ ] 旧バージョンのアーカイブが必要か確認
* [ ] 関連ドキュメントの参照が最新か確認

== 移行計画（既存ドキュメント）

=== Phase 1: 即時対応（完了）

* [x] docs/README.md をインデックスとして作成
* [x] 歴史的ドキュメントを削除（Git履歴で管理）
* [x] API ドキュメントを api/ に移動
* [x] common_type_candidates を統合

=== Phase 2: AsciiDoc移行（進行中）

* [ ] `DOCUMENT_GUIDELINES.md` -> `DOCUMENT_GUIDELINES.adoc`
* [ ] `docs/README.md` -> `docs/README.adoc`
* [ ] その他のドキュメントの順次移行

=== Phase 3: 長期対応

* design/ フォルダ内の日本語ファイル名は現状維持（ステークホルダー共有のため）
* 自動生成ドキュメント（TypeDoc等）は対象外

== 参考: 他のプロジェクト標準との整合性

=== コードの命名規則（参考）

[cols="1,1,1"]
|===
| 種類 | バックエンド | フロントエンド

| ファイル名
| `snake_case.py`
| `kebab-case.ts`

| クラス/型
| PascalCase
| PascalCase

| 関数/変数
| snake_case
| camelCase
|===

=== ドキュメントはフロントエンドの kebab-case に準拠

理由：
* AsciiDocファイルも技術ドキュメントに近い
* GitHubでの表示が自然
* URLで使いやすい

**このガイドラインは、プロジェクトの成長に合わせて更新してください。**
