# ã‚¿ã‚¹ã‚¯ãƒãƒƒã‚¯ãƒ­ã‚° (çµ±åˆç‰ˆ)

**æœ€çµ‚æ›´æ–°:** 2026-01-31

---

## æ¦‚è¦

æœ¬ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€æœªå®Œäº†ã®ã‚¿ã‚¹ã‚¯ãƒ»èª¿æŸ»äº‹é …ãƒ»å°†æ¥æ”¹å–„é …ç›®ã‚’é›†ç´„ã—ãŸãƒãƒƒã‚¯ãƒ­ã‚°ã§ã™ã€‚å®Œäº†æ¸ˆã¿ã®ã‚¿ã‚¹ã‚¯ã¯åˆ¥é€”æ®‹ã•ãšã€æœ¬ãƒãƒƒã‚¯ãƒ­ã‚°ã«æœ€æ–°ã®çŠ¶æ…‹ã®ã¿ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

---

## 1. å„ªå…ˆåº¦: é«˜ (å³æ™‚å¯¾å¿œ)

### 1-1. E2Eãƒ†ã‚¹ãƒˆæ®‹å­˜å•é¡Œã®ä¿®æ­£

**ç¾çŠ¶:** P0ãƒ†ã‚¹ãƒˆ 28/36ãƒ‘ã‚¹ï¼ˆ78%ï¼‰é”æˆã€‚ä¸»è¦ãªå•é¡Œã¯è§£æ±ºæ¸ˆã¿ã€‚

**æ®‹å­˜å•é¡Œï¼ˆ4ä»¶ï¼‰:**

1. **ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚¯ãƒ­ãƒ¼ã‚ºã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼ˆ2ä»¶ï¼‰**
   - ãƒ†ã‚¹ãƒˆ: `e2e-02-save-persistence.spec.ts` (smoke & chromium)
   - ç—‡çŠ¶: ä¿å­˜å¾Œã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒ10ç§’ä»¥å†…ã«é–‰ã˜ãªã„
   - åŸå› : UIå®Ÿè£…ã®å•é¡Œï¼ˆè‡ªå‹•ã‚¯ãƒ­ãƒ¼ã‚ºå‡¦ç†ãŒé…ã„ï¼‰
   - å¯¾å¿œ: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚¯ãƒ­ãƒ¼ã‚ºå‡¦ç†ã‚’æ”¹å–„

2. **socket hang upï¼ˆ2ä»¶ï¼‰**
   - ãƒ†ã‚¹ãƒˆ: `e2e-04-permission.spec.ts` (smoke & chromium)
   - ç—‡çŠ¶: `POST /api/auth/login` ã§socket hang up
   - åŸå› : Playwrightå›ºæœ‰ã®å•é¡Œï¼ˆcurlã§ã¯æˆåŠŸï¼‰
   - å¯¾å¿œ: Playwrightã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šã‚„keep-aliveè¨­å®šã‚’èª¿æŸ»

3. **ãƒ­ã‚°ã‚¤ãƒ³401ã‚¨ãƒ©ãƒ¼ï¼ˆä¸€éƒ¨ã®ãƒ†ã‚¹ãƒˆï¼‰**
   - ãƒ†ã‚¹ãƒˆ: e2e-03, e2e-04, e2e-05 (chromium)
   - ç—‡çŠ¶: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå¤±æ•—ã«ã‚ˆã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸åœ¨
   - åŸå› : ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œã¾ãŸã¯ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã®å¤±æ•—
   - å¯¾å¿œ: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã®å®‰å®šåŒ–

**å‚è€ƒ:**
- åˆå›: 15/36ãƒ‘ã‚¹ï¼ˆ42%ï¼‰
- æœ€çµ‚: 28/36ãƒ‘ã‚¹ï¼ˆ78%ï¼‰= +87%æ”¹å–„
- ãƒ–ãƒ©ãƒ³ãƒ: `fix/e2e-test-login-ui-update`
- ã‚³ãƒŸãƒƒãƒˆ: `a52997b7`

---



## 2. å„ªå…ˆåº¦: ä¸­ (UI/UXãƒ»ä¸æ•´åˆä¿®æ­£)

### 2-3. SmartReadè¨­å®šãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã®E2Eãƒ†ã‚¹ãƒˆè¿½åŠ 

**å„ªå…ˆåº¦**: ä¸­
**ä½œæˆ**: 2026-01-31
**ã‚«ãƒ†ã‚´ãƒª**: ãƒ†ã‚¹ãƒˆå“è³ªå‘ä¸Š

**èƒŒæ™¯:**
- SmartReadè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ï¼ˆä½œæˆãƒ»æ›´æ–°ï¼‰ã¯ã€shadcn/uiã®Selectã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¤‡é›‘ãªãƒ¢ãƒƒã‚¯è¦ä»¶ã«ã‚ˆã‚Šã€Vitestã§ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒå›°é›£
- ç¾åœ¨ã¯ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤ºã®ã¿ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ãŠã‚Šã€å®Ÿéš›ã®é€ä¿¡ãƒ•ãƒ­ãƒ¼ã¯æœªæ¤œè¨¼

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
1. Playwrightã‚’ä½¿ç”¨ã—ãŸE2Eãƒ†ã‚¹ãƒˆã®è¿½åŠ 
   - SmartReadè¨­å®šã®æ–°è¦ä½œæˆãƒ•ãƒ­ãƒ¼
   - æ—¢å­˜è¨­å®šã®æ›´æ–°ãƒ•ãƒ­ãƒ¼
   - ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¢ºèª
2. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«é…ç½®: `frontend/e2e/rpa-smartread-settings.spec.ts`

**å‚è€ƒ:**
- å‰Šé™¤ã•ã‚ŒãŸãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ: `frontend/src/features/rpa/smartread/components/SmartReadSettingsModal.test.tsx` (L120-168)
- æ—¢å­˜E2Eãƒ†ã‚¹ãƒˆ: `frontend/e2e/auth.spec.ts`, `frontend/e2e/allocation.spec.ts`

---

### 2-7. ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ¡ã‚¸ãƒ£ãƒ¼ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå¯¾å¿œ

**å„ªå…ˆåº¦**: ä¸­
**ä½œæˆ**: 2026-01-31
**ã‚«ãƒ†ã‚´ãƒª**: ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ»æŠ€è¡“å‚µ

**èƒŒæ™¯:**
2026-01-31ã®å®šæœŸã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆç¢ºèªã«ãŠã„ã¦ã€ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ›´æ–°ãŒç¢ºèªã•ã‚ŒãŸã€‚ã“ã‚Œã‚‰ã¯ç ´å£Šçš„å¤‰æ›´ã‚’å«ã‚€å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€å€‹åˆ¥ã«ãƒ†ã‚¹ãƒˆã¨æ¤œè¨¼ã‚’è¡Œã„ã¤ã¤é©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

**æ¤œè¨ä¸­ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ:**
- `pandas`: 2.3.3 -> 3.0.0
- `websockets`: 15.0.1 -> 16.0
- `pycparser`: 2.23 -> 3.0

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
1. å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆï¼ˆç ´å£Šçš„å¤‰æ›´ï¼‰ã®ç¢ºèªã€‚
2. é–‹ç™ºç’°å¢ƒã§ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰é©ç”¨ã€‚
3. æ—¢å­˜æ©Ÿèƒ½ï¼ˆç‰¹ã«ãƒ‡ãƒ¼ã‚¿åˆ†æã€WebSocketé€šä¿¡ï¼‰ã®å›å¸°ãƒ†ã‚¹ãƒˆå®Ÿæ–½ã€‚
4. å•é¡Œãªã‘ã‚Œã°æœ¬ç•ªç’°å¢ƒã¸é©ç”¨ã€‚

**å…ƒ:** `backlog.md::8-2` (2026-01-18) & `next_reviews_ja.md` (æ—¥ä»˜ãªã—)

---

### 2-8. åœ¨åº«è©³ç´°ã®ä»•å…¥å…ˆå›ºå®š

**è¦æœ›**: åœ¨åº«è©³ç´°ç”»é¢ã«ãŠã„ã¦ã€ä»•å…¥å…ˆãŒå›ºå®šï¼ˆã¾ãŸã¯æ˜ç¢ºåŒ–ï¼‰ã•ã‚Œã‚‹ã¹ãã€‚
**ã‚¿ã‚¹ã‚¯**: è£½å“Ã—å€‰åº«ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ãŠã‘ã‚‹ä»•å…¥å…ˆç‰¹å®šãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…ã¨UIåæ˜ ã€‚

**å…ƒ:** `backlog.md::8-4` (2026-01-18)

---

### 2-9. SmartRead OCRå‡¦ç†å®Œäº†é€šçŸ¥æ©Ÿèƒ½

**å„ªå…ˆåº¦**: Medium
**é›£æ˜“åº¦**: Medium
**æƒ³å®šå·¥æ•°**: 1-2æ—¥

**èƒŒæ™¯ãƒ»èª²é¡Œ:**
- SmartRead OCRå‡¦ç†ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»ç›£è¦–ãƒ•ã‚©ãƒ«ãƒ€ï¼‰ã¯ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå‡¦ç†ä¸­ã«ä»–ã®ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã™ã‚‹ã¨ã€å‡¦ç†å®Œäº†ã‚’çŸ¥ã‚‹æ‰‹æ®µãŒãªã„
- OCRçµæœãƒšãƒ¼ã‚¸ã‚’å®šæœŸçš„ã«ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€UXãŒæ‚ªã„

**ç¾çŠ¶ã®å‹•ä½œ:**
1. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ â†’ ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†é–‹å§‹
   - å³å´ï¼ˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰: FastAPI `BackgroundTasks` (éåŒæœŸã€è»½é‡)
   - å·¦å´ï¼ˆç›£è¦–ãƒ•ã‚©ãƒ«ãƒ€ï¼‰: `threading.Thread` (åŒæœŸI/Oã€ZIPå‡¦ç†ç­‰ã®é‡ã„å‡¦ç†)
2. å³åº§ã«202 Acceptedãƒ¬ã‚¹ãƒãƒ³ã‚¹
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒšãƒ¼ã‚¸ã‚’é›¢ã‚Œã¦ã‚‚å‡¦ç†ã¯ç¶™ç¶šã•ã‚Œã‚‹ âœ…
4. ã—ã‹ã—ã€**å‡¦ç†å®Œäº†ã®é€šçŸ¥ãŒãªã„** âŒ

**æ³¨æ„:** å·¦å³ã§ç•°ãªã‚‹ä¸¦è¡Œå‡¦ç†æ–¹å¼ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŒã€ã“ã‚Œã¯å‡¦ç†ã®é‡ã•ã«å¿œã˜ãŸæœ€é©åŒ–ã§ã‚ã‚Šã€
æœ€çµ‚çš„ãªOCRçµæœã®ä¿å­˜å…ˆã¯å…±é€šï¼ˆ`smartread_wide_data`, `smartread_long_data`ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰ã€‚

**è¦ä»¶:**
1. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥** (Phase 1)
   - OCRå‡¦ç†ãŒå®Œäº†ã—ãŸã‚‰ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã¾ãŸã¯ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥
   - ä»–ã®ãƒšãƒ¼ã‚¸ã«ã„ã¦ã‚‚é€šçŸ¥ã‚’å—ã‘å–ã‚Œã‚‹

2. **é€šçŸ¥å±¥æ­´ã®ä¿å­˜** (Phase 2)
   - æœªèª­é€šçŸ¥ã‚’ã‚¹ã‚¿ãƒƒã‚¯ã—ã¦ä¿å­˜
   - ãƒ˜ãƒƒãƒ€ãƒ¼ã«ãƒ™ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ + æœªèª­ãƒãƒƒã‚¸
   - é€šçŸ¥ä¸€è¦§ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã§ç¢ºèªå¯èƒ½
   - ã€ŒOCRèª­ã¿è¾¼ã¿å®Œäº†: ãƒ•ã‚¡ã‚¤ãƒ«å.pdfã€ç­‰ã®è©³ç´°è¡¨ç¤º

**æŠ€è¡“çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ:**

**Option 1: WebSocket / Server-Sent Events (SSE)**
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæ–¹å‘é€šä¿¡
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‹ã‚‰å‡¦ç†å®Œäº†æ™‚ã«pushé€šçŸ¥
- å®Ÿè£…ã‚³ã‚¹ãƒˆ: é«˜

**Option 2: ãƒãƒ¼ãƒªãƒ³ã‚° (æ¨å¥¨)**
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒå®šæœŸçš„ã« `/api/notifications` ã‚’ãƒã‚§ãƒƒã‚¯
- å®Ÿè£…ã‚³ã‚¹ãƒˆ: ä½
- React Queryã®refetchIntervalã§ç°¡å˜å®Ÿè£…å¯èƒ½

**å®Ÿè£…ã‚¿ã‚¹ã‚¯:**
1. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰:
   - é€šçŸ¥ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ (user_id, message, type, read, created_at)
   - SmartReadå‡¦ç†å®Œäº†æ™‚ã«é€šçŸ¥ãƒ¬ã‚³ãƒ¼ãƒ‰æŒ¿å…¥
   - GET /api/notifications ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ (æœªèª­é€šçŸ¥å–å¾—)
   - PATCH /api/notifications/{id}/read ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ (æ—¢èª­åŒ–)

2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰:
   - é€šçŸ¥ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ/ã‚¹ãƒˆã‚¢ (Jotai)
   - ãƒ˜ãƒƒãƒ€ãƒ¼ã«ãƒ™ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ + æœªèª­ãƒãƒƒã‚¸
   - é€šçŸ¥ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
   - useNotifications hook (ãƒãƒ¼ãƒªãƒ³ã‚°: 30ç§’é–“éš”)
   - ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥APIçµ±åˆ (Notification API)

3. SmartReadçµ±åˆ:
   - `_run_simple_sync_background` å‡¦ç†å®Œäº†æ™‚ã«é€šçŸ¥ä½œæˆ
   - PAD Runå®Œäº†æ™‚ã«é€šçŸ¥ä½œæˆ

**å‚è€ƒå®Ÿè£…:**
- GitHubé€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
- Slacké€šçŸ¥ã‚»ãƒ³ã‚¿ãƒ¼

**å…ƒ:** ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æœ› (2026-01-30)

---

### 2-10. SmartRead: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã¨ãƒ•ã‚©ãƒ«ãƒ€ç›£è¦–ã®å‡¦ç†çµ±ä¸€

**å„ªå…ˆåº¦**: Medium
**é›£æ˜“åº¦**: Medium
**æƒ³å®šå·¥æ•°**: 1-2æ—¥
**å‰æ**: æœ¬ç•ªç’°å¢ƒã§ãƒ­ã‚°ç¢ºèªå¾Œã«ç€æ‰‹

**èƒŒæ™¯ãƒ»èª²é¡Œ:**
- ç¾åœ¨ã€å³å´ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰ã¨å·¦å´ï¼ˆç›£è¦–ãƒ•ã‚©ãƒ«ãƒ€ï¼‰ã§ç•°ãªã‚‹å‡¦ç†æ–¹å¼ã‚’ä½¿ç”¨
- å³å´: `/analyze-simple` â†’ `BackgroundTasks` â†’ `sync_with_simple_flow`
- å·¦å´: `/pad-runs` â†’ `threading.Thread` â†’ `execute_run`
- å³å´ã®å‡¦ç†ãŒå®Ÿéš›ã«å‹•ä½œã—ã¦ã„ãŸã‹ä¸æ˜ï¼ˆOCRçµæœã«é‡è¤‡ãŒãªã„ = å‹•ã„ã¦ã„ãªã„å¯èƒ½æ€§ï¼‰
- å‡¦ç†ãƒ‘ã‚¹ãŒåˆ†ã‹ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒã‚°ã®æ··å…¥ãƒªã‚¹ã‚¯ãŒé«˜ã„

**ç¾çŠ¶ã®å•é¡Œç‚¹:**
```
å³å´ï¼ˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰:
  UploadFileå—ä¿¡ â†’ analyze-simple API
    â†’ BackgroundTasks.add_task(_run_simple_sync_background)
    â†’ SmartReadService.sync_with_simple_flow (async)
    â†’ OCRçµæœä¿å­˜ï¼ˆå‹•ä½œæœªç¢ºèªï¼‰

å·¦å´ï¼ˆç›£è¦–ãƒ•ã‚©ãƒ«ãƒ€ï¼‰:
  filenameså—ä¿¡ â†’ pad-runs API
    â†’ threading.Thread(execute_run)
    â†’ SmartReadPadRunnerService.execute_run (sync)
    â†’ OCRçµæœä¿å­˜ï¼ˆå‹•ä½œç¢ºèªæ¸ˆã¿ âœ…ï¼‰
```

**çµ±ä¸€æ–¹é‡:**
- **å³å´ã‚’å·¦å´ï¼ˆPAD Runï¼‰æ–¹å¼ã«çµ±ä¸€**
- ã‚ã–ã‚ã–ç›£è¦–ãƒ•ã‚©ãƒ«ãƒ€ã«ä¸€æ™‚ä¿å­˜ã›ãšã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥PAD Runã«æ¸¡ã™
- åŒã˜å‡¦ç†ãƒ‘ã‚¹ã‚’é€šã‚‹ã“ã¨ã§ã€ç¢ºå®Ÿæ€§ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’å‘ä¸Š

**å®Ÿè£…ã‚¿ã‚¹ã‚¯:**

1. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰:**
   - æ–°ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½åŠ : `POST /configs/{config_id}/pad-runs/upload`
   - `UploadFile` ã‚’å—ã‘å–ã‚Šã€PAD Runã‚’é–‹å§‹
   - å†…éƒ¨ã§ `SmartReadPadRunnerService.execute_run` ã‚’ä½¿ç”¨
   - ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã¯ä¸è¦ï¼ˆãƒ¡ãƒ¢ãƒªä¸Šã§å‡¦ç†ï¼‰

2. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰:**
   - `SmartReadUploadPanel` ã‚’ `useStartPadRun` ç›¸å½“ã®hookã«å¤‰æ›´
   - æ—¢å­˜ã® `useAnalyzeFile` ã‚’å»ƒæ­¢
   - `handleAnalyzeSuccess` ã¯æ—¢ã«ä¿®æ­£æ¸ˆã¿ï¼ˆã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆæ›´æ–°ï¼‰

3. **æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®æ•´ç†:**
   - `/analyze-simple` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’éæ¨å¥¨åŒ–ï¼ˆã¾ãŸã¯å‰Šé™¤ï¼‰
   - `sync_with_simple_flow` ã®ä½¿ç”¨ç®‡æ‰€ã‚’ç¢ºèªãƒ»æ•´ç†

**æŠ€è¡“çš„è©³ç´°:**

```python
# æ–°ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¾‹
@router.post("/configs/{config_id}/pad-runs/upload")
async def start_pad_run_from_upload(
    config_id: int,
    file: UploadFile,
    uow: UnitOfWork = Depends(get_uow),
    _current_user: User = Depends(get_current_user),
) -> SmartReadPadRunStartResponse:
    """ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰PAD Runã‚’é–‹å§‹."""
    file_content = await file.read()
    filename = file.filename or "uploaded_file"

    # ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦æ‰±ã†ï¼ˆç›£è¦–ãƒ•ã‚©ãƒ«ãƒ€ä¸è¦ï¼‰
    runner = SmartReadPadRunnerService(uow.session)
    run_id = runner.start_run_from_upload(config_id, filename, file_content)

    # æ—¢å­˜ã®PAD Runæ–¹å¼ã§ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œ
    # ...
```

**ãƒ¡ãƒªãƒƒãƒˆ:**
1. å·¦å³ã§åŒã˜ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¹ã‚’é€šã‚‹ â†’ ãƒã‚°ãŒæ¸›ã‚‹
2. PAD Runã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†ã‚’çµ±ä¸€åˆ©ç”¨ â†’ ãƒ‡ãƒãƒƒã‚°ã—ã‚„ã™ã„
3. å®Ÿç¸¾ã®ã‚ã‚‹æ–¹å¼ã«çµ±ä¸€ â†’ ç¢ºå®Ÿæ€§ãŒå‘ä¸Š
4. ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’å‰Šæ¸› â†’ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§å‘ä¸Š

**æ³¨æ„äº‹é …:**
- æœ¬ç•ªç’°å¢ƒã§å³å´ã®å‹•ä½œãƒ­ã‚°ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ç€æ‰‹
- ã‚‚ã—å³å´ãŒå®Ÿéš›ã«å‹•ã„ã¦ã„ãŸå ´åˆã€çµ±ä¸€ã«ã‚ˆã‚‹å½±éŸ¿ã‚’æ…é‡ã«è©•ä¾¡

**é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«:**
- `backend/app/presentation/api/routes/rpa/smartread_router.py`
- `backend/app/application/services/smartread/pad_runner_service.py`
- `frontend/src/features/rpa/smartread/components/SmartReadUploadPanel.tsx`
- `frontend/src/features/rpa/smartread/hooks/file-hooks.ts`

**å…ƒ:** ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æœ› (2026-01-30)

---

## 3. DB/UIæ•´åˆæ€§ãƒ»ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºæ”¹å–„

---

### 3-3. å¤§é‡ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã®å®Œå…¨å¯¾å¿œ (ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³)

**å„ªå…ˆåº¦**: High
**é›£æ˜“åº¦**: Medium
**æƒ³å®šå·¥æ•°**: 2-3æ—¥

**èƒŒæ™¯ãƒ»èª²é¡Œ:**
- ä¸€éƒ¨ã®APIï¼ˆãƒ­ãƒƒãƒˆå–å¾—ç­‰ï¼‰ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® `limit: 100` ãŒã‚ã‚Šã€ãƒšãƒ¼ã‚¸ãƒ³ã‚°ãŒãªã„ãŸã‚å¤§é‡ãƒ‡ãƒ¼ã‚¿æ™‚ã«æ¬ è½ãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã€‚
- å…¨ä»¶å–å¾—ã—ã¦ã‹ã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§çµã‚Šè¾¼ã‚€å®Ÿè£…ã‚’å»ƒæ­¢ã—ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ»ãƒ¡ãƒ¢ãƒªè² è·ã‚’è»½æ¸›ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
1. ãƒ­ãƒƒãƒˆä¸€è¦§ãŠã‚ˆã³åœ¨åº«ä¸€è¦§APIã¸ã®å®Œå…¨ãªã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å°å…¥ã€‚
2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã®ç„¡é™ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã¾ãŸã¯ãƒãƒ¼ãƒãƒ£ãƒ«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œã€‚

**å…ƒ:** `FUTURE_IMPROVEMENTS.md`

---

## 4. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£/å“è³ªæ”¹å–„

### 4-1. useQuery ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†è¿½åŠ ï¼ˆPhase 2ï¼‰

- `AllocationDialog.tsx`, `ForecastsTab.tsx`, `InboundPlansTab.tsx`, `WithdrawalCalendar.tsx` ãªã©ã€‚

**å…ƒ:** `backlog.md::4-1` (2026-01-18)

---

### 4-3. å‰Šé™¤ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®çµ±åˆ

- `SoftDeleteDialog`, `PermanentDeleteDialog`, `BulkSoftDeleteDialog`, `BulkPermanentDeleteDialog` ã‚’çµ±åˆã€‚

**å…ƒ:** `backlog.md::4-3` (2026-01-18)

---

### 4-4. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: Soft Delete Utilsã«ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å°å…¥

**å„ªå…ˆåº¦**: Medium (anyå‹å‰Šæ¸› Phase 2)
**å¯¾è±¡**: 17ç®‡æ‰€

**å ´æ‰€**: `app/application/services/common/soft_delete_utils.py`

**ç¾çŠ¶:**
```python
def get_product_name(product: Any, default: str = "") -> str:
    """è£½å“åã‚’å®‰å…¨ã«å–å¾— (è«–ç†å‰Šé™¤å¯¾å¿œ)"""
    if product is None:
        return default
    return getattr(product, "product_name", default)
```

**å¯¾å¿œ:**
```python
from typing import Protocol, Optional

class HasProductName(Protocol):
    product_name: str

def get_product_name(product: Optional[HasProductName], default: str = "") -> str:
    """è£½å“åã‚’å®‰å…¨ã«å–å¾— (è«–ç†å‰Šé™¤å¯¾å¿œ)"""
    if product is None:
        return default
    return product.product_name
```

**å…ƒ:** `any-type-reduction.md` (2026-01-18)

---

### 4-6. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: ProductMapping é–¢é€£ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-31
**ã‚«ãƒ†ã‚´ãƒª**: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

**èƒŒæ™¯:**
- 2026-01-31ã®ãƒã‚¹ã‚¿ãƒšãƒ¼ã‚¸æ”¹ä¿®ã«ã‚ˆã‚Šã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã€Œå•†å“ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆ`ProductMapping`ï¼‰ã€ãƒšãƒ¼ã‚¸ãŒå‰Šé™¤ã•ã‚Œã€æ©Ÿèƒ½ã¯ã€Œå¾—æ„å…ˆå“ç•ªãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆ`CustomerItem`ï¼‰ã€ã«ä¸€å…ƒåŒ–ã•ã‚ŒãŸã€‚
- ã—ã‹ã—ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã¯ `ProductMapping` ãƒ¢ãƒ‡ãƒ«ã€Routerã€Serviceã€Import/Exportãƒ­ã‚¸ãƒƒã‚¯ãŒæ®‹å­˜ã—ã¦ã„ã‚‹ã€‚
- ã“ã‚Œã‚‰ã¯ `replenishment/engine.py` ç­‰ã‹ã‚‰å‚ç…§ã•ã‚Œã¦ãŠã‚Šã€å½±éŸ¿èª¿æŸ»ãŒå¿…è¦ãªãŸã‚ä»Šå›ã¯æ¸©å­˜ã•ã‚ŒãŸã€‚

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
1. `ProductMapping` ã®å‚ç…§ç®‡æ‰€ã‚’æ´—ã„å‡ºã™ã€‚
2. å¿…è¦ãªãƒ­ã‚¸ãƒƒã‚¯ï¼ˆã‚‚ã—ã‚ã‚Œã°ï¼‰ã‚’ `CustomerItem` ãƒ™ãƒ¼ã‚¹ã«ç§»è¡Œã™ã‚‹ã€‚
3. ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ãƒ»ä¿®æ­£ã™ã‚‹:
   - `backend/app/infrastructure/persistence/models/masters_models.py` (Class `ProductMapping`)
   - `backend/app/presentation/api/routes/masters/product_mappings_router.py`
   - `backend/app/application/services/masters/product_mappings_service.py`
   - `backend/app/presentation/schemas/masters/masters_schema.py`
   - ãã®ä»– Import/Export é–¢é€£
4. ãƒ†ã‚¹ãƒˆã‚’ä¿®æ­£ã™ã‚‹ã€‚

**å…ƒ:** 2026-01-31 ãƒã‚¹ã‚¿ãƒšãƒ¼ã‚¸æ”¹ä¿®


## 5. ãƒ†ã‚¹ãƒˆãƒ»è‡ªå‹•åŒ–

### 5-1. çµ±åˆãƒ†ã‚¹ãƒˆãƒ»E2Eãƒ†ã‚¹ãƒˆã®æ‹¡å……

**å„ªå…ˆåº¦**: High
**ä½œæˆ**: 2026-01-30
**ã‚«ãƒ†ã‚´ãƒª**: å“è³ªä¿è¨¼ãƒ»å›å¸°ãƒ†ã‚¹ãƒˆ

**èƒŒæ™¯:**
æ˜¨æ—¥ã®å¤§è¦æ¨¡æ”¹ä¿®ï¼ˆPhase 2ç§»è¡Œï¼‰å¾Œã€æ‰‹å‹•ãƒ†ã‚¹ãƒˆã§ä»¥ä¸‹ã®500ã‚¨ãƒ©ãƒ¼ãŒç™ºè¦‹ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã¯ãƒ†ã‚¹ãƒˆã§æ¤œå‡ºã•ã‚Œãšã€æœ¬ç•ªç›¸å½“ã®ç’°å¢ƒã§åˆã‚ã¦ç™ºè¦šã—ã¾ã—ãŸï¼š

1. **å˜ä½æ›ç®—ãƒšãƒ¼ã‚¸**: SQLAlchemy joinæ§‹æ–‡ãƒŸã‚¹
2. **ä¸€æ‹¬ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**: Pythonã‚¹ã‚³ãƒ¼ãƒ—ãƒ«ãƒ¼ãƒ«é•åï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®é‡è¤‡ï¼‰
3. **ææ–™ãƒ­ãƒƒãƒˆç®¡ç†ãƒšãƒ¼ã‚¸**: `lot_number` NULL/ç©ºæ–‡å­—åˆ—ã®Pydanticãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼

**èª²é¡Œ:**
- ä¸»è¦APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®çµ±åˆãƒ†ã‚¹ãƒˆãŒä¸è¶³
- ç”»é¢é·ç§»ãƒ»UIæ“ä½œã‚’å«ã‚€E2Eãƒ†ã‚¹ãƒˆãŒå­˜åœ¨ã—ãªã„
- ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã«å¢ƒç•Œå€¤ã‚±ãƒ¼ã‚¹ï¼ˆNULLå€¤ãªã©ï¼‰ãŒä¸è¶³

**ã‚¿ã‚¹ã‚¯å†…å®¹:**

#### 5-1-1. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰çµ±åˆãƒ†ã‚¹ãƒˆã®è¿½åŠ 
- [ ] ä¸»è¦APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆå®Ÿéš›ã®DBæ¥ç¶šï¼‰
  - ãƒã‚¹ã‚¿ç³»: é¡§å®¢ã€è£½å“ã€ä»•å…¥å…ˆã€å€‰åº«ã€å˜ä½æ›ç®—ã€etc.
  - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç³»: ãƒ­ãƒƒãƒˆã€å—æ³¨ã€å¼•å½“ã€å…¥å‡ºåº«
  - ã‚·ã‚¹ãƒ†ãƒ ç³»: ä¸€æ‹¬ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã€ãƒ­ã‚°ãƒ“ãƒ¥ãƒ¼ã‚¢
- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ»å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆ
  - NULLè¨±å®¹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒ†ã‚¹ãƒˆ
  - ç©ºæ–‡å­—åˆ—ã€ã‚¼ãƒ­å€¤ã®ãƒ†ã‚¹ãƒˆ
  - å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„é•åã®ãƒ†ã‚¹ãƒˆ
- [ ] SQLã‚¯ã‚¨ãƒªã®ãƒ†ã‚¹ãƒˆ
  - JOINæ§‹æ–‡ã®æ­£å½“æ€§
  - N+1å•é¡Œã®æ¤œå‡º
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

#### 5-1-2. E2Eãƒ†ã‚¹ãƒˆåŸºç›¤ã®æ§‹ç¯‰
- [ ] E2Eãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®é¸å®šãƒ»å°å…¥ï¼ˆPlaywrightæ¨å¥¨ï¼‰
- [ ] ä¸»è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼
  - ãƒ­ã‚°ã‚¤ãƒ³ â†’ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â†’ ãƒã‚¹ã‚¿ç”»é¢é·ç§»
  - ãƒ­ãƒƒãƒˆæ–°è¦ç™»éŒ² â†’ åœ¨åº«ç¢ºèª
  - å—æ³¨ç™»éŒ² â†’ å¼•å½“ â†’ å‡ºåº«
  - ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- [ ] ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹ã®ãƒ†ã‚¹ãƒˆ
  - FEFOå¼•å½“ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
  - åœ¨åº«è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
  - æ¨©é™åˆ¶å¾¡ï¼ˆRBACï¼‰

#### 5-1-3. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æ‹¡å……
- [ ] å¢ƒç•Œå€¤ãƒ»ç•°å¸¸ç³»ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿è¿½åŠ 
  - `lot_number` ãŒ NULL/ç©ºæ–‡å­—åˆ—ã®ãƒ­ãƒƒãƒˆ
  - æ¶ˆè²»æœŸé™åˆ‡ã‚Œã®ãƒ­ãƒƒãƒˆ
  - è«–ç†å‰Šé™¤ã•ã‚ŒãŸãƒã‚¹ã‚¿ã‚’å‚ç…§ã™ã‚‹ãƒ‡ãƒ¼ã‚¿
- [ ] `factory_boy` ã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã®è‡ªå‹•åŒ–

**æƒ³å®šå·¥æ•°**: 1-2é€±é–“ï¼ˆæ®µéšçš„ã«å®Ÿè£…ï¼‰

**å…ƒ:** 2026-01-30 æ‰‹å‹•ãƒ†ã‚¹ãƒˆçµæœã®ãƒ¬ãƒ“ãƒ¥ãƒ¼

---

### 5-2. ãƒ†ã‚¹ãƒˆåŸºç›¤æ‹¡å¼µï¼ˆä½å„ªå…ˆåº¦ï¼‰

- **C3: Data Factory (Backend) æ‹¡å¼µ**: `factory_boy` ç­‰ã‚’ä½¿ç”¨ã—ãŸãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ•ã‚¡ã‚¯ãƒˆãƒªã®æ•´å‚™ã€‚ç¾åœ¨ã¯ `services/test_data_generator.py` ã§ä»£ç”¨ä¸­ã€‚
- **C4: Test Matrix å®šç¾©**: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®çµ„ã¿åˆã‚ã›è¡¨ï¼ˆãƒãƒˆãƒªã‚¯ã‚¹ï¼‰ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã¨ç®¡ç†ã€‚
- **Phase D: APIçµ±åˆãƒ†ã‚¹ãƒˆæ‹¡å¼µ**: ä»¥ä¸‹ã®è¦³ç‚¹ã§ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰çµ±åˆãƒ†ã‚¹ãƒˆæ‹¡å……ã€‚
  - ä¸»è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£CRUDï¼ˆæ­£å¸¸ç³»/ç•°å¸¸ç³»ï¼‰
  - ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒ†ã‚¹ãƒˆï¼ˆãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•Œãªã©ï¼‰
  - æ¨©é™ãƒ†ã‚¹ãƒˆï¼ˆRBACã®å¾¹åº•ç¢ºèªï¼‰

**å…ƒ:** `backlog.md::5-1` (2026-01-18)

---

### 5-3. ãƒ†ã‚¹ãƒˆDBã§Alembic Migrationsã‚’å®Ÿè¡Œ

**å„ªå…ˆåº¦**: Medium
**é›£æ˜“åº¦**: Medium
**æƒ³å®šå·¥æ•°**: 2-3æ—¥

**èƒŒæ™¯:**
ç¾åœ¨ã€ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã¯ `Base.metadata.create_all()` ã§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¦ã„ã‚‹ãŸã‚ã€æœ¬ç•ªç’°å¢ƒï¼ˆAlembic Migrationsä½¿ç”¨ï¼‰ã¨ä»¥ä¸‹ã®å·®ç•°ãŒç™ºç”Ÿã—ã¾ã™ï¼š

1. **server_defaultå€¤ã®é•ã„**
   - ä¾‹: `consumed_quantity` ã‚«ãƒ©ãƒ ã¯ã€ãƒ¢ãƒ‡ãƒ«å®šç¾©ã§ã¯ `server_default=text("0")` ã ãŒã€Migrationã§ã¯ `server_default=None`
2. **Database Triggersã®æœªé©ç”¨**
3. **Constraintsã®é•ã„**
4. **Migrationè‡ªä½“ã®ãƒã‚°æ¤œå‡ºä¸å¯**

**å•é¡Œç‚¹ (2026-01-18æ™‚ç‚¹):**
- ç¾åœ¨70+ migrationsãŒå­˜åœ¨ã—ã€å¤šæ•°ã®mergepoint/branchpointãŒã‚ã‚‹
- ä¾å­˜é–¢ä¿‚ãŒè¤‡é›‘ã§ã€ãƒ†ãƒ¼ãƒ–ãƒ«ãŒæ­£ã—ã„é †åºã§ä½œæˆã•ã‚Œãªã„

**å®Ÿè£…ã‚¿ã‚¤ãƒŸãƒ³ã‚°:**
ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®æ¡ä»¶ã‚’æº€ãŸã—ãŸæ™‚ç‚¹ã§å®Ÿè£…ï¼š
1. Migrationã®çµ±åˆãƒ»æ•´ç†ãŒå®Œäº†ï¼ˆ70+ â†’ 10-20å€‹ç¨‹åº¦ï¼‰
2. ã‚¹ã‚­ãƒ¼ãƒã®å¤§å¹…å¤‰æ›´æ™‚
3. Migrationé–¢é€£ã®ãƒã‚°ãŒé »ç™º

**æš«å®šå¯¾ç­–ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰:**
1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã§ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤è¨­å®š
2. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ä¿®æ­£
3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–

**å…ƒ:** `FUTURE_IMPROVEMENTS.md`

---





### 5-5. E2Eãƒ†ã‚¹ãƒˆã®å¤±æ•—ä¿®æ­£ (19ä»¶)

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-26
**ç¾çŠ¶**: 61ãƒ†ã‚¹ãƒˆä¸­ 42 passed / 19 failed

**å¤±æ•—ã‚«ãƒ†ã‚´ãƒª:**

1. **ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã‚»ãƒ¬ã‚¯ã‚¿å•é¡Œ** (è¤‡æ•°ãƒ†ã‚¹ãƒˆ)
   - `getByLabel('ãƒ¦ãƒ¼ã‚¶ãƒ¼å')` ãŒè¦‹ã¤ã‹ã‚‰ãªã„
   - å¯¾è±¡: `e2e-04-permission.spec.ts` ç­‰
   - åŸå› : ãƒ­ã‚°ã‚¤ãƒ³UIã®å¤‰æ›´ã«ãƒ†ã‚¹ãƒˆãŒè¿½å¾“ã—ã¦ã„ãªã„

2. **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä¸æ•´åˆ**
   - `warehouse-crud.spec.ts`: "Existing Warehouse" ãŒå­˜åœ¨ã—ãªã„
   - `customer-items.spec.ts`: æœŸå¾…ã™ã‚‹ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãŒãªã„

3. **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ/å¿œç­”é…å»¶**
   - `e2e-06-error-handling.spec.ts`: é•·æ™‚é–“ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**å¤±æ•—ãƒ†ã‚¹ãƒˆä¸€è¦§:**
- `e2e/allocation.spec.ts`
- `e2e/customer-items.spec.ts`
- `e2e/rpa-material-delivery.spec.ts`
- `e2e/shortage-auto-order.spec.ts`
- `e2e/specs/p0/e2e-01-order-flow.spec.ts`
- `e2e/specs/p0/e2e-02-save-persistence.spec.ts` (2ä»¶)
- `e2e/specs/p0/e2e-03-double-submit.spec.ts` (2ä»¶)
- `e2e/specs/p0/e2e-04-permission.spec.ts` (4ä»¶)
- `e2e/specs/p0/e2e-05-list-filter.spec.ts` (4ä»¶)
- `e2e/specs/p0/e2e-06-error-handling.spec.ts`
- `e2e/warehouse-crud.spec.ts`

**å¯¾å¿œæ–¹é‡:**
1. ãƒ­ã‚°ã‚¤ãƒ³ã‚»ãƒ¬ã‚¯ã‚¿ã‚’ç¾åœ¨ã®UIæ§‹é€ ã«åˆã‚ã›ã¦æ›´æ–°
2. ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£/ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®æ•´å‚™
3. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå€¤ã®èª¿æ•´ã¾ãŸã¯ãƒ†ã‚¹ãƒˆè¨­è¨ˆã®è¦‹ç›´ã—

**å…ƒ:** SSOTåŒ–PR E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœ (2026-01-26)

---

## 6. æ©Ÿèƒ½æ”¹å–„ãƒ»ä¸­é•·æœŸã‚¿ã‚¹ã‚¯

### 6-1. DB/UIæ•´åˆæ€§ä¿®æ­£ã«ä¼´ã†ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½

- Forecasts / Orders / Inventory/Lots ã® Excel ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Ÿè£…ã€‚

**å…ƒ:** `backlog.md::6-1` (2026-01-18)

---

### 6-2. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®å¯è¦–åŒ–ï¼ˆrechartsï¼‰

- KPIã®ã¿ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚°ãƒ©ãƒ•ã‚’è¿½åŠ ã€‚

**å…ƒ:** `backlog.md::6-2` (2026-01-18)

---

### 6-3. SAPé€£æºã‚¿ã‚¹ã‚¯

- æœ¬ç•ªAPIæ¥ç¶šã€äºŒé‡è¨ˆä¸Šé˜²æ­¢ã®ã¹ãç­‰æ€§å¯¾å¿œã€åœ¨åº«åŒæœŸã€‚

**å…ƒ:** `backlog.md::6-3` (2026-01-18)

---

### 6-4. ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆå˜ä½ã®å¼•å½“æ¨å¥¨ç”Ÿæˆ

- æ—¢å­˜ã¯å…¨æœŸé–“ä¸€æ‹¬ã®ã¿ã€‚ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—å˜ä½ã§ã®ç”ŸæˆãŒå¿…è¦ã€‚

**å…ƒ:** `backlog.md::6-4` (2026-01-18)

---

### 6-5. å…¥è·äºˆå®šã®å€‰åº«ãƒ‡ãƒ¼ã‚¿å–å¾—æ”¹å–„

- `InboundPlan`ãƒ˜ãƒƒãƒ€ãƒ¼ã«å€‰åº«æƒ…å ±ãŒãªãã€ŒæœªæŒ‡å®šã€ã«é›†ç´„ã•ã‚Œã‚‹å•é¡Œã€‚

**å…ƒ:** `backlog.md::6-5` (2026-01-18)

---

### 6-6. OpenAPIå‹å®šç¾©ã®å°å…¥

- `openapi-typescript` ã‚’åˆ©ç”¨ã—ãŸå‹ç”Ÿæˆã§ãƒ•ãƒ­ãƒ³ãƒˆ/ãƒãƒƒã‚¯ã®æ•´åˆæ€§ã‚’ç¢ºä¿ã€‚

**å…ƒ:** `backlog.md::6-6` (2026-01-18)

---

### 6-7. å•†å“è­˜åˆ¥è¨­è¨ˆã®ãƒ“ã‚¸ãƒã‚¹å®Ÿæ…‹ã¸ã®é©åˆ

**å„ªå…ˆåº¦**: Medium
**é›£æ˜“åº¦**: High
**æƒ³å®šå·¥æ•°**: 5-7æ—¥

**èƒŒæ™¯ãƒ»èª²é¡Œ:**
- ç¾çŠ¶ã®å®Ÿè£…ã¯ `maker_part_code`ï¼ˆãƒ¡ãƒ¼ã‚«ãƒ¼å“ç•ª/å†…éƒ¨ã‚³ãƒ¼ãƒ‰ï¼‰ä¸­å¿ƒã ãŒã€ãƒ“ã‚¸ãƒã‚¹å®Ÿæ…‹ã¯9å‰²ãŒã€Œå…ˆæ–¹å“ç•ªï¼ˆCustomer Part Noï¼‰ã€ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚‹ã€‚
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›´æ„Ÿã«åˆã‚ã›ãŸè­˜åˆ¥å­è¨­è¨ˆã¸ã®è¦‹ç›´ã—ãŒå¿…è¦ã€‚

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
1. å…ˆæ–¹å“ç•ªã‚’ãƒ—ãƒ©ã‚¤ãƒãƒªãªæ¤œç´¢/è­˜åˆ¥ã‚­ãƒ¼ã¨ã—ã¦æ‰±ãˆã‚‹ã‚ˆã†è¨­è¨ˆã‚’è¦‹ç›´ã™ã€‚
2. `Product` ãƒã‚¹ã‚¿ã«ãŠã‘ã‚‹è¤‡æ•°å“ç•ªï¼ˆãƒ¡ãƒ¼ã‚«ãƒ¼å“ç•ªã€å…ˆæ–¹å“ç•ªã€å†…éƒ¨ã‚³ãƒ¼ãƒ‰ï¼‰ã®å„ªå…ˆé †ä½ã¨ç”¨é€”ã‚’æ•´ç†ã—ã€å‘½åã‚’æ”¹å–„ã™ã‚‹ã€‚

**é–¢é€£:** `MASTER_DATA_FIELD_ALIGNMENT_TASKS.md::4`

**å…ƒ:** `FUTURE_IMPROVEMENTS.md` & `MASTER_DATA_FIELD_ALIGNMENT_TASKS.md` (2026-01-19)

---

### 6-8. Phase 4ä»¥é™ï¼šå°†æ¥çš„ãªæ”¹å–„ãƒ»æ‹¡å¼µ

**å„ªå…ˆåº¦**: Lowã€œMedium
**é›£æ˜“åº¦**: Mediumã€œHigh

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
1. **ãƒãƒƒãƒ”ãƒ³ã‚°è¨­å®šã®UIåŒ–**
   - ç¾åœ¨ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§è¡Œã£ã¦ã„ã‚‹OCRãƒ†ã‚­ã‚¹ãƒˆç½®æ›ã‚„å“ç›®ãƒãƒƒãƒ”ãƒ³ã‚°ã®è¨­å®šã‚’ã€ç®¡ç†ç”¨UIã‹ã‚‰å¤‰æ›´å¯èƒ½ã«ã™ã‚‹ã€‚
2. **AIã‚’æ´»ç”¨ã—ãŸè£œå®Œæ©Ÿèƒ½**
   - éå»ã®ç·¨é›†å±¥æ­´ã‚’æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦å­¦ç¿’ã—ã€OCRçµæœã®ä¸æ˜ç­ãªç®‡æ‰€ã‚’ã‚ˆã‚Šé«˜ã„ç²¾åº¦ã§è‡ªå‹•è£œå®Œã™ã‚‹ã€‚
3. **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ©Ÿèƒ½**
   - ãƒ­ãƒƒãƒˆç®¡ç†çŠ¶æ³ã‚„OCRå‡¦ç†é€Ÿåº¦ã€ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡ãªã©ã‚’è¦–è¦šåŒ–ã™ã‚‹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®è¿½åŠ ã€‚
4. **OCRçµæœã¨å—æ³¨ç®¡ç†ã®çµ±åˆ**
   - OCRã§èª­ã¿å–ã£ãŸçµæœã‚’å—æ³¨ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ç›´æ¥å–ã‚Šè¾¼ã¿ã€å—æ³¨ç®¡ç†æ©Ÿèƒ½ã¨ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«é€£æºã•ã›ã‚‹ã“ã¨ã§ã€å…¥åŠ›ä½œæ¥­ã®ã•ã‚‰ãªã‚‹è‡ªå‹•åŒ–ã‚’å›³ã‚‹ã€‚
5. **scripts ã¨ tools ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ•´ç†ãƒ»å®šç¾©æ˜ç¢ºåŒ–**
   - ç¾åœ¨ã€é‹ç”¨ç³»ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆscriptsï¼‰ã¨é–‹ç™ºãƒ»CIãƒ„ãƒ¼ãƒ«ï¼ˆtoolsï¼‰ã®å¢ƒç•ŒãŒæ›–æ˜§ãªãŸã‚ã€å½¹å‰²ã‚’å†å®šç¾©ã—ã¦æ•´ç†ã™ã‚‹ã€‚
   - `scripts`: æœ¬ç•ª/ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ãƒ‡ãƒ¼ã‚¿è£œæ­£ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã€ãƒ‡ãƒ—ãƒ­ã‚¤ãªã©ã®é‹ç”¨ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ç³»ã€‚
   - `tools`: é™çš„è§£æã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆã€é–‹ç™ºè£œåŠ©ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãªã©ã®é–‹ç™ºãƒ»CIç³»ã€‚
6. **DBæ•´åˆæ€§ç¶­æŒã®è‡ªå‹•åŒ– (DB Triggers)**
   - `lot_master` ã®é›†è¨ˆå€¤ï¼ˆåˆå›å…¥è·æ—¥ã€æœ€çµ‚æœ‰åŠ¹æœŸé™ç­‰ï¼‰ã‚’DBãƒˆãƒªã‚¬ãƒ¼ã§è‡ªå‹•æ›´æ–°ã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã§ã®æ›´æ–°æ¼ã‚Œã‚’é˜²ãã€‚

**å…ƒ:** `FUTURE_IMPROVEMENTS.md`

---

## 7. ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º

### 7-1. ãƒ†ã‚¹ãƒˆã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œå‡ºã¨ä¿®æ­£

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-30
**ã‚«ãƒ†ã‚´ãƒª**: ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»ä¿å®ˆæ€§

**èƒŒæ™¯:**
ãƒ†ã‚¹ãƒˆä¿®æ­£ä¸­ã«ã€è¤‡æ•°ã®ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ãŒç™ºè¦‹ã•ã‚Œã¾ã—ãŸï¼š
1. **ç‹¬è‡ªtest_dbã‚»ãƒƒã‚·ãƒ§ãƒ³**: 21å€‹ã®APIãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒç‹¬è‡ªã®DBã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«fixtureã¨äº’æ›æ€§ãŒãªã„
2. **fixture ã®é‡è¤‡**: åŒã˜ master data ã‚’å„ãƒ•ã‚¡ã‚¤ãƒ«ã§é‡è¤‡ã—ã¦å®šç¾©
3. **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ã®ä¸çµ±ä¸€**: commit/flush/rollback ã®ä½¿ã„åˆ†ã‘ãŒçµ±ä¸€ã•ã‚Œã¦ã„ãªã„

**ã‚¿ã‚¹ã‚¯å†…å®¹:**

#### 7-1-1. æ—¢çŸ¥ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¿®æ­£
- [x] ç‹¬è‡ªtest_dbã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å‰Šé™¤ï¼ˆ21ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰â†’ ã‚°ãƒ­ãƒ¼ãƒãƒ« `db` fixture ã«çµ±ä¸€ (ARCHIVE.mdã¸ç§»å‹•)

#### 7-1-2. ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºãƒ„ãƒ¼ãƒ«ã®å°å…¥
- [ ] pytest-best-practices ãªã©ã®linterãƒ„ãƒ¼ãƒ«æ¤œè¨
- [ ] ã‚«ã‚¹ã‚¿ãƒ pytest pluginã§ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º
  - ç‹¬è‡ªã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆã®æ¤œå‡º
  - fixture ã‚¹ã‚³ãƒ¼ãƒ—ã®ä¸é©åˆ‡ãªä½¿ç”¨
  - é‡è¤‡ã™ã‚‹setup/teardown
- [ ] CI/CDã«çµ„ã¿è¾¼ã¿

#### 7-1-3. ãƒ†ã‚¹ãƒˆãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–
- [ ] `docs/standards/testing.md` ã®ä½œæˆ
  - Fixture ã®ä½¿ã„æ–¹
  - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
  - ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ä½œæˆãƒ‘ã‚¿ãƒ¼ãƒ³
  - é¿ã‘ã‚‹ã¹ãã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³

**æƒ³å®šå·¥æ•°**: 2-3æ—¥

**å…ƒ:** 2026-01-30 ãƒ†ã‚¹ãƒˆä¿®æ­£ä½œæ¥­

---

## 9. ä¿ç•™ï¼ˆå†ç¾ç¢ºèªãƒ»èª¿æŸ»å¾…ã¡ï¼‰

### 9-1. ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆç·¨é›†å¾Œã®æ›´æ–°å•é¡Œ

- ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆç·¨é›†å¾Œã€è¨ˆç”»å¼•å½“ã‚µãƒãƒªãƒ»é–¢é€£å—æ³¨ãŒæ›´æ–°ã•ã‚Œãªã„ã€‚
- æ‰‹å‹•ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã§ã¯å›é¿å¯èƒ½ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†è¨ˆç®—ã®ç¢ºèªãŒå¿…è¦ã€‚

**å…ƒ:** `backlog.md::7-1` (2026-01-18)

---

### 9-2. éå»ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–æ€§å‘ä¸Š

- **å…¥è·äºˆå®šä¸€è¦§**: éå»ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºç¢ºèªã¨ã€Œéå»/æœªæ¥ã€ã‚¿ãƒ–ã¾ãŸã¯ãƒ•ã‚£ãƒ«ã‚¿ã®å®Ÿè£…ã€‚
- **å—æ³¨ç®¡ç†**: éå»ã®å—æ³¨ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºç¢ºèªã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹/æ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿ã®å¼·åŒ–ã€‚
- **ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆä¸€è¦§**: ã€Œå±¥æ­´ã€ã‚¿ãƒ–ã®æ©Ÿèƒ½ç¢ºèªã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆ`/history`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ´»ç”¨ï¼‰ã€‚

**å…ƒ:** `backlog.md::8-1` (2026-01-18)

---

### 9-3. RPAé€šå¸¸ç‰ˆ (Step1) ã®å®Ÿè¡Œä¸å¯ä¿®æ­£

- **ç—‡çŠ¶**: `/rpa/material-delivery-note` ã®Step1å®Ÿè¡Œãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã‚‚ã€è¨­å®šã‚­ãƒ¼ä¸ä¸€è‡´ã«ã‚ˆã‚ŠBackendã§å³åº§ã«ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‹ã€‚
- **åŸå› **: Frontend (`STEP1_URL`) ã¨ Backend (`progress_download_url`) ã®è¨­å®šã‚­ãƒ¼ä¸æ•´åˆã€‚
- **å¯¾å‡¦**: è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«ã®ä¿å­˜ã‚­ãƒ¼ä¿®æ­£ã€ã¾ãŸã¯Backendã®å‚ç…§ã‚­ãƒ¼ä¿®æ­£ã€‚
- **è©³ç´°**: `docs/issues/20260128_RPA_MaterialDelivery_Step1_Failure.md`

**å…ƒ:** 2026-01-28 èª¿æŸ»

---

## 9. æŠ€è¡“è² å‚µ (ä½å„ªå…ˆåº¦)

### 9-1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: å¤–éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å‹å®šç¾©ã‚’æ”¹å–„

**å„ªå…ˆåº¦**: Low (anyå‹å‰Šæ¸› Phase 3)
**å¯¾è±¡**: 16ç®‡æ‰€

**å ´æ‰€**: `src/types/external-modules.d.ts`

**ç†ç”±**: å¤–éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«(@radix-ui)ã®å‹å®šç¾©ãŒä¸å®Œå…¨

**å¯¾å¿œ**: Radix UIã®å‹å®šç¾©ã‚’æ­£ç¢ºã«è¨˜è¿°ã™ã‚‹ã‹ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å‹å®šç¾©ã‚’åˆ©ç”¨

**å…ƒ:** `any-type-reduction.md` (2026-01-18)

---

### 9-2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: Repository Methodsã«ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’å°å…¥

**å„ªå…ˆåº¦**: Low (anyå‹å‰Šæ¸› Phase 3)
**å¯¾è±¡**: 3ç®‡æ‰€

**å ´æ‰€**: `app/infrastructure/persistence/repositories/rpa_repository.py`

**ç¾çŠ¶:**
```python
def add(self, entity: Any) -> None:
    self.db.add(entity)

def refresh(self, entity: Any) -> None:
    self.db.refresh(entity)
```

**å¯¾å¿œ**: ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ç”¨
```python
from typing import TypeVar
T = TypeVar('T')

def add(self, entity: T) -> None:
    self.db.add(entity)
```

**å…ƒ:** `any-type-reduction.md` (2026-01-18)

---

### 9-3. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: Export Serviceã®å‹ã‚’æ”¹å–„

**å„ªå…ˆåº¦**: Low (anyå‹å‰Šæ¸› Phase 3)
**å¯¾è±¡**: 2ç®‡æ‰€

**å ´æ‰€**: `app/application/services/common/export_service.py`

**å¯¾å¿œ**: TypedDictã¾ãŸã¯ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ç”¨

**å…ƒ:** `any-type-reduction.md` (2026-01-18)

---

### 9-4. SmartRead Logging Gaps - errorLogger Integration

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-21
**é–¢é€£PR**: feature/smartread-vertical-conversion-fix

**èƒŒæ™¯:**
PR #454 added `errorLogger` to main features for success/error logging. However, SmartRead feature lacks consistent logging across all operations.

**å®Œäº†æ¸ˆã¿:**
- `useTransformToLong` - errorLoggerè¿½åŠ æ¸ˆã¿

**æ¬ è½ç®‡æ‰€:**
- API Operations (`api.ts`): `syncTaskResults()`, `saveLongData()`, `uploadFile()`, etc.
- Hook Operations (`hooks.ts`): `useSyncTaskResults`, `useSmartReadConfigs`, `useSmartReadTasks`
- Component Operations: `SmartReadResultView`, `SmartReadUploadPanel`, `SmartReadTaskList`

**å„ªå…ˆåº¦:**
- High: `useSyncTaskResults`, API file operations, config CRUD
- Medium: User action logging, task list operations
- Low: Backend logging strategy review

**å…ƒ:** `smartread-logging-gaps.md` (2026-01-21)

---

### 9-5. SmartRead Cache-to-DB Save Inconsistency

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-21

**å•é¡Œ:**
ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ï¼ˆIndexedDBï¼‰ãŒè‡ªå‹•çš„ã«DBã«ä¿å­˜ã•ã‚Œãªã„ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šæ€§ãŒä¿è¨¼ã•ã‚Œã¦ã„ãªã„ã€‚

**æ¨å¥¨å¯¾å¿œï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³Cï¼‰:**
IDBã«ã€ŒDBä¿å­˜æ¸ˆã¿ã€ãƒ•ãƒ©ã‚°ã‚’è¿½åŠ ã—ã€æœªä¿å­˜ãƒ‡ãƒ¼ã‚¿ã®ã¿DBä¿å­˜ã™ã‚‹ã€‚

**å®Ÿè£…ã‚¿ã‚¹ã‚¯:**
1. ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ï¼ˆ`saved_to_db` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼‰
2. ä¿å­˜ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
3. ä»–ã®ãƒ•ãƒ­ãƒ¼ä¿®æ­£
4. ãƒ†ã‚¹ãƒˆ

**å…ƒ:** `smartread-cache-db-save-inconsistency.md` (2026-01-21)

---

### 9-6. SSOTçµ±ä¸€: CustomerItems è¤‡åˆã‚­ãƒ¼APIå»ƒæ­¢

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26
**é–¢é€£**: customer_item_delivery_settings SSOTåŒ–

**èƒŒæ™¯:**
CustomerItemsã®CRUD APIã¯ç¾åœ¨ã€å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚`/{customer_id}/{customer_part_no}`å½¢å¼ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç¶­æŒã—ã¦ã„ã‚‹ã€‚
`customer_items.id`ãŒSSOTã§ã‚ã‚‹ãŸã‚ã€å°†æ¥çš„ã«`/{id}`ãƒ™ãƒ¼ã‚¹ã«çµ±ä¸€ã™ã¹ãã€‚

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:**
- `backend/app/presentation/api/routes/masters/customer_items_router.py`
- `backend/app/application/services/masters/customer_items_service.py`

**å»ƒæ­¢å¯¾è±¡ãƒ¡ã‚½ãƒƒãƒ‰:**
- `get_by_key(customer_id, customer_part_no)`
- `update_by_key(customer_id, customer_part_no, ...)`
- `delete_by_key(customer_id, customer_part_no, ...)`
- `restore_by_key(customer_id, customer_part_no)`
- `permanent_delete_by_key(customer_id, customer_part_no)`

**ç§»è¡Œæ‰‹é †:**
1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®å‘¼ã³å‡ºã—å…ƒã‚’`/{id}`å½¢å¼ã«ç§»è¡Œ
2. å¾Œæ–¹äº’æ›ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«deprecationè­¦å‘Šã‚’è¿½åŠ 
3. ä¸€å®šæœŸé–“å¾Œã«å¾Œæ–¹äº’æ›ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å‰Šé™¤

**å…ƒ:** SSOTç›£æŸ»ãƒ¬ãƒãƒ¼ãƒˆ (2026-01-26)

---

### 9-7. SSOTçµ±ä¸€: ShipmentTextRequest ã® customer_item_id å¯¾å¿œ

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26
**ä¾å­˜**: OrderLineãƒ¢ãƒ‡ãƒ«ã¸ã®`customer_item_id`è¿½åŠ 

**èƒŒæ™¯:**
`/shipment-text`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ç¾åœ¨`customer_id + product_id`ã‚’å—ã‘å–ã‚Šã€å†…éƒ¨ã§`customer_part_no`ã«å¤‰æ›ã—ã¦ã„ã‚‹ã€‚
OrderLineã«`customer_item_id`ãŒè¿½åŠ ã•ã‚Œã‚Œã°ã€ç›´æ¥`customer_item_id`ã‚’å—ã‘å–ã‚‹å½¢å¼ã«ç§»è¡Œå¯èƒ½ã€‚

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:**
- `backend/app/presentation/schemas/masters/customer_item_delivery_setting_schema.py` (ShipmentTextRequest)
- `backend/app/application/services/masters/customer_item_delivery_setting_service.py` (get_shipment_text)
- `backend/app/infrastructure/persistence/repositories/customer_item_delivery_setting_repository.py` (find_matching_setting, find_customer_part_no)

**å‰ææ¡ä»¶:**
- OrderLine / order_lines ãƒ†ãƒ¼ãƒ–ãƒ«ã«`customer_item_id`ã‚«ãƒ©ãƒ ã‚’è¿½åŠ 
- å—æ³¨ä½œæˆæ™‚ã«`customer_item_id`ã‚’è¨­å®šã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…

**å…ƒ:** SSOTç›£æŸ»ãƒ¬ãƒãƒ¼ãƒˆ (2026-01-26)

---

### 9-8. ã‚¹ã‚­ãƒ¼ãƒé‡è¤‡è§£æ¶ˆ: SupplierItem

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
SupplierItemã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«å¯¾ã—ã¦2ç®‡æ‰€ã§ã‚¹ã‚­ãƒ¼ãƒãŒå®šç¾©ã•ã‚Œã¦ãŠã‚Šã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ãŒä½ä¸‹ã—ã¦ã„ã‚‹ã€‚

**é‡è¤‡ç®‡æ‰€:**
- `backend/app/presentation/schemas/masters/supplier_items_schema.py` (SupplierItemBase, Create, Update, Response)
- `backend/app/presentation/schemas/masters/masters_schema.py:321-367` (åŒåã®ã‚¹ã‚­ãƒ¼ãƒç¾¤)

**å¯¾å¿œ:**
1. ã©ã¡ã‚‰ãŒæ­£ã¨ã—ã¦ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‹èª¿æŸ»
2. ä½¿ç”¨ã•ã‚Œã¦ã„ãªã„æ–¹ã‚’å‰Šé™¤ã€ã¾ãŸã¯ç‰‡æ–¹ã‚’ä»–æ–¹ã¸ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã«å¤‰æ›´
3. ã‚¤ãƒ³ãƒãƒ¼ãƒˆå…ƒã‚’çµ±ä¸€

**å…ƒ:** SSOTç›£æŸ»ãƒ¬ãƒãƒ¼ãƒˆ (2026-01-26)

---



### 9-11. å¤§è¦æ¨¡ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰² (600è¡Œè¶…)

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
CLAUDE.md ã§æ¨å¥¨ã•ã‚Œã‚‹300è¡Œã‚’å¤§å¹…ã«è¶…ãˆã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã€‚
ä¿å®ˆæ€§ãƒ»å¯èª­æ€§ãƒ»ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ãŒä½ä¸‹ã€‚

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:**
| ãƒ•ã‚¡ã‚¤ãƒ« | è¡Œæ•° | åˆ†å‰²æ¡ˆ |
|----------|------|--------|
| `lot_service.py` | 1177 | LotCreationService, LotQueryService, LotUpdateService ã«åˆ†å‰² |
| `smartread_router.py` | 1108 | æ©Ÿèƒ½åˆ¥ã«è¤‡æ•° APIRouter ã«åˆ†å‰² |
| `smartread/client.py` | 935 | SmartReadUploader, SmartReadDownloader, SmartReadParser ã«åˆ†å‰² |
| `forecast_service.py` | 681 | ForecastImportService, ForecastCalculationService ã«åˆ†å‰² |

---

### 9-14. Infrastructure â†’ Service ã®é€†ä¾å­˜è§£æ¶ˆ

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
Infrastructureå±¤ï¼ˆclients/ï¼‰ãŒServiceå±¤ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹ç®‡æ‰€ãŒã‚ã‚‹ã€‚
ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ä¾å­˜é–¢ä¿‚ãŒé€†å‘ãã€‚

**å¯¾è±¡:**
- `backend/app/infrastructure/clients/lot_client.py`
- `backend/app/infrastructure/clients/inventory_client.py`
- `backend/app/infrastructure/clients/order_client.py`

**å¯¾å¿œ:**
1. Factoryãƒ‘ã‚¿ãƒ¼ãƒ³ã§ä¾å­˜æ€§æ³¨å…¥(DI)ã‚’å®Ÿè£…
2. ã¾ãŸã¯ã€clientsã‚’applicationå±¤ã«ç§»å‹•
3. ä¾å­˜é–¢ä¿‚: Presentation â†’ Application â†’ Domain â†’ Infrastructure

---

### 9-15. TODO/FIXME ã‚³ãƒ¡ãƒ³ãƒˆã®æ£šå¸ã—

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
ã‚³ãƒ¼ãƒ‰å†…ã«19ä»¶ã®TODO/FIXMEã‚³ãƒ¡ãƒ³ãƒˆãŒå­˜åœ¨ã€‚
å¯¾å¿œãŒå¿…è¦ãªã‚‚ã®ã¨ã€ã‚‚ã¯ã‚„ä¸è¦ãªã‚‚ã®ãŒæ··åœ¨ã—ã¦ã„ã‚‹å¯èƒ½æ€§ã€‚

**ä¸»ãªTODO:**
- `lots_router.py:461` - "Add permission check"ï¼ˆèªè¨¼ä¸å…·åˆã¯è§£æ¶ˆæ¸ˆã€è©³ç´°ãªãƒ­ãƒ¼ãƒ«åˆ¶é™ã¯ä»Šå¾Œæ¤œè¨ï¼‰
- `replenishment_router.py:57` - "Implement persistence"ï¼ˆæ°¸ç¶šåŒ–æœªå®Ÿè£…ï¼‰
- `smartread_router.py:857` - "SSEå®Ÿè£…"ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥æœªå®Ÿè£…ï¼‰
- `confirm.py:237` - "Support configurable expiry margin"ï¼ˆæœ‰åŠ¹æœŸé™ãƒãƒ¼ã‚¸ãƒ³è¨­å®šï¼‰

**å¯¾å¿œ:**
1. å„TODOã‚’BACKLOGã®é©åˆ‡ãªã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ç§»å‹•
2. å¯¾å¿œæ¸ˆã¿/ä¸è¦ãªTODOã¯å‰Šé™¤
3. æ®‹ã™ã¹ãTODOã«ã¯æœŸé™ã‚„ãƒã‚±ãƒƒãƒˆç•ªå·ã‚’ä»˜ä¸

---

### 9-16. InventoryTable å±•é–‹ã‚­ãƒ¼å½¢å¼ã®çµ±ä¸€

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
`InventoryTable`ã®è¡Œå±•é–‹ã§ä½¿ç”¨ã™ã‚‹ã‚­ãƒ¼å½¢å¼ãŒ2ç®‡æ‰€ã§ç•°ãªã£ã¦ã„ã‚‹ã€‚
PR #437 ã§`getItemKey`ã«`supplier_id`ã‚’è¿½åŠ ã—ãŸéš›ã€`useInventoryTableLogic`ã®ã‚­ãƒ¼å½¢å¼ã‚’æ›´æ–°ã—å¿˜ã‚ŒãŸã“ã¨ãŒåŸå› ã€‚

ç¾åœ¨ã¯ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å†…ã§å¤‰æ›å‡¦ç†ã‚’è¡Œã„æš«å®šå¯¾å¿œæ¸ˆã¿ã ãŒã€æ ¹æœ¬çš„ã«ã¯ã‚­ãƒ¼å½¢å¼ã‚’çµ±ä¸€ã™ã¹ãã€‚

**ç¾çŠ¶:**
- `getItemKey` (DataTableè¡ŒID): `${supplier_id ?? "all"}-${product_id}-${warehouse_id}` ï¼ˆ3éƒ¨æ§‹æˆï¼‰
- `useInventoryTableLogic.expandedRows`: `${productId}-${warehouseId}` ï¼ˆ2éƒ¨æ§‹æˆï¼‰

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:**
- `frontend/src/features/inventory/components/InventoryTable.tsx`
- `frontend/src/features/inventory/hooks/useInventoryTableLogic.ts`

**å¯¾å¿œæ¡ˆ:**
1. `useInventoryTableLogic`ã®ã‚­ãƒ¼å½¢å¼ã‚’3éƒ¨æ§‹æˆã«çµ±ä¸€
2. `toggleRow`, `isRowExpanded`, `fetchLotsForItem`ç­‰ã®ã‚·ã‚°ãƒãƒãƒ£ã«`supplierId`ã‚’è¿½åŠ 
3. ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å†…ã®å¤‰æ›å‡¦ç†ã‚’å‰Šé™¤

---

## 9. ãƒ“ã‚¸ãƒã‚¹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè£œè¶³ãŒå¿…è¦ãªé …ç›®

ä»¥ä¸‹ã®é …ç›®ã¯ã€ã‚³ãƒ¼ãƒ‰ã«ã€Œæ„å›³ãƒ»èƒŒæ™¯ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹éš›ã«ã€é–‹ç™ºè€…ã®åˆ¤æ–­ã ã‘ã§ã¯è¨˜è¿°ã§ããªã„é …ç›®ã§ã™ã€‚å¤–éƒ¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¾ãŸã¯ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã®ç¢ºèªãŒå¿…è¦ã§ã™ã€‚

### 9-1. ğŸ”´ æœ€å„ªå…ˆï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®æ ¹å¹¹ï¼‰

#### éå‰°äºˆç´„ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ–ãƒƒã‚­ãƒ³ã‚°ï¼‰ã®è¨±å®¹ç¯„å›²

**ãƒ•ã‚¡ã‚¤ãƒ«**: `stock_calculation.py`, `lot_reservation_service.py`

**è³ªå•:**
1. ã©ã®ç¨‹åº¦ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ–ãƒƒã‚­ãƒ³ã‚°ã¾ã§è¨±å®¹ã™ã‚‹ã®ã‹ï¼Ÿ
2. ã‚ªãƒ¼ãƒãƒ¼ãƒ–ãƒƒã‚­ãƒ³ã‚°æ™‚ã®é‹ç”¨ãƒ•ãƒ­ãƒ¼
3. ãƒªã‚¹ã‚¯ç®¡ç†

#### FEFO vs FIFO ã®ä½¿ã„åˆ†ã‘åŸºæº–

**ãƒ•ã‚¡ã‚¤ãƒ«**: `allocation_policy.py`, è£½å“ãƒã‚¹ã‚¿

**è³ªå•:**
1. è£½å“ã‚«ãƒ†ã‚´ãƒªã”ã¨ã®å…·ä½“çš„ãªé©ç”¨ãƒ«ãƒ¼ãƒ«
2. æœ‰åŠ¹æœŸé™ã®è¨­å®šåŸºæº–
3. é¡§å®¢è¦æ±‚ã¸ã®å¯¾å¿œ

#### SAPé€£æºã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨è²¬ä»»ç¯„å›²

**ãƒ•ã‚¡ã‚¤ãƒ«**: `sap_service.py`, `sap_router.py`

**è³ªå•:**
1. SAPç™»éŒ²ã®ãƒˆãƒªã‚¬ãƒ¼
2. SAPç™»éŒ²å¤±æ•—æ™‚ã®å¯¾å¿œ
3. SAPå´ã¨ã®è²¬ä»»åˆ†ç•Œç‚¹

### 9-2. ğŸŸ  é«˜å„ªå…ˆï¼ˆé‹ç”¨ãƒ«ãƒ¼ãƒ«ï¼‰

#### åœ¨åº«ãƒ­ãƒƒã‚¯æ©Ÿèƒ½ã®ç”¨é€”

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lot_models.py` (locked_quantity), `LockMode`

#### èª¿æ•´ç†ç”±ã®åˆ†é¡

**ãƒ•ã‚¡ã‚¤ãƒ«**: `adjustment_service.py`, `AdjustmentType`

### 9-3. ğŸŸ¡ ä¸­å„ªå…ˆï¼ˆæ‹¡å¼µæ€§ãƒ»å°†æ¥å¯¾å¿œï¼‰

#### ãƒãƒ«ãƒå€‰åº«å¯¾å¿œã®æ–¹é‡

**ãƒ•ã‚¡ã‚¤ãƒ«**: `config.py` (DEFAULT_WAREHOUSE_ID)

#### äºˆæ¸¬éœ€è¦ï¼ˆForecastï¼‰ã®æ´»ç”¨æ–¹æ³•

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lot_reservations_model.py` (ReservationSourceType.FORECAST)

**å…ƒ:** `BUSINESS_CONTEXT_NEEDED.md` (2025-12-27)

---

## 10. Excelãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ (ææ–™ãƒ­ãƒƒãƒˆç®¡ç†/å€‹åˆ¥)

### 10-1. æˆç¸¾æ›¸ï¼ˆCOAï¼‰ã®ç´å…¥å…ˆåˆ¥ç®¡ç†

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-26
**çŠ¶æ…‹**: è¨­è¨ˆæ¤œè¨ä¸­

**èƒŒæ™¯:**
å®Ÿéš›ã®Excelé‹ç”¨ã§ã¯ã€**æ¤œæŸ»æˆç¸¾æ›¸ã¯ç´å…¥å…ˆã”ã¨ã«ç™ºè¡Œæ—¥ãŒç•°ãªã‚‹**ã€‚
ä¾‹ï¼šåŒã˜ãƒ­ãƒƒãƒˆã§ã‚‚ DNåŒ—æµ·é“ â†’ 2025/10/24ã€DNå²©æ‰‹ â†’ 2025/10/24ï¼ˆåŒæ—¥ã®å ´åˆã‚‚ã‚ã‚‹ï¼‰

**ç¾çŠ¶ã®å•é¡Œ:**
- `LotReceipt.inspection_date` ã¯ãƒ­ãƒƒãƒˆå˜ä½ã®æƒ…å ±
- å®Ÿé‹ç”¨ã§ã¯ç´å…¥å…ˆÃ—ãƒ­ãƒƒãƒˆã®çµ„ã¿åˆã‚ã›ã§æˆç¸¾æ›¸ã‚’ç®¡ç†

**å¯¾å¿œæ¡ˆ:**
1. `AllocationSuggestion` ã« `coa_issue_date` ã‚«ãƒ©ãƒ ã‚’è¿½åŠ 
2. ã¾ãŸã¯å‡ºè·ãƒ¬ã‚³ãƒ¼ãƒ‰ã«æˆç¸¾æ›¸ç™ºè¡Œæ—¥ã‚’æŒãŸã›ã‚‹
3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ç´å…¥å…ˆè¡Œã”ã¨ã«æ—¥ä»˜ã‚’è¡¨ç¤º

**é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«:**
- `backend/app/infrastructure/persistence/models/inventory_models.py` (AllocationSuggestion)
- `frontend/src/features/inventory/components/excel-view/subcomponents/ShipmentTable.tsx`

---

### 10-2. åå®¹æ•°ãƒ»ä¿è¨¼æœŸé–“ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å®Ÿè£…

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
Excelãƒ“ãƒ¥ãƒ¼ãƒ˜ãƒƒãƒ€ãƒ¼ã«ã€Œåå®¹æ•°ã€ã€Œä¿è¨¼æœŸé–“ã€åˆ—ãŒã‚ã‚‹ãŒã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«å¯¾å¿œãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒãªã„ã€‚

**UIã§ã®è¡¨ç¤ºçŠ¶æ…‹:**
- åå®¹æ•°: å¸¸ã« `-` è¡¨ç¤º
- ä¿è¨¼æœŸé–“: å¸¸ã« `-` è¡¨ç¤º

**å¯¾å¿œæ¡ˆ:**
1. `Product` ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä»¥ä¸‹ã®ã‚«ãƒ©ãƒ ã‚’è¿½åŠ :
   - `capacity` (åå®¹æ•°): ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚ãŸã‚Šã®åå®¹é‡
   - `warranty_period_days` (ä¿è¨¼æœŸé–“æ—¥æ•°): è£½å“ã®ä¿è¨¼æœŸé–“
2. InventoryItem API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ã“ã‚Œã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å«ã‚ã‚‹

**é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«:**
- `frontend/src/features/inventory/components/excel-view/useExcelViewData.ts:177-178`
- `backend/app/presentation/schemas/inventory/inventory_schema.py`

---

### 10-3. å…ˆæ–¹å“ç•ªï¼ˆcustomerPartNoï¼‰ã®è¡¨ç¤º

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
Excelãƒ“ãƒ¥ãƒ¼ã®å¾—æ„å…ˆæƒ…å ±ã«ã€Œå…ˆæ–¹å“ç•ªã€ã‚’è¡¨ç¤ºã™ã‚‹æ¬„ãŒã‚ã‚‹ãŒã€ç¾åœ¨ã¯å¸¸ã« `-` è¡¨ç¤ºã€‚
å…ˆæ–¹å“ç•ªãƒã‚¹ã‚¿ï¼ˆ`customer_items`ï¼‰ã«ã¯é¡§å®¢-è£½å“ã®ãƒãƒƒãƒ”ãƒ³ã‚°ãŒå­˜åœ¨ã™ã‚‹ã€‚

**å¯¾å¿œæ¡ˆ:**
1. `AllocationSuggestion` ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã« `customer_part_no` ã‚’å«ã‚ã‚‹
2. ã¾ãŸã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ `customer_id` + `product_id` ã‹ã‚‰ `customer_items` ã‚’ãƒ«ãƒƒã‚¯ã‚¢ãƒƒãƒ—
3. `useExcelViewData.ts` ã® `getDestinationInfo()` ã§APIã‹ã‚‰å–å¾—ã—ãŸå€¤ã‚’ä½¿ç”¨

**é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«:**
- `frontend/src/features/inventory/components/excel-view/useExcelViewData.ts:56`
- `backend/app/presentation/api/v2/forecast/router.py` (AllocationSuggestion API)

---

### 10-4. ç™ºæ³¨NO.ã®è¡¨ç¤º

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
Excelãƒ“ãƒ¥ãƒ¼ã®ãƒ­ãƒƒãƒˆæƒ…å ±ã«ã€Œç™ºæ³¨NO.ã€åˆ—ãŒã‚ã‚‹ãŒã€å¸¸ã« `-` è¡¨ç¤ºã€‚
ãƒ­ãƒƒãƒˆãŒç™ºæ³¨ï¼ˆPurchase Orderï¼‰ã«ç´ã¥ã„ã¦ã„ã‚‹å ´åˆã€ãã®ç™ºæ³¨ç•ªå·ã‚’è¡¨ç¤ºã™ã¹ãã€‚

**ç¾çŠ¶:**
- `LotReceipt.origin_reference` ã«å‚ç…§æƒ…å ±ãŒã‚ã‚‹ãŒã€ç™ºæ³¨ç•ªå·ã¨ã¯åˆ¥æ¦‚å¿µ
- ç™ºæ³¨ç®¡ç†æ©Ÿèƒ½è‡ªä½“ãŒæœªå®Ÿè£…ã®å¯èƒ½æ€§

**å¯¾å¿œæ¡ˆ:**
1. ç™ºæ³¨ç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£…çŠ¶æ³ã‚’ç¢ºèª
2. `LotReceipt` ã« `purchase_order_id` / `purchase_order_number` ã‚’è¿½åŠ 
3. ã¾ãŸã¯ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã‚’å†ç¢ºèªï¼ˆç™ºæ³¨NOãŒå¿…è¦ã‹ã©ã†ã‹ï¼‰

**é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«:**
- `frontend/src/features/inventory/components/excel-view/useExcelViewData.ts:84`

---


### 10-7. æ—¥ä»˜åˆ—ã®ä»•æ§˜æ•´ç†ï¼ˆäºˆæ¸¬ vs å®Ÿç¸¾ï¼‰

**å„ªå…ˆåº¦**: High
**ä½œæˆ**: 2026-01-26
**çŠ¶æ…‹**: è¨­è¨ˆæ¤œè¨ä¸­

**èƒŒæ™¯:**
å®Ÿéš›ã®é‹ç”¨ã§ã¯ã€æ—¥ä»˜åˆ—ã¯**äºˆæ¸¬ï¼ˆãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆï¼‰ã¨å®Ÿç¸¾ã®ä¸¡æ–¹**ã‚’æ‰±ã†ï¼š
- æœªæ¥æ—¥ä»˜ = ä»®å¼•å½“/äºˆå®šï¼ˆç¾åœ¨ã® `AllocationSuggestion` ã§å¯¾å¿œï¼‰
- éå»æ—¥ä»˜ = ç¢ºå®š/å®Ÿç¸¾ï¼ˆå‡ºè·æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ï¼‰
- æ—¥ä»˜ãŒéããŸã‚‰è‡ªå‹•çš„ã«ç¢ºå®šæ‰±ã„

**ç¢ºèªäº‹é …:**
1. æ—¥ä»˜ãŒéããŸè¡Œã‚’ã©ã®ã‚ˆã†ã«æ‰±ã†ã‹ï¼ˆè‡ªå‹•ç¢ºå®šï¼Ÿæ‰‹å‹•ç¢ºå®šï¼Ÿï¼‰
2. å®Ÿç¸¾ãƒ‡ãƒ¼ã‚¿ã®ã‚½ãƒ¼ã‚¹ï¼ˆå‡ºè·å±¥æ­´ï¼Ÿå¼•å½“ç¢ºå®šï¼Ÿï¼‰
3. äºˆæ¸¬ã¨å®Ÿç¸¾ã®è¡¨ç¤ºä¸Šã®åŒºåˆ¥ï¼ˆè‰²åˆ†ã‘ç­‰ï¼‰

---

### 10-8. åŒä¸€ãƒ­ãƒƒãƒˆãƒ»å…¥è·æ—¥åˆ¥ã®è¡Œè¡¨ç¤º

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-26
**çŠ¶æ…‹**: è¨­è¨ˆç¢ºèªæ¸ˆã¿ âœ…

**èƒŒæ™¯:**
å®Ÿé‹ç”¨ã§ã¯**åŒã˜ãƒ­ãƒƒãƒˆç•ªå·ã§ã‚‚å…¥è·æ—¥ãŒé•ãˆã°åˆ¥è¡Œã¨ã—ã¦æ‰±ã†**ã€‚
ä¾‹ï¼šãƒ­ãƒƒãƒˆ `CE880104` â†’ å…¥è·æ—¥ `2025/11/12` ã¨ `2025/11/19` ã¯åˆ¥è¡Œ

**ç¢ºèªçµæœï¼ˆ2026-01-26ï¼‰:**
- `LotReceipt` ã®ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ã¯ `receipt_key`ï¼ˆUUIDï¼‰ã®ã¿
- `lot_number` ã«ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ãŒãªã„
- **åŒã˜ãƒ­ãƒƒãƒˆç•ªå·ã§ç•°ãªã‚‹ `received_date` ã®è¤‡æ•°ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆãŒå¯èƒ½** âœ…

**æ®‹ã‚¿ã‚¹ã‚¯:**
1. ã€Œæ—¢å­˜ãƒ­ãƒƒãƒˆã«è¿½åŠ å…¥åº«ã€UIã®ç”¨é€”ã‚’å†æ¤œè¨ï¼ˆã»ã¼ä½¿ã‚ãªã„ã¨ã®ã“ã¨ï¼‰
2. Excelãƒ“ãƒ¥ãƒ¼ã§åŒä¸€ãƒ­ãƒƒãƒˆç•ªå·ãƒ»åˆ¥å…¥è·æ—¥ã‚’æ­£ã—ãè¡¨ç¤ºã§ãã‚‹ã‹ç¢ºèª

**é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«:**
- `backend/app/infrastructure/persistence/models/lot_receipt_models.py`
- `backend/app/infrastructure/persistence/models/lot_master_model.py`

---


## å‚è€ƒæƒ…å ±

### çµ±åˆå…ƒãƒ•ã‚¡ã‚¤ãƒ«

æœ¬ãƒãƒƒã‚¯ãƒ­ã‚°ã¯ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’çµ±åˆã—ãŸã‚‚ã®ã§ã™:

1. `docs/project/plans/backlog/TODO.md` (2026-01-10)
2. `docs/project/plans/backlog/backlog.md` (2026-01-18)
3. `docs/project/plans/backlog/BUSINESS_CONTEXT_NEEDED.md` (2025-12-27)
4. `docs/project/plans/backlog/FUTURE_IMPROVEMENTS.md` (æ—¥ä»˜ãªã—)
5. `docs/project/plans/backlog/MASTER_DATA_FIELD_ALIGNMENT_TASKS.md` (2026-01-19)
6. `docs/project/plans/backlog/any-type-reduction.md` (2026-01-18)
7. `docs/project/plans/backlog/next_reviews_ja.md` (æ—¥ä»˜ãªã—)
8. `docs/project/plans/backlog/smartread-cache-db-save-inconsistency.md` (2026-01-21)
9. `docs/project/plans/backlog/smartread-logging-gaps.md` (2026-01-21)

çµ±åˆå¾Œã®ãƒãƒƒã‚¯ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `docs/project/BACKLOG.md` ã«é…ç½®ã•ã‚Œã¦ã„ã¾ã™ã€‚
å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `docs/archive/backlog/` ã«ä¿ç®¡ã•ã‚Œã¦ã„ã¾ã™ã€‚

### 5-3. Playwright E2Eãƒ†ã‚¹ãƒˆ DBãƒªã‚»ãƒƒãƒˆå¤±æ•— (500 Error)

**å„ªå…ˆåº¦**: High
**ä½œæˆ**: 2026-02-01
**ã‚«ãƒ†ã‚´ãƒª**: ãƒ†ã‚¹ãƒˆç’°å¢ƒãƒ»CI

**èƒŒæ™¯ãƒ»èª²é¡Œ:**
Playwrightã«ã‚ˆã‚‹E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã€`beforeAll` ãƒ•ãƒƒã‚¯ã§å‘¼ã³å‡ºã•ã‚Œã‚‹ `/api/admin/reset-database` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒ `500 Internal Server Error` ã§å¤±æ•—ã™ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šå¾Œç¶šã®ãƒ†ã‚¹ãƒˆãŒå…¨ã¦å¤±æ•—ã™ã‚‹ã€‚

**ç—‡çŠ¶:**
- `curl` ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚‹æ‰‹å‹•å®Ÿè¡Œã¯ **æˆåŠŸ (200 OK)** ã™ã‚‹ã€‚
- Playwrightãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ã‹ã‚‰ã®å®Ÿè¡Œæ™‚ã®ã¿ **å¤±æ•— (500 Error)** ã™ã‚‹ã€‚
- ã‚¨ãƒ©ãƒ¼å†…å®¹ã¯ `psycopg2.errors.LockNotAvailable` ã§ã‚ã£ãŸãŒã€å¯¾ç­–å¾Œã‚‚500ã‚¨ãƒ©ãƒ¼ãŒç¶™ç¶šï¼ˆè©³ç´°ãƒ­ã‚°ã¯ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ãŒå‡ºåŠ›ï¼‰ã€‚

**å®Ÿæ–½æ¸ˆã¿ã®å¯¾å¿œ:**
1. **DBãƒ­ãƒƒã‚¯ç«¶åˆå¯¾ç­–**: `truncate_all_tables` ã« `pg_terminate_backend` ã‚’ä½¿ç”¨ã—ãŸä»–ã‚»ãƒƒã‚·ãƒ§ãƒ³å¼·åˆ¶åˆ‡æ–­å‡¦ç†ã‚’è¿½åŠ ï¼ˆ`backend/app/core/database.py`ï¼‰ã€‚
2. **ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªå‹•ä½œæˆ**: DBãƒªã‚»ãƒƒãƒˆæ™‚ã«ç®¡ç†è€…ã ã‘ã§ãªãä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼(`user`)ã‚‚ä½œæˆã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ï¼ˆ`backend/app/presentation/api/routes/admin/admin_router.py`ï¼‰ã€‚
3. **ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ä¿®æ­£**: `e2e-04-permission.spec.ts` ã§ `resetDatabase` ã¨ `generateTestData` ã‚’å‘¼ã¶ã‚ˆã†ã«ä¿®æ­£ã€‚

**æ®‹èª²é¡Œ:**
- Playwrightç’°å¢ƒç‰¹æœ‰ã®æ¥ç¶šå‡¦ç†ãªã©ãŒåŸå› ã§ã€ä¾ç„¶ã¨ã—ã¦ãƒªã‚»ãƒƒãƒˆå‡¦ç†ãŒå¤±æ•—ã—ã¦ã„ã‚‹ã€‚
- ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ã®DBæ¥ç¶šè¨­å®šã€å¾…æ©Ÿæ™‚é–“ã€ãƒ‰ãƒ©ã‚¤ãƒã®æŒ™å‹•ãªã©ã®èª¿æŸ»ãŒå¿…è¦ã€‚

---

### æ›´æ–°å±¥æ­´

- 2026-01-24: 9ãƒ•ã‚¡ã‚¤ãƒ«ã‚’çµ±åˆã—ã€å˜ä¸€ãƒãƒƒã‚¯ãƒ­ã‚°ã¨ã—ã¦æ•´ç†
- 2026-01-26: ã‚¯ã‚¤ãƒƒã‚¯ã‚¦ã‚£ãƒ³4ä»¶å¯¾å¿œ (1-4, 2-2, 2-4, 8-9)
- 2026-01-26: Excelãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã‚¿ã‚¹ã‚¯è¿½åŠ  (ã‚»ã‚¯ã‚·ãƒ§ãƒ³10)ã€ä»•å…¥å…ˆè¡¨ç¤ºãƒ»forecast_periodè¡¨ç¤ºä¿®æ­£å®Œäº†
- 2026-02-01: ãƒ­ãƒƒãƒˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ™‚ã® 401 Unauthorized ã‚¨ãƒ©ãƒ¼ã®ä¿®æ­£ã€èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯ã®çµ±åˆã‚’å®Œäº†
