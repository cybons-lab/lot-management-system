# ã‚¿ã‚¹ã‚¯ãƒãƒƒã‚¯ãƒ­ã‚° (çµ±åˆç‰ˆ)

**æœ€çµ‚æ›´æ–°:** 2026-01-26

---

## æ¦‚è¦

æœ¬ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€æœªå®Œäº†ã®ã‚¿ã‚¹ã‚¯ãƒ»èª¿æŸ»äº‹é …ãƒ»å°†æ¥æ”¹å–„é …ç›®ã‚’é›†ç´„ã—ãŸãƒãƒƒã‚¯ãƒ­ã‚°ã§ã™ã€‚å®Œäº†æ¸ˆã¿ã®ã‚¿ã‚¹ã‚¯ã¯åˆ¥é€”æ®‹ã•ãšã€æœ¬ãƒãƒƒã‚¯ãƒ­ã‚°ã«æœ€æ–°ã®çŠ¶æ…‹ã®ã¿ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

---

## 1. å„ªå…ˆåº¦: é«˜ (å³æ™‚å¯¾å¿œ)

### 1-1. å…¥åº«å±¥æ­´ãŒè¡¨ç¤ºã•ã‚Œãªã„å•é¡Œï¼ˆèª¿æŸ»æ¸ˆã¿ï¼‰

**ç—‡çŠ¶:** å…¥åº«å±¥æ­´ã‚¿ãƒ–ã§ã€Œå…¥åº«å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã€‚
**åŸå› :** `lot_service.create_lot()` ã§ `StockHistory` ã® INBOUND ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒä½œæˆã•ã‚Œã¦ã„ãªã„ã€‚
**å½±éŸ¿:** ç”»é¢ã‹ã‚‰ã®ãƒ­ãƒƒãƒˆæ–°è¦ç™»éŒ²ãƒ»APIçµŒç”±ã®ãƒ­ãƒƒãƒˆä½œæˆã§å…¥åº«å±¥æ­´ãŒæ¬ è½ã™ã‚‹ã€‚

**æ¨å¥¨å¯¾å¿œ:**
1. `lot_service.create_lot()` ã« INBOUND ã® `StockHistory` ç”Ÿæˆã‚’è¿½åŠ 
2. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ç”¨ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”¨æ„
3. å…¥åº«å±¥æ­´ç”»é¢ã§å†ç¢ºèª

**é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«:**
- `backend/app/application/services/inventory/lot_service.py`
- `backend/app/application/services/inventory/intake_history_service.py`

**å…ƒ:** `TODO.md` (2026-01-10) & `backlog.md::1-1` (2026-01-18)

---

### 1-2. æœªå®Ÿè£… API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

ä»¥ä¸‹ã®POSTã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ï¼ˆ`tests/error_scenarios/`ï¼‰ã«è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ãŒã€ã¾ã å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

**å„ªå…ˆåº¦: ä¸­**

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ | é–¢é€£ãƒ†ã‚¹ãƒˆ |
|---------------|------|-----------|
| `POST /api/roles/` | ãƒ­ãƒ¼ãƒ«ä½œæˆAPI | `test_constraints.py::test_duplicate_role_code` |
| `POST /api/orders/` | å—æ³¨ä½œæˆAPI | `test_validation_errors.py::test_create_order_validation_error` |
| `POST /api/inbound-plans/` | å…¥è·è¨ˆç”»ä½œæˆAPI | `test_validation_errors.py::test_create_inbound_plan_validation_error` |
| `POST /api/adjustments/` | åœ¨åº«èª¿æ•´ä½œæˆAPI | `test_validation_errors.py::test_create_adjustment_validation_error` |

> **Note**: ã“ã‚Œã‚‰ã®ãƒ†ã‚¹ãƒˆã¯ç¾åœ¨ `@pytest.mark.skip` ã§ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã¦ã„ã¾ã™ã€‚
> å®Ÿè£…å®Œäº†å¾Œã€ã‚¹ã‚­ãƒƒãƒ—ãƒãƒ¼ã‚«ãƒ¼ã‚’å‰Šé™¤ã—ã¦ãƒ†ã‚¹ãƒˆã‚’æœ‰åŠ¹åŒ–ã—ã¦ãã ã•ã„ã€‚

**å…ƒ:** `TODO.md` (2026-01-10)

---

### 1-3. åœ¨åº«è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®å³å¯†åŒ–ã¨SSOTå›ºå®š

**å„ªå…ˆåº¦**: High
**é›£æ˜“åº¦**: Medium
**æƒ³å®šå·¥æ•°**: 2-3æ—¥

**èƒŒæ™¯ãƒ»èª²é¡Œ:**
- ãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ï¼ˆä»®äºˆç´„Activeã¯åœ¨åº«ã‚’æ¸›ã‚‰ã•ãªã„ï¼‰ã¨ã€ç¾åœ¨ã®ãƒ“ãƒ¥ãƒ¼/ã‚µãƒ¼ãƒ“ã‚¹è¨ˆç®—ã«ä¸€éƒ¨ä¹–é›¢ã‚„äºŒé‡æ§é™¤ã®ãƒªã‚¹ã‚¯ãŒæŒ‡æ‘˜ã•ã‚Œã¦ã„ã‚‹ã€‚
- ã€Œåˆ©ç”¨å¯èƒ½åœ¨åº«ã€ã®çœŸã®æƒ…å ±æºï¼ˆSSOTï¼‰ã‚’1ç®‡æ‰€ã«å›ºå®šã—ã€ä¸æ•´åˆã‚’æ’é™¤ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
1. `allocated_quantity` ã®å®šç¾©ã‚’ `confirmed_only` ã«çµ±ä¸€ã—ã€Activeã¯ `reserved_quantity_active` ç­‰ã§åˆ†é›¢è¡¨ç¤ºã™ã‚‹ã€‚
2. ãƒ­ãƒƒã‚¯æ•°é‡ã®äºŒé‡æ§é™¤ï¼ˆãƒ“ãƒ¥ãƒ¼ã§æ¸›ç®—æ¸ˆã¿ã‹ã¤è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã§ã‚‚æ¸›ç®—ï¼‰ã®ãƒªã‚¹ã‚¯ã‚’è§£æ¶ˆã€‚
3. UIä¸Šã®èª¬æ˜ï¼ˆãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ç­‰ï¼‰ã¨å®Ÿè¨ˆç®—å¼ã‚’å®Œå…¨ã«ä¸€è‡´ã•ã›ã‚‹ã€‚

**å…ƒ:** `FUTURE_IMPROVEMENTS.md`

---

## 2. å„ªå…ˆåº¦: ä¸­ (UI/UXãƒ»ä¸æ•´åˆä¿®æ­£)

### 2-1. InboundPlansList ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ãŒå‹•ã‹ãªã„

- `sortable: true` ãªã®ã« `DataTable` ã¸ `sort` / `onSortChange` ã‚’æ¸¡ã—ã¦ã„ãªã„ã€‚
- å¯¾è±¡: `frontend/src/features/inbound-plans/components/InboundPlansList.tsx`

**å…ƒ:** `backlog.md::2-1` (2026-01-18)

---

### 2-2. ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã®æ¬ å¦‚

- `AdjustmentsListPage`, `WithdrawalsListPage` ã«ãƒªã‚»ãƒƒãƒˆæ“ä½œãŒãªã„ã€‚
- å¯¾è±¡:
  - `frontend/src/features/adjustments/pages/AdjustmentsListPage.tsx`
  - `frontend/src/features/withdrawals/pages/WithdrawalsListPage.tsx`

**å…ƒ:** `backlog.md::2-3` (2026-01-18)

---

### 2-3. Toasté€šçŸ¥ã®ä¸è¶³

- ä¿å­˜æˆåŠŸæ™‚ã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒå‡ºãªã„ã€‚
- å¯¾è±¡:
  - `frontend/src/features/warehouses/hooks/useWarehouseMutations.ts`
  - `frontend/src/features/product-mappings/hooks/useProductMappings.ts`
  - `frontend/src/features/delivery-places/hooks/useDeliveryPlaces.ts`

**å…ƒ:** `backlog.md::2-5` (2026-01-18)

---

### 2-6. ProductDetailPage ã®ã‚³ãƒ¼ãƒ‰å¤‰æ›´å¾Œãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

- å•†å“ã‚³ãƒ¼ãƒ‰å¤‰æ›´æ™‚ã«URLãŒæ›´æ–°ã•ã‚Œãšè¡¨ç¤ºãŒæ®‹ã‚‹ã€‚
- å¯¾è±¡: `frontend/src/features/products/pages/ProductDetailPage.tsx`

**å…ƒ:** `backlog.md::2-6` (2026-01-18)

---

### 2-7. ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ¸ˆã¿ãƒ­ãƒƒãƒˆã®è¡¨ç¤ºãƒã‚°

**ç—‡çŠ¶**: åœ¨åº«ãƒ­ãƒƒãƒˆä¸€è¦§ã§ã€Œã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ¸ˆã¿ã‚’è¡¨ç¤ºã€ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ã‚‚ã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ¸ˆã¿ãƒ­ãƒƒãƒˆãŒè¡¨ç¤ºã•ã‚Œãªã„ï¼ˆã¾ãŸã¯æœŸå¾…é€šã‚Šã«æ©Ÿèƒ½ã—ãªã„ï¼‰ã€‚
**ã‚¿ã‚¹ã‚¯**: ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰/ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰ã®èª¿æŸ»ã¨ä¿®æ­£ã€‚

**é–¢é€£:** `next_reviews_ja.md::2`

**å…ƒ:** `backlog.md::8-2` (2026-01-18) & `next_reviews_ja.md` (æ—¥ä»˜ãªã—)

---

### 2-8. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: React Keyé‡è¤‡ã‚¨ãƒ©ãƒ¼ï¼ˆ"Encountered two children with the same key"ï¼‰ãªã©ãŒã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹ã€‚
**ã‚¿ã‚¹ã‚¯**: ãƒªã‚¹ãƒˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã®keyç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ä¿®æ­£ã€‚

**å…ƒ:** `backlog.md::8-3` (2026-01-18)

---

### 2-9. åœ¨åº«è©³ç´°ã®ä»•å…¥å…ˆå›ºå®š

**è¦æœ›**: åœ¨åº«è©³ç´°ç”»é¢ã«ãŠã„ã¦ã€ä»•å…¥å…ˆãŒå›ºå®šï¼ˆã¾ãŸã¯æ˜ç¢ºåŒ–ï¼‰ã•ã‚Œã‚‹ã¹ãã€‚
**ã‚¿ã‚¹ã‚¯**: è£½å“Ã—å€‰åº«ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ãŠã‘ã‚‹ä»•å…¥å…ˆç‰¹å®šãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…ã¨UIåæ˜ ã€‚

**å…ƒ:** `backlog.md::8-4` (2026-01-18)

---

### 2-10. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: Chart Event Handlersã«é©åˆ‡ãªå‹ã‚’å®šç¾©

**å„ªå…ˆåº¦**: Medium (anyå‹å‰Šæ¸› Phase 1)
**å¯¾è±¡**: 4ç®‡æ‰€

**å ´æ‰€**:
- `features/dashboard/components/WarehouseDistributionChart.tsx`
- `features/dashboard/components/TopProductsChart.tsx`

**ç¾çŠ¶:**
```typescript
const handlePieClick = (data: any) => {
  if (data && data.id) {
    navigate(`/inventory?warehouse_id=${data.id}`);
  }
}
```

**å¯¾å¿œ:**
```typescript
interface PieClickData {
  id?: number;
  payload?: {
    id?: number;
  };
}

const handlePieClick = (data: PieClickData) => {
  const warehouseId = data?.id ?? data?.payload?.id;
  if (warehouseId) {
    navigate(`/inventory?warehouse_id=${warehouseId}`);
  }
}
```

**å…ƒ:** `any-type-reduction.md` (2026-01-18)

---

### 2-11. ãƒ‡ãƒ¼ã‚¿å†èª­ã¿è¾¼ã¿ãƒœã‚¿ãƒ³ã®å…±é€šåŒ–

**å„ªå…ˆåº¦**: Medium
**é›£æ˜“åº¦**: Low
**æƒ³å®šå·¥æ•°**: 0.5-1æ—¥

**èƒŒæ™¯:**
ç¾åœ¨ã€OCRçµæœãƒšãƒ¼ã‚¸ã«ã¯æ‰‹å‹•ã§ãƒ‡ãƒ¼ã‚¿ã‚’å†èª­ã¿è¾¼ã¿ã™ã‚‹ãƒœã‚¿ãƒ³ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ï¼ˆ2026-01-23å®Ÿè£…ï¼‰ã€‚ã—ã‹ã—ã€ä»–ã®ãƒ‡ãƒ¼ã‚¿ä¸€è¦§ãƒšãƒ¼ã‚¸ï¼ˆå‡ºè·ç”¨ãƒã‚¹ã‚¿ã€åœ¨åº«ä¸€è¦§ã€å—æ³¨ä¸€è¦§ãªã©ï¼‰ã«ã¯åŒæ§˜ã®æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒF5ã‚­ãƒ¼ã§ãƒšãƒ¼ã‚¸å…¨ä½“ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®å•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ï¼š
- ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ãŒå¤±ã‚ã‚Œã‚‹å¯èƒ½æ€§
- ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›å†…å®¹ãŒæ¶ˆãˆã‚‹
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®å†åˆæœŸåŒ–ãŒç™ºç”Ÿï¼ˆä¸è¦ãªãƒªã‚½ãƒ¼ã‚¹æ¶ˆè²»ï¼‰

**ææ¡ˆ:** å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ `RefreshButton` ã‚’ä½œæˆã—ã€å…¨ä¸»è¦ãƒšãƒ¼ã‚¸ã«é…ç½®ã€‚

**å¯¾è±¡ãƒšãƒ¼ã‚¸:**
1. âœ… OCRçµæœãƒšãƒ¼ã‚¸ (`OcrResultsListPage.tsx`)
2. âŒ å‡ºè·ç”¨ãƒã‚¹ã‚¿ãƒšãƒ¼ã‚¸ (`ShippingMasterListPage.tsx`)
3. âŒ åœ¨åº«ä¸€è¦§ãƒšãƒ¼ã‚¸ (`InventoryListPage.tsx`)
4. âŒ å—æ³¨ä¸€è¦§ãƒšãƒ¼ã‚¸ (`OrdersListPage.tsx`)
5. âŒ ãƒ­ãƒƒãƒˆä¸€è¦§ãƒšãƒ¼ã‚¸ (`LotsListPage.tsx`)
6. âŒ ä»•å…¥å…ˆãƒã‚¹ã‚¿ãƒšãƒ¼ã‚¸ (`SuppliersListPage.tsx`)
7. âŒ å¾—æ„å…ˆãƒã‚¹ã‚¿ãƒšãƒ¼ã‚¸ (`CustomersListPage.tsx`)
8. âŒ SAPçµ±åˆãƒšãƒ¼ã‚¸ (`DataFetchTab.tsx`)
9. âŒ ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆãƒšãƒ¼ã‚¸ (`ForecastPage.tsx`)

**å…ƒ:** `FUTURE_IMPROVEMENTS.md`

---

### 2-12. åœ¨åº«ä¸€è¦§ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®ã€Œç·ä»¶æ•°ã€å¯¾å¿œ

**ç¾çŠ¶**: APIãŒç·ä»¶æ•°ï¼ˆtotal countï¼‰ã‚’è¿”ã•ãªã„ãŸã‚ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã¯ã€Œç¾åœ¨ã®ãƒšãƒ¼ã‚¸ç•ªå·ã€ã¨ã€Œç¾åœ¨ã®è¡¨ç¤ºä»¶æ•°ã€ã®ã¿ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ï¼ˆä¾‹: ã€Œãƒšãƒ¼ã‚¸ 1 (è¡¨ç¤ºä»¶æ•°: 20)ã€ï¼‰ã€‚

**èª²é¡Œ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦å…¨ä½“ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ãŒæŠŠæ¡ã—ã¥ã‚‰ã„çŠ¶æ…‹ã§ã™ã€‚

**ã‚¿ã‚¹ã‚¯:**
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API (`/api/v2/inventory/`) ãŒç·ä»¶æ•°ã‚’è¿”ã™ã‚ˆã†ã«ä¿®æ­£ã§ãã‚‹ã‹èª¿æŸ»ã™ã‚‹ã€‚
- ä¿®æ­£å¯èƒ½ãªå ´åˆã€APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã« `total` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã—ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ç·ãƒšãƒ¼ã‚¸æ•°ã‚’è¨ˆç®—ãƒ»è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

**å…ƒ:** `next_reviews_ja.md::1`

---

### 2-13. åœ¨åº«ç®¡ç†ãƒˆãƒƒãƒ—ã®ãƒ•ã‚£ãƒ«ã‚¿ä»•æ§˜ã®èª¿æŸ»ãƒ»æ”¹å–„

**ç¾çŠ¶**: ãƒ•ã‚£ãƒ«ã‚¿ã®æŒ™å‹•ãŒç›´æ„Ÿçš„ã§ãªã„ã¨ã®æŒ‡æ‘˜ãŒã‚ã‚Šã¾ã™ã€‚
- ã€Œè£½å“ã€ã‚’é¸æŠã—ãŸå¾Œã«ã€Œä»•å…¥å…ˆã€ã‚’å¤‰æ›´ã™ã‚‹ã¨ã€ãƒªã‚¹ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãŒæ¶ˆãˆã‚‹ï¼ˆANDæ¤œç´¢ãŒãã¤ã™ãã‚‹ã€ã¾ãŸã¯é€£å‹•ã—ã¦ã„ãªã„ç­‰ï¼‰ã€‚
- å€‰åº«ãƒ•ã‚£ãƒ«ã‚¿ãŒä»–ã¨é€£å‹•ã—ã¦ã„ãªã„ã€‚

**ã‚¿ã‚¹ã‚¯:**
- ç¾åœ¨ã®ãƒ•ã‚£ãƒ«ã‚¿å®Ÿè£…ï¼ˆ`useInventoryPageState` ã‚„ `useFilterOptions`ï¼‰ã®ä¾å­˜é–¢ä¿‚ã¨çµã‚Šè¾¼ã¿ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ•´ç†ã™ã‚‹ã€‚
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæœŸå¾…ã™ã‚‹æŒ™å‹•ï¼ˆä¾‹: é¸æŠå¯èƒ½ãªé¸æŠè‚¢ã®ã¿ã‚’è¡¨ç¤ºã™ã‚‹å‹•çš„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€ã‚ã‚‹ã„ã¯ORæ¤œç´¢ã®å°å…¥ãªã©ï¼‰ã‚’æ˜ç¢ºã«ã—ã€å®Ÿè£…æ¡ˆã‚’ç­–å®šã™ã‚‹ã€‚

**å…ƒ:** `next_reviews_ja.md::3`

---

## 3. DB/UIæ•´åˆæ€§ãƒ»ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºæ”¹å–„

### 3-1. Lots ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç³»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒUIæœªè¡¨ç¤º

- `status`, `inspection_status`, `inspection_date`, `inspection_cert_number`, `origin_reference`
- å¯¾è±¡: åœ¨åº«ä¸€è¦§ãƒ»ãƒ­ãƒƒãƒˆè©³ç´°ã®è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**å…ƒ:** `backlog.md::3-1` (2026-01-18)

---

### 3-2. Orders ã®ä¸€éƒ¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒUIæœªè¡¨ç¤º

- `ocr_source_filename`, `cancel_reason`, `external_product_code`, `shipping_document_text`
- å¯¾è±¡: å—æ³¨è©³ç´°ç”»é¢

**å…ƒ:** `backlog.md::3-2` (2026-01-18)

---

### 3-3. å¤§é‡ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã®å®Œå…¨å¯¾å¿œ (ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³)

**å„ªå…ˆåº¦**: High
**é›£æ˜“åº¦**: Medium
**æƒ³å®šå·¥æ•°**: 2-3æ—¥

**èƒŒæ™¯ãƒ»èª²é¡Œ:**
- ä¸€éƒ¨ã®APIï¼ˆãƒ­ãƒƒãƒˆå–å¾—ç­‰ï¼‰ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® `limit: 100` ãŒã‚ã‚Šã€ãƒšãƒ¼ã‚¸ãƒ³ã‚°ãŒãªã„ãŸã‚å¤§é‡ãƒ‡ãƒ¼ã‚¿æ™‚ã«æ¬ è½ãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã€‚
- å…¨ä»¶å–å¾—ã—ã¦ã‹ã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§çµã‚Šè¾¼ã‚€å®Ÿè£…ã‚’å»ƒæ­¢ã—ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ»ãƒ¡ãƒ¢ãƒªè² è·ã‚’è»½æ¸›ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
1. ãƒ­ãƒƒãƒˆä¸€è¦§ãŠã‚ˆã³åœ¨åº«ä¸€è¦§APIã¸ã®å®Œå…¨ãªã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å°å…¥ã€‚
2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã®ç„¡é™ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã¾ãŸã¯ãƒãƒ¼ãƒãƒ£ãƒ«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œã€‚

**å…ƒ:** `FUTURE_IMPROVEMENTS.md`

---

## 4. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£/å“è³ªæ”¹å–„

### 4-1. useQuery ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†è¿½åŠ ï¼ˆPhase 2ï¼‰

- `AllocationDialog.tsx`, `ForecastsTab.tsx`, `InboundPlansTab.tsx`, `WithdrawalCalendar.tsx` ãªã©ã€‚

**å…ƒ:** `backlog.md::4-1` (2026-01-18)

---

### 4-2. æ—¥ä»˜ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®çµ±åˆ

- `shared/utils/date.ts`, `shared/libs/utils/date.ts`, `features/forecasts/.../date-utils.ts` ã®é‡è¤‡æ•´ç†ã€‚

**å…ƒ:** `backlog.md::4-2` (2026-01-18)

---

### 4-3. å‰Šé™¤ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®çµ±åˆ

- `SoftDeleteDialog`, `PermanentDeleteDialog`, `BulkSoftDeleteDialog`, `BulkPermanentDeleteDialog` ã‚’çµ±åˆã€‚

**å…ƒ:** `backlog.md::4-3` (2026-01-18)

---

### 4-4. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: Soft Delete Utilsã«ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å°å…¥

**å„ªå…ˆåº¦**: Medium (anyå‹å‰Šæ¸› Phase 2)
**å¯¾è±¡**: 17ç®‡æ‰€

**å ´æ‰€**: `app/application/services/common/soft_delete_utils.py`

**ç¾çŠ¶:**
```python
def get_product_name(product: Any, default: str = "") -> str:
    """è£½å“åã‚’å®‰å…¨ã«å–å¾— (è«–ç†å‰Šé™¤å¯¾å¿œ)"""
    if product is None:
        return default
    return getattr(product, "product_name", default)
```

**å¯¾å¿œ:**
```python
from typing import Protocol, Optional

class HasProductName(Protocol):
    product_name: str

def get_product_name(product: Optional[HasProductName], default: str = "") -> str:
    """è£½å“åã‚’å®‰å…¨ã«å–å¾— (è«–ç†å‰Šé™¤å¯¾å¿œ)"""
    if product is None:
        return default
    return product.product_name
```

**å…ƒ:** `any-type-reduction.md` (2026-01-18)

---

### 4-5. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: Zod Resolverã®å‹å•é¡Œã‚’è§£æ±º

**å„ªå…ˆåº¦**: Medium (anyå‹å‰Šæ¸› Phase 2)
**å¯¾è±¡**: 6ç®‡æ‰€

**å ´æ‰€**:
- `features/warehouses/components/WarehouseForm.tsx`
- `features/rpa/smartread/components/SmartReadSettingsModal.tsx`
- `features/uom-conversions/components/UomConversionForm.tsx`
- `features/warehouse-delivery-routes/components/WarehouseDeliveryRouteForm.tsx`
- `features/product-mappings/components/ProductMappingForm.tsx`
- `features/delivery-places/components/DeliveryPlaceForm.tsx`

**ç¾çŠ¶:**
```typescript
resolver: zodResolver(warehouseFormSchema) as any, // eslint-disable-line @typescript-eslint/no-explicit-any
```

**å¯¾å¿œ:**
```typescript
// Before
resolver: zodResolver(schema) as any,

// After
resolver: zodResolver(schema) as Resolver<WarehouseFormData>,
```

**å…ƒ:** `any-type-reduction.md` (2026-01-18)

---

## 5. ãƒ†ã‚¹ãƒˆãƒ»è‡ªå‹•åŒ–

### 5-1. ãƒ†ã‚¹ãƒˆåŸºç›¤æ‹¡å¼µï¼ˆä½å„ªå…ˆåº¦ï¼‰

- **C3: Data Factory (Backend) æ‹¡å¼µ**: `factory_boy` ç­‰ã‚’ä½¿ç”¨ã—ãŸãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ•ã‚¡ã‚¯ãƒˆãƒªã®æ•´å‚™ã€‚ç¾åœ¨ã¯ `services/test_data_generator.py` ã§ä»£ç”¨ä¸­ã€‚
- **C4: Test Matrix å®šç¾©**: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®çµ„ã¿åˆã‚ã›è¡¨ï¼ˆãƒãƒˆãƒªã‚¯ã‚¹ï¼‰ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã¨ç®¡ç†ã€‚
- **Phase D: APIçµ±åˆãƒ†ã‚¹ãƒˆæ‹¡å¼µ**: ä»¥ä¸‹ã®è¦³ç‚¹ã§ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰çµ±åˆãƒ†ã‚¹ãƒˆæ‹¡å……ã€‚
  - ä¸»è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£CRUDï¼ˆæ­£å¸¸ç³»/ç•°å¸¸ç³»ï¼‰
  - ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒ†ã‚¹ãƒˆï¼ˆãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•Œãªã©ï¼‰
  - æ¨©é™ãƒ†ã‚¹ãƒˆï¼ˆRBACã®å¾¹åº•ç¢ºèªï¼‰

**å…ƒ:** `backlog.md::5-1` (2026-01-18)

---

### 5-2. ãƒ†ã‚¹ãƒˆDBã§Alembic Migrationsã‚’å®Ÿè¡Œ

**å„ªå…ˆåº¦**: Medium
**é›£æ˜“åº¦**: Medium
**æƒ³å®šå·¥æ•°**: 2-3æ—¥

**èƒŒæ™¯:**
ç¾åœ¨ã€ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã¯ `Base.metadata.create_all()` ã§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¦ã„ã‚‹ãŸã‚ã€æœ¬ç•ªç’°å¢ƒï¼ˆAlembic Migrationsä½¿ç”¨ï¼‰ã¨ä»¥ä¸‹ã®å·®ç•°ãŒç™ºç”Ÿã—ã¾ã™ï¼š

1. **server_defaultå€¤ã®é•ã„**
   - ä¾‹: `consumed_quantity` ã‚«ãƒ©ãƒ ã¯ã€ãƒ¢ãƒ‡ãƒ«å®šç¾©ã§ã¯ `server_default=text("0")` ã ãŒã€Migrationã§ã¯ `server_default=None`
2. **Database Triggersã®æœªé©ç”¨**
3. **Constraintsã®é•ã„**
4. **Migrationè‡ªä½“ã®ãƒã‚°æ¤œå‡ºä¸å¯**

**å•é¡Œç‚¹ (2026-01-18æ™‚ç‚¹):**
- ç¾åœ¨70+ migrationsãŒå­˜åœ¨ã—ã€å¤šæ•°ã®mergepoint/branchpointãŒã‚ã‚‹
- ä¾å­˜é–¢ä¿‚ãŒè¤‡é›‘ã§ã€ãƒ†ãƒ¼ãƒ–ãƒ«ãŒæ­£ã—ã„é †åºã§ä½œæˆã•ã‚Œãªã„

**å®Ÿè£…ã‚¿ã‚¤ãƒŸãƒ³ã‚°:**
ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®æ¡ä»¶ã‚’æº€ãŸã—ãŸæ™‚ç‚¹ã§å®Ÿè£…ï¼š
1. Migrationã®çµ±åˆãƒ»æ•´ç†ãŒå®Œäº†ï¼ˆ70+ â†’ 10-20å€‹ç¨‹åº¦ï¼‰
2. ã‚¹ã‚­ãƒ¼ãƒã®å¤§å¹…å¤‰æ›´æ™‚
3. Migrationé–¢é€£ã®ãƒã‚°ãŒé »ç™º

**æš«å®šå¯¾ç­–ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰:**
1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã§ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤è¨­å®š
2. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ä¿®æ­£
3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–

**å…ƒ:** `FUTURE_IMPROVEMENTS.md`

---

### 5-3. Phase 3: ä½“ç³»çš„ãªãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ä½œæˆ

**å„ªå…ˆåº¦**: High
**é›£æ˜“åº¦**: Medium
**æƒ³å®šå·¥æ•°**: 3-5æ—¥

**èƒŒæ™¯:**
Phase 0ã€œ2ã®å®Ÿè£…ã«ã‚ˆã‚Šã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŠã‚ˆã³ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ä¸»è¦æ©Ÿèƒ½ã¯å®Œæˆã—ã¾ã—ãŸãŒã€ã“ã‚Œã¾ã§ãƒ†ã‚¹ãƒˆã¨æ¤œè¨¼ã¯ä¸»ã«æ‰‹å‹•ã§è¡Œã‚ã‚Œã¦ãã¾ã—ãŸã€‚ä»Šå¾Œã®æ”¹ä¿®æ™‚ã«ãƒ‡ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼ˆå…ˆç¥–è¿”ã‚Šï¼‰ã‚’é˜²ãã€å“è³ªã‚’ç¶­æŒã™ã‚‹ãŸã‚ã«ã€ä½“ç³»çš„ãªãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®è¿½åŠ ãŒå¿…è¦ã§ã™ã€‚

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
1. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆã®å¼·åŒ–**
   - APIãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®è¿½åŠ 
   - è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒ­ãƒƒãƒˆå¼•ãå½“ã¦ã€ç´æœŸè¨ˆç®—ãªã©ï¼‰ã®å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆ
2. **E2Eãƒ†ã‚¹ãƒˆã®å®Ÿè£…**
   - Playwrightã¾ãŸã¯Cypressã‚’ä½¿ç”¨ã—ãŸä¸»è¦ã‚·ãƒŠãƒªã‚ªã®è‡ªå‹•åŒ–
   - OCRã‚¹ã‚­ãƒ£ãƒ³ã‹ã‚‰SAPé€£æºã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ç·¨é›†ã¾ã§ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ¤œè¨¼
3. **SAPé€£æº (#488) å¯¾å¿œç¯„å›²ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆ**
   - ç›´è¿‘ã®SAPé€£æºã§å¯¾å¿œã—ãŸAPIãŠã‚ˆã³ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ©Ÿèƒ½ã®ãŸã‚ã®ä½“ç³»çš„ãªãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æ•´å‚™ã™ã‚‹ã€‚
   - ç•°å¸¸ç³»ï¼ˆé€šä¿¡ã‚¨ãƒ©ãƒ¼ã€èªè¨¼ã‚¨ãƒ©ãƒ¼ãªã©ï¼‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¶²ç¾…ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ã€‚

**å…ƒ:** `FUTURE_IMPROVEMENTS.md`

---

### 5-4. Docker ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ä¾å­˜é–¢ä¿‚ä¿®æ­£

**å„ªå…ˆåº¦**: Medium
**é›£æ˜“åº¦**: Low
**æƒ³å®šå·¥æ•°**: 0.5æ—¥

**èƒŒæ™¯:**
`docker compose exec backend pytest` ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã«ã€å¿…è¦ãªä¾å­˜é–¢ä¿‚ï¼ˆ`fastapi`, `sqlalchemy`, `pydantic_settings`ç­‰ï¼‰ãŒè¦‹ã¤ã‹ã‚‰ãšImportErrorãŒç™ºç”Ÿã™ã‚‹ã€‚

**ç—‡çŠ¶:**
```
ImportError while loading conftest '/app/tests/conftest.py'.
tests/conftest.py:5: in <module>
    from fastapi.testclient import TestClient
E   ModuleNotFoundError: No module named 'fastapi'
```

**åŸå› ï¼ˆæ¨å®šï¼‰:**
- æœ¬ç•ªç”¨Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã«ãƒ†ã‚¹ãƒˆç”¨ä¾å­˜é–¢ä¿‚ãŒå«ã¾ã‚Œã¦ã„ãªã„
- `requirements-dev.txt`ã¾ãŸã¯`pyproject.toml`ã®`[dev]`ã‚°ãƒ«ãƒ¼ãƒ—ãŒã‚³ãƒ³ãƒ†ãƒŠãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„

**å¯¾å¿œæ¡ˆ:**
1. `Dockerfile`ã§ãƒ†ã‚¹ãƒˆä¾å­˜é–¢ä¿‚ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚ˆã†ã«ä¿®æ­£
2. ã¾ãŸã¯ã€ãƒ†ã‚¹ãƒˆå°‚ç”¨ã®Docker Compose serviceã‚’è¿½åŠ ï¼ˆ`backend-test`ç­‰ï¼‰
3. CI/CDã§ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•ã¨æ•´åˆã‚’å–ã‚‹

**ç™ºè¦‹æ—¥:** 2026-01-26
**å…ƒ:** customer_item_delivery_settings SSOTåŒ–PRãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚

---

### 5-5. E2Eãƒ†ã‚¹ãƒˆã®å¤±æ•—ä¿®æ­£ (19ä»¶)

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-26
**ç¾çŠ¶**: 61ãƒ†ã‚¹ãƒˆä¸­ 42 passed / 19 failed

**å¤±æ•—ã‚«ãƒ†ã‚´ãƒª:**

1. **ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã‚»ãƒ¬ã‚¯ã‚¿å•é¡Œ** (è¤‡æ•°ãƒ†ã‚¹ãƒˆ)
   - `getByLabel('ãƒ¦ãƒ¼ã‚¶ãƒ¼å')` ãŒè¦‹ã¤ã‹ã‚‰ãªã„
   - å¯¾è±¡: `e2e-04-permission.spec.ts` ç­‰
   - åŸå› : ãƒ­ã‚°ã‚¤ãƒ³UIã®å¤‰æ›´ã«ãƒ†ã‚¹ãƒˆãŒè¿½å¾“ã—ã¦ã„ãªã„

2. **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä¸æ•´åˆ**
   - `warehouse-crud.spec.ts`: "Existing Warehouse" ãŒå­˜åœ¨ã—ãªã„
   - `customer-items.spec.ts`: æœŸå¾…ã™ã‚‹ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãŒãªã„

3. **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ/å¿œç­”é…å»¶**
   - `e2e-06-error-handling.spec.ts`: é•·æ™‚é–“ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**å¤±æ•—ãƒ†ã‚¹ãƒˆä¸€è¦§:**
- `e2e/allocation.spec.ts`
- `e2e/customer-items.spec.ts`
- `e2e/rpa-material-delivery.spec.ts`
- `e2e/shortage-auto-order.spec.ts`
- `e2e/specs/p0/e2e-01-order-flow.spec.ts`
- `e2e/specs/p0/e2e-02-save-persistence.spec.ts` (2ä»¶)
- `e2e/specs/p0/e2e-03-double-submit.spec.ts` (2ä»¶)
- `e2e/specs/p0/e2e-04-permission.spec.ts` (4ä»¶)
- `e2e/specs/p0/e2e-05-list-filter.spec.ts` (4ä»¶)
- `e2e/specs/p0/e2e-06-error-handling.spec.ts`
- `e2e/warehouse-crud.spec.ts`

**å¯¾å¿œæ–¹é‡:**
1. ãƒ­ã‚°ã‚¤ãƒ³ã‚»ãƒ¬ã‚¯ã‚¿ã‚’ç¾åœ¨ã®UIæ§‹é€ ã«åˆã‚ã›ã¦æ›´æ–°
2. ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£/ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®æ•´å‚™
3. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå€¤ã®èª¿æ•´ã¾ãŸã¯ãƒ†ã‚¹ãƒˆè¨­è¨ˆã®è¦‹ç›´ã—

**å…ƒ:** SSOTåŒ–PR E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœ (2026-01-26)

---

## 6. æ©Ÿèƒ½æ”¹å–„ãƒ»ä¸­é•·æœŸã‚¿ã‚¹ã‚¯

### 6-1. DB/UIæ•´åˆæ€§ä¿®æ­£ã«ä¼´ã†ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½

- Forecasts / Orders / Inventory/Lots ã® Excel ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Ÿè£…ã€‚

**å…ƒ:** `backlog.md::6-1` (2026-01-18)

---

### 6-2. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®å¯è¦–åŒ–ï¼ˆrechartsï¼‰

- KPIã®ã¿ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚°ãƒ©ãƒ•ã‚’è¿½åŠ ã€‚

**å…ƒ:** `backlog.md::6-2` (2026-01-18)

---

### 6-3. SAPé€£æºã‚¿ã‚¹ã‚¯

- æœ¬ç•ªAPIæ¥ç¶šã€äºŒé‡è¨ˆä¸Šé˜²æ­¢ã®ã¹ãç­‰æ€§å¯¾å¿œã€åœ¨åº«åŒæœŸã€‚

**å…ƒ:** `backlog.md::6-3` (2026-01-18)

---

### 6-4. ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆå˜ä½ã®å¼•å½“æ¨å¥¨ç”Ÿæˆ

- æ—¢å­˜ã¯å…¨æœŸé–“ä¸€æ‹¬ã®ã¿ã€‚ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—å˜ä½ã§ã®ç”ŸæˆãŒå¿…è¦ã€‚

**å…ƒ:** `backlog.md::6-4` (2026-01-18)

---

### 6-5. å…¥è·äºˆå®šã®å€‰åº«ãƒ‡ãƒ¼ã‚¿å–å¾—æ”¹å–„

- `InboundPlan`ãƒ˜ãƒƒãƒ€ãƒ¼ã«å€‰åº«æƒ…å ±ãŒãªãã€ŒæœªæŒ‡å®šã€ã«é›†ç´„ã•ã‚Œã‚‹å•é¡Œã€‚

**å…ƒ:** `backlog.md::6-5` (2026-01-18)

---

### 6-6. OpenAPIå‹å®šç¾©ã®å°å…¥

- `openapi-typescript` ã‚’åˆ©ç”¨ã—ãŸå‹ç”Ÿæˆã§ãƒ•ãƒ­ãƒ³ãƒˆ/ãƒãƒƒã‚¯ã®æ•´åˆæ€§ã‚’ç¢ºä¿ã€‚

**å…ƒ:** `backlog.md::6-6` (2026-01-18)

---

### 6-7. å•†å“è­˜åˆ¥è¨­è¨ˆã®ãƒ“ã‚¸ãƒã‚¹å®Ÿæ…‹ã¸ã®é©åˆ

**å„ªå…ˆåº¦**: Medium
**é›£æ˜“åº¦**: High
**æƒ³å®šå·¥æ•°**: 5-7æ—¥

**èƒŒæ™¯ãƒ»èª²é¡Œ:**
- ç¾çŠ¶ã®å®Ÿè£…ã¯ `maker_part_code`ï¼ˆãƒ¡ãƒ¼ã‚«ãƒ¼å“ç•ª/å†…éƒ¨ã‚³ãƒ¼ãƒ‰ï¼‰ä¸­å¿ƒã ãŒã€ãƒ“ã‚¸ãƒã‚¹å®Ÿæ…‹ã¯9å‰²ãŒã€Œå…ˆæ–¹å“ç•ªï¼ˆCustomer Part Noï¼‰ã€ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚‹ã€‚
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›´æ„Ÿã«åˆã‚ã›ãŸè­˜åˆ¥å­è¨­è¨ˆã¸ã®è¦‹ç›´ã—ãŒå¿…è¦ã€‚

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
1. å…ˆæ–¹å“ç•ªã‚’ãƒ—ãƒ©ã‚¤ãƒãƒªãªæ¤œç´¢/è­˜åˆ¥ã‚­ãƒ¼ã¨ã—ã¦æ‰±ãˆã‚‹ã‚ˆã†è¨­è¨ˆã‚’è¦‹ç›´ã™ã€‚
2. `Product` ãƒã‚¹ã‚¿ã«ãŠã‘ã‚‹è¤‡æ•°å“ç•ªï¼ˆãƒ¡ãƒ¼ã‚«ãƒ¼å“ç•ªã€å…ˆæ–¹å“ç•ªã€å†…éƒ¨ã‚³ãƒ¼ãƒ‰ï¼‰ã®å„ªå…ˆé †ä½ã¨ç”¨é€”ã‚’æ•´ç†ã—ã€å‘½åã‚’æ”¹å–„ã™ã‚‹ã€‚

**é–¢é€£:** `MASTER_DATA_FIELD_ALIGNMENT_TASKS.md::4`

**å…ƒ:** `FUTURE_IMPROVEMENTS.md` & `MASTER_DATA_FIELD_ALIGNMENT_TASKS.md` (2026-01-19)

---

### 6-8. Phase 4ä»¥é™ï¼šå°†æ¥çš„ãªæ”¹å–„ãƒ»æ‹¡å¼µ

**å„ªå…ˆåº¦**: Lowã€œMedium
**é›£æ˜“åº¦**: Mediumã€œHigh

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
1. **ãƒãƒƒãƒ”ãƒ³ã‚°è¨­å®šã®UIåŒ–**
   - ç¾åœ¨ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§è¡Œã£ã¦ã„ã‚‹OCRãƒ†ã‚­ã‚¹ãƒˆç½®æ›ã‚„å“ç›®ãƒãƒƒãƒ”ãƒ³ã‚°ã®è¨­å®šã‚’ã€ç®¡ç†ç”¨UIã‹ã‚‰å¤‰æ›´å¯èƒ½ã«ã™ã‚‹ã€‚
2. **AIã‚’æ´»ç”¨ã—ãŸè£œå®Œæ©Ÿèƒ½**
   - éå»ã®ç·¨é›†å±¥æ­´ã‚’æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦å­¦ç¿’ã—ã€OCRçµæœã®ä¸æ˜ç­ãªç®‡æ‰€ã‚’ã‚ˆã‚Šé«˜ã„ç²¾åº¦ã§è‡ªå‹•è£œå®Œã™ã‚‹ã€‚
3. **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ©Ÿèƒ½**
   - ãƒ­ãƒƒãƒˆç®¡ç†çŠ¶æ³ã‚„OCRå‡¦ç†é€Ÿåº¦ã€ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡ãªã©ã‚’è¦–è¦šåŒ–ã™ã‚‹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®è¿½åŠ ã€‚
4. **OCRçµæœã¨å—æ³¨ç®¡ç†ã®çµ±åˆ**
   - OCRã§èª­ã¿å–ã£ãŸçµæœã‚’å—æ³¨ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ç›´æ¥å–ã‚Šè¾¼ã¿ã€å—æ³¨ç®¡ç†æ©Ÿèƒ½ã¨ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«é€£æºã•ã›ã‚‹ã“ã¨ã§ã€å…¥åŠ›ä½œæ¥­ã®ã•ã‚‰ãªã‚‹è‡ªå‹•åŒ–ã‚’å›³ã‚‹ã€‚
5. **scripts ã¨ tools ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ•´ç†ãƒ»å®šç¾©æ˜ç¢ºåŒ–**
   - ç¾åœ¨ã€é‹ç”¨ç³»ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆscriptsï¼‰ã¨é–‹ç™ºãƒ»CIãƒ„ãƒ¼ãƒ«ï¼ˆtoolsï¼‰ã®å¢ƒç•ŒãŒæ›–æ˜§ãªãŸã‚ã€å½¹å‰²ã‚’å†å®šç¾©ã—ã¦æ•´ç†ã™ã‚‹ã€‚
   - `scripts`: æœ¬ç•ª/ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ãƒ‡ãƒ¼ã‚¿è£œæ­£ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã€ãƒ‡ãƒ—ãƒ­ã‚¤ãªã©ã®é‹ç”¨ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ç³»ã€‚
   - `tools`: é™çš„è§£æã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆã€é–‹ç™ºè£œåŠ©ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãªã©ã®é–‹ç™ºãƒ»CIç³»ã€‚
6. **DBæ•´åˆæ€§ç¶­æŒã®è‡ªå‹•åŒ– (DB Triggers)**
   - `lot_master` ã®é›†è¨ˆå€¤ï¼ˆåˆå›å…¥è·æ—¥ã€æœ€çµ‚æœ‰åŠ¹æœŸé™ç­‰ï¼‰ã‚’DBãƒˆãƒªã‚¬ãƒ¼ã§è‡ªå‹•æ›´æ–°ã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã§ã®æ›´æ–°æ¼ã‚Œã‚’é˜²ãã€‚

**å…ƒ:** `FUTURE_IMPROVEMENTS.md`

---

## 7. ä¿ç•™ï¼ˆå†ç¾ç¢ºèªãƒ»èª¿æŸ»å¾…ã¡ï¼‰

### 7-1. ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆç·¨é›†å¾Œã®æ›´æ–°å•é¡Œ

- ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆç·¨é›†å¾Œã€è¨ˆç”»å¼•å½“ã‚µãƒãƒªãƒ»é–¢é€£å—æ³¨ãŒæ›´æ–°ã•ã‚Œãªã„ã€‚
- æ‰‹å‹•ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã§ã¯å›é¿å¯èƒ½ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†è¨ˆç®—ã®ç¢ºèªãŒå¿…è¦ã€‚

**å…ƒ:** `backlog.md::7-1` (2026-01-18)

---

### 7-2. éå»ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–æ€§å‘ä¸Š

- **å…¥è·äºˆå®šä¸€è¦§**: éå»ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºç¢ºèªã¨ã€Œéå»/æœªæ¥ã€ã‚¿ãƒ–ã¾ãŸã¯ãƒ•ã‚£ãƒ«ã‚¿ã®å®Ÿè£…ã€‚
- **å—æ³¨ç®¡ç†**: éå»ã®å—æ³¨ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºç¢ºèªã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹/æ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿ã®å¼·åŒ–ã€‚
- **ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆä¸€è¦§**: ã€Œå±¥æ­´ã€ã‚¿ãƒ–ã®æ©Ÿèƒ½ç¢ºèªã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆ`/history`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ´»ç”¨ï¼‰ã€‚

**å…ƒ:** `backlog.md::8-1` (2026-01-18)

---

## 8. æŠ€è¡“è² å‚µ (ä½å„ªå…ˆåº¦)

### 8-1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: å¤–éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å‹å®šç¾©ã‚’æ”¹å–„

**å„ªå…ˆåº¦**: Low (anyå‹å‰Šæ¸› Phase 3)
**å¯¾è±¡**: 16ç®‡æ‰€

**å ´æ‰€**: `src/types/external-modules.d.ts`

**ç†ç”±**: å¤–éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«(@radix-ui)ã®å‹å®šç¾©ãŒä¸å®Œå…¨

**å¯¾å¿œ**: Radix UIã®å‹å®šç¾©ã‚’æ­£ç¢ºã«è¨˜è¿°ã™ã‚‹ã‹ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å‹å®šç¾©ã‚’åˆ©ç”¨

**å…ƒ:** `any-type-reduction.md` (2026-01-18)

---

### 8-2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: Repository Methodsã«ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’å°å…¥

**å„ªå…ˆåº¦**: Low (anyå‹å‰Šæ¸› Phase 3)
**å¯¾è±¡**: 3ç®‡æ‰€

**å ´æ‰€**: `app/infrastructure/persistence/repositories/rpa_repository.py`

**ç¾çŠ¶:**
```python
def add(self, entity: Any) -> None:
    self.db.add(entity)

def refresh(self, entity: Any) -> None:
    self.db.refresh(entity)
```

**å¯¾å¿œ**: ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ç”¨
```python
from typing import TypeVar
T = TypeVar('T')

def add(self, entity: T) -> None:
    self.db.add(entity)
```

**å…ƒ:** `any-type-reduction.md` (2026-01-18)

---

### 8-3. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: Export Serviceã®å‹ã‚’æ”¹å–„

**å„ªå…ˆåº¦**: Low (anyå‹å‰Šæ¸› Phase 3)
**å¯¾è±¡**: 2ç®‡æ‰€

**å ´æ‰€**: `app/application/services/common/export_service.py`

**å¯¾å¿œ**: TypedDictã¾ãŸã¯ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ç”¨

**å…ƒ:** `any-type-reduction.md` (2026-01-18)

---

### 8-4. SmartRead Logging Gaps - errorLogger Integration

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-21
**é–¢é€£PR**: feature/smartread-vertical-conversion-fix

**èƒŒæ™¯:**
PR #454 added `errorLogger` to main features for success/error logging. However, SmartRead feature lacks consistent logging across all operations.

**å®Œäº†æ¸ˆã¿:**
- `useTransformToLong` - errorLoggerè¿½åŠ æ¸ˆã¿

**æ¬ è½ç®‡æ‰€:**
- API Operations (`api.ts`): `syncTaskResults()`, `saveLongData()`, `uploadFile()`, etc.
- Hook Operations (`hooks.ts`): `useSyncTaskResults`, `useSmartReadConfigs`, `useSmartReadTasks`
- Component Operations: `SmartReadResultView`, `SmartReadUploadPanel`, `SmartReadTaskList`

**å„ªå…ˆåº¦:**
- High: `useSyncTaskResults`, API file operations, config CRUD
- Medium: User action logging, task list operations
- Low: Backend logging strategy review

**å…ƒ:** `smartread-logging-gaps.md` (2026-01-21)

---

### 8-5. SmartRead Cache-to-DB Save Inconsistency

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-21

**å•é¡Œ:**
ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ï¼ˆIndexedDBï¼‰ãŒè‡ªå‹•çš„ã«DBã«ä¿å­˜ã•ã‚Œãªã„ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šæ€§ãŒä¿è¨¼ã•ã‚Œã¦ã„ãªã„ã€‚

**æ¨å¥¨å¯¾å¿œï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³Cï¼‰:**
IDBã«ã€ŒDBä¿å­˜æ¸ˆã¿ã€ãƒ•ãƒ©ã‚°ã‚’è¿½åŠ ã—ã€æœªä¿å­˜ãƒ‡ãƒ¼ã‚¿ã®ã¿DBä¿å­˜ã™ã‚‹ã€‚

**å®Ÿè£…ã‚¿ã‚¹ã‚¯:**
1. ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ï¼ˆ`saved_to_db` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼‰
2. ä¿å­˜ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
3. ä»–ã®ãƒ•ãƒ­ãƒ¼ä¿®æ­£
4. ãƒ†ã‚¹ãƒˆ

**å…ƒ:** `smartread-cache-db-save-inconsistency.md` (2026-01-21)

---

### 8-6. SSOTçµ±ä¸€: CustomerItems è¤‡åˆã‚­ãƒ¼APIå»ƒæ­¢

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26
**é–¢é€£**: customer_item_delivery_settings SSOTåŒ–

**èƒŒæ™¯:**
CustomerItemsã®CRUD APIã¯ç¾åœ¨ã€å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚`/{customer_id}/{customer_part_no}`å½¢å¼ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç¶­æŒã—ã¦ã„ã‚‹ã€‚
`customer_items.id`ãŒSSOTã§ã‚ã‚‹ãŸã‚ã€å°†æ¥çš„ã«`/{id}`ãƒ™ãƒ¼ã‚¹ã«çµ±ä¸€ã™ã¹ãã€‚

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:**
- `backend/app/presentation/api/routes/masters/customer_items_router.py`
- `backend/app/application/services/masters/customer_items_service.py`

**å»ƒæ­¢å¯¾è±¡ãƒ¡ã‚½ãƒƒãƒ‰:**
- `get_by_key(customer_id, customer_part_no)`
- `update_by_key(customer_id, customer_part_no, ...)`
- `delete_by_key(customer_id, customer_part_no, ...)`
- `restore_by_key(customer_id, customer_part_no)`
- `permanent_delete_by_key(customer_id, customer_part_no)`

**ç§»è¡Œæ‰‹é †:**
1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®å‘¼ã³å‡ºã—å…ƒã‚’`/{id}`å½¢å¼ã«ç§»è¡Œ
2. å¾Œæ–¹äº’æ›ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«deprecationè­¦å‘Šã‚’è¿½åŠ 
3. ä¸€å®šæœŸé–“å¾Œã«å¾Œæ–¹äº’æ›ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å‰Šé™¤

**å…ƒ:** SSOTç›£æŸ»ãƒ¬ãƒãƒ¼ãƒˆ (2026-01-26)

---

### 8-7. SSOTçµ±ä¸€: ShipmentTextRequest ã® customer_item_id å¯¾å¿œ

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26
**ä¾å­˜**: OrderLineãƒ¢ãƒ‡ãƒ«ã¸ã®`customer_item_id`è¿½åŠ 

**èƒŒæ™¯:**
`/shipment-text`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ç¾åœ¨`customer_id + product_id`ã‚’å—ã‘å–ã‚Šã€å†…éƒ¨ã§`customer_part_no`ã«å¤‰æ›ã—ã¦ã„ã‚‹ã€‚
OrderLineã«`customer_item_id`ãŒè¿½åŠ ã•ã‚Œã‚Œã°ã€ç›´æ¥`customer_item_id`ã‚’å—ã‘å–ã‚‹å½¢å¼ã«ç§»è¡Œå¯èƒ½ã€‚

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:**
- `backend/app/presentation/schemas/masters/customer_item_delivery_setting_schema.py` (ShipmentTextRequest)
- `backend/app/application/services/masters/customer_item_delivery_setting_service.py` (get_shipment_text)
- `backend/app/infrastructure/persistence/repositories/customer_item_delivery_setting_repository.py` (find_matching_setting, find_customer_part_no)

**å‰ææ¡ä»¶:**
- OrderLine / order_lines ãƒ†ãƒ¼ãƒ–ãƒ«ã«`customer_item_id`ã‚«ãƒ©ãƒ ã‚’è¿½åŠ 
- å—æ³¨ä½œæˆæ™‚ã«`customer_item_id`ã‚’è¨­å®šã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…

**å…ƒ:** SSOTç›£æŸ»ãƒ¬ãƒãƒ¼ãƒˆ (2026-01-26)

---

### 8-8. ã‚¹ã‚­ãƒ¼ãƒé‡è¤‡è§£æ¶ˆ: SupplierItem

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
SupplierItemã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«å¯¾ã—ã¦2ç®‡æ‰€ã§ã‚¹ã‚­ãƒ¼ãƒãŒå®šç¾©ã•ã‚Œã¦ãŠã‚Šã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ãŒä½ä¸‹ã—ã¦ã„ã‚‹ã€‚

**é‡è¤‡ç®‡æ‰€:**
- `backend/app/presentation/schemas/masters/supplier_items_schema.py` (SupplierItemBase, Create, Update, Response)
- `backend/app/presentation/schemas/masters/masters_schema.py:321-367` (åŒåã®ã‚¹ã‚­ãƒ¼ãƒç¾¤)

**å¯¾å¿œ:**
1. ã©ã¡ã‚‰ãŒæ­£ã¨ã—ã¦ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‹èª¿æŸ»
2. ä½¿ç”¨ã•ã‚Œã¦ã„ãªã„æ–¹ã‚’å‰Šé™¤ã€ã¾ãŸã¯ç‰‡æ–¹ã‚’ä»–æ–¹ã¸ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã«å¤‰æ›´
3. ã‚¤ãƒ³ãƒãƒ¼ãƒˆå…ƒã‚’çµ±ä¸€

**å…ƒ:** SSOTç›£æŸ»ãƒ¬ãƒãƒ¼ãƒˆ (2026-01-26)

---

### 8-9. åºƒç¯„ãª except Exception ã®å…·ä½“åŒ–

**å„ªå…ˆåº¦**: High
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
`except Exception:` ã§å…¨ã¦ã®ä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒã—ã¦ã„ã‚‹ç®‡æ‰€ãŒ15ç®‡æ‰€ä»¥ä¸Šå­˜åœ¨ã€‚
ã‚¨ãƒ©ãƒ¼ã®æ¡ã‚Šã¤ã¶ã—ã‚„ãƒ‡ãƒãƒƒã‚°å›°é›£ã®åŸå› ã¨ãªã‚‹ã€‚

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:**
- `backend/app/presentation/api/routes/allocations/allocations_router.py:271,318,507`
- `backend/app/application/services/forecasts/forecast_service.py:621,646`
- `backend/app/application/services/allocations/commit.py:284`
- `backend/app/domain/events/dispatcher.py:253`
- ãã®ä»–è¤‡æ•°

**å¯¾å¿œ:**
1. å…·ä½“çš„ãªä¾‹å¤–å‹ï¼ˆ`IntegrityError`, `ValidationError`, `AllocationError`ç­‰ï¼‰ã§ã‚­ãƒ£ãƒƒãƒ
2. æœ€ä½é™ `logger.exception()` ã§ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¨˜éŒ²
3. `except Exception: pass` ã¯çµ¶å¯¾ã«é¿ã‘ã‚‹

---

### 8-11. å¤§è¦æ¨¡ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†å‰² (600è¡Œè¶…)

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
CLAUDE.md ã§æ¨å¥¨ã•ã‚Œã‚‹300è¡Œã‚’å¤§å¹…ã«è¶…ãˆã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã€‚
ä¿å®ˆæ€§ãƒ»å¯èª­æ€§ãƒ»ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ãŒä½ä¸‹ã€‚

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:**
| ãƒ•ã‚¡ã‚¤ãƒ« | è¡Œæ•° | åˆ†å‰²æ¡ˆ |
|----------|------|--------|
| `lot_service.py` | 1177 | LotCreationService, LotQueryService, LotUpdateService ã«åˆ†å‰² |
| `smartread_router.py` | 1108 | æ©Ÿèƒ½åˆ¥ã«è¤‡æ•° APIRouter ã«åˆ†å‰² |
| `smartread/client.py` | 935 | SmartReadUploader, SmartReadDownloader, SmartReadParser ã«åˆ†å‰² |
| `forecast_service.py` | 681 | ForecastImportService, ForecastCalculationService ã«åˆ†å‰² |

---

### 8-12. ç©ºã® Schema ã‚¯ãƒ©ã‚¹ (pass only) ã®æ•´ç†

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
`pass` ã®ã¿ã®ç©ºã‚¯ãƒ©ã‚¹ãŒ29ç®‡æ‰€å­˜åœ¨ã€‚
ç›®çš„ãŒä¸æ˜ç¢ºã§ã€ã‚³ãƒ¼ãƒ‰ã®æ„å›³ãŒä¼ã‚ã‚Šã«ãã„ã€‚

**å¯¾è±¡ (ä¸€éƒ¨):**
- `forecast_schema.py:30`
- `orders_schema.py:145`
- `masters_schema.py:40,96,150,206,250,340`
- `customer_items_schema.py:47`
- ãã®ä»–20+ç®‡æ‰€

**å¯¾å¿œ:**
1. ç¶™æ‰¿ã®ã¿ãŒç›®çš„ãªã‚‰ã€docstringã§ãã®æ—¨ã‚’æ˜è¨˜
2. ä¸è¦ãªã‚¯ãƒ©ã‚¹ã¯å‰Šé™¤
3. ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã™ã¹ããªã‚‰è¿½åŠ 

---

### 8-13. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: db_browser_router ã®æ¨©é™ãƒã‚§ãƒƒã‚¯

**å„ªå…ˆåº¦**: High
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
`/api/debug/db-browser` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒèªå¯ãƒã‚§ãƒƒã‚¯ãªã—ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã€‚
æœ¬ç•ªç’°å¢ƒã§æœ‰åŠ¹åŒ–ã•ã‚Œã‚‹ã¨é‡å¤§ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã€‚

**å¯¾è±¡:**
- `backend/app/presentation/api/routes/debug/db_browser_router.py`

**å¯¾å¿œ:**
1. `settings.ENVIRONMENT == "development"` ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ 
2. ã¾ãŸã¯ç®¡ç†è€…ãƒ­ãƒ¼ãƒ«ï¼ˆ`is_admin`ï¼‰ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«
3. æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ã¯ãƒ«ãƒ¼ã‚¿ãƒ¼è‡ªä½“ã‚’ç„¡åŠ¹åŒ–

---

### 8-14. Infrastructure â†’ Service ã®é€†ä¾å­˜è§£æ¶ˆ

**å„ªå…ˆåº¦**: Medium
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
Infrastructureå±¤ï¼ˆclients/ï¼‰ãŒServiceå±¤ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹ç®‡æ‰€ãŒã‚ã‚‹ã€‚
ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ä¾å­˜é–¢ä¿‚ãŒé€†å‘ãã€‚

**å¯¾è±¡:**
- `backend/app/infrastructure/clients/lot_client.py`
- `backend/app/infrastructure/clients/inventory_client.py`
- `backend/app/infrastructure/clients/order_client.py`

**å¯¾å¿œ:**
1. Factoryãƒ‘ã‚¿ãƒ¼ãƒ³ã§ä¾å­˜æ€§æ³¨å…¥(DI)ã‚’å®Ÿè£…
2. ã¾ãŸã¯ã€clientsã‚’applicationå±¤ã«ç§»å‹•
3. ä¾å­˜é–¢ä¿‚: Presentation â†’ Application â†’ Domain â†’ Infrastructure

---

### 8-15. TODO/FIXME ã‚³ãƒ¡ãƒ³ãƒˆã®æ£šå¸ã—

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
ã‚³ãƒ¼ãƒ‰å†…ã«19ä»¶ã®TODO/FIXMEã‚³ãƒ¡ãƒ³ãƒˆãŒå­˜åœ¨ã€‚
å¯¾å¿œãŒå¿…è¦ãªã‚‚ã®ã¨ã€ã‚‚ã¯ã‚„ä¸è¦ãªã‚‚ã®ãŒæ··åœ¨ã—ã¦ã„ã‚‹å¯èƒ½æ€§ã€‚

**ä¸»ãªTODO:**
- `lots_router.py:461` - "Add permission check"ï¼ˆæ¨©é™ãƒã‚§ãƒƒã‚¯æœªå®Ÿè£…ï¼‰
- `replenishment_router.py:57` - "Implement persistence"ï¼ˆæ°¸ç¶šåŒ–æœªå®Ÿè£…ï¼‰
- `smartread_router.py:857` - "SSEå®Ÿè£…"ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥æœªå®Ÿè£…ï¼‰
- `confirm.py:237` - "Support configurable expiry margin"ï¼ˆæœ‰åŠ¹æœŸé™ãƒãƒ¼ã‚¸ãƒ³è¨­å®šï¼‰

**å¯¾å¿œ:**
1. å„TODOã‚’BACKLOGã®é©åˆ‡ãªã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ç§»å‹•
2. å¯¾å¿œæ¸ˆã¿/ä¸è¦ãªTODOã¯å‰Šé™¤
3. æ®‹ã™ã¹ãTODOã«ã¯æœŸé™ã‚„ãƒã‚±ãƒƒãƒˆç•ªå·ã‚’ä»˜ä¸

---

### 8-16. InventoryTable å±•é–‹ã‚­ãƒ¼å½¢å¼ã®çµ±ä¸€

**å„ªå…ˆåº¦**: Low
**ä½œæˆ**: 2026-01-26

**èƒŒæ™¯:**
`InventoryTable`ã®è¡Œå±•é–‹ã§ä½¿ç”¨ã™ã‚‹ã‚­ãƒ¼å½¢å¼ãŒ2ç®‡æ‰€ã§ç•°ãªã£ã¦ã„ã‚‹ã€‚
PR #437 ã§`getItemKey`ã«`supplier_id`ã‚’è¿½åŠ ã—ãŸéš›ã€`useInventoryTableLogic`ã®ã‚­ãƒ¼å½¢å¼ã‚’æ›´æ–°ã—å¿˜ã‚ŒãŸã“ã¨ãŒåŸå› ã€‚

ç¾åœ¨ã¯ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å†…ã§å¤‰æ›å‡¦ç†ã‚’è¡Œã„æš«å®šå¯¾å¿œæ¸ˆã¿ã ãŒã€æ ¹æœ¬çš„ã«ã¯ã‚­ãƒ¼å½¢å¼ã‚’çµ±ä¸€ã™ã¹ãã€‚

**ç¾çŠ¶:**
- `getItemKey` (DataTableè¡ŒID): `${supplier_id ?? "all"}-${product_id}-${warehouse_id}` ï¼ˆ3éƒ¨æ§‹æˆï¼‰
- `useInventoryTableLogic.expandedRows`: `${productId}-${warehouseId}` ï¼ˆ2éƒ¨æ§‹æˆï¼‰

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:**
- `frontend/src/features/inventory/components/InventoryTable.tsx`
- `frontend/src/features/inventory/hooks/useInventoryTableLogic.ts`

**å¯¾å¿œæ¡ˆ:**
1. `useInventoryTableLogic`ã®ã‚­ãƒ¼å½¢å¼ã‚’3éƒ¨æ§‹æˆã«çµ±ä¸€
2. `toggleRow`, `isRowExpanded`, `fetchLotsForItem`ç­‰ã®ã‚·ã‚°ãƒãƒãƒ£ã«`supplierId`ã‚’è¿½åŠ 
3. ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å†…ã®å¤‰æ›å‡¦ç†ã‚’å‰Šé™¤

---

## 9. ãƒ“ã‚¸ãƒã‚¹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè£œè¶³ãŒå¿…è¦ãªé …ç›®

ä»¥ä¸‹ã®é …ç›®ã¯ã€ã‚³ãƒ¼ãƒ‰ã«ã€Œæ„å›³ãƒ»èƒŒæ™¯ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹éš›ã«ã€é–‹ç™ºè€…ã®åˆ¤æ–­ã ã‘ã§ã¯è¨˜è¿°ã§ããªã„é …ç›®ã§ã™ã€‚å¤–éƒ¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¾ãŸã¯ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã®ç¢ºèªãŒå¿…è¦ã§ã™ã€‚

### 9-1. ğŸ”´ æœ€å„ªå…ˆï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®æ ¹å¹¹ï¼‰

#### éå‰°äºˆç´„ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ–ãƒƒã‚­ãƒ³ã‚°ï¼‰ã®è¨±å®¹ç¯„å›²

**ãƒ•ã‚¡ã‚¤ãƒ«**: `stock_calculation.py`, `lot_reservation_service.py`

**è³ªå•:**
1. ã©ã®ç¨‹åº¦ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ–ãƒƒã‚­ãƒ³ã‚°ã¾ã§è¨±å®¹ã™ã‚‹ã®ã‹ï¼Ÿ
2. ã‚ªãƒ¼ãƒãƒ¼ãƒ–ãƒƒã‚­ãƒ³ã‚°æ™‚ã®é‹ç”¨ãƒ•ãƒ­ãƒ¼
3. ãƒªã‚¹ã‚¯ç®¡ç†

#### FEFO vs FIFO ã®ä½¿ã„åˆ†ã‘åŸºæº–

**ãƒ•ã‚¡ã‚¤ãƒ«**: `allocation_policy.py`, è£½å“ãƒã‚¹ã‚¿

**è³ªå•:**
1. è£½å“ã‚«ãƒ†ã‚´ãƒªã”ã¨ã®å…·ä½“çš„ãªé©ç”¨ãƒ«ãƒ¼ãƒ«
2. æœ‰åŠ¹æœŸé™ã®è¨­å®šåŸºæº–
3. é¡§å®¢è¦æ±‚ã¸ã®å¯¾å¿œ

#### SAPé€£æºã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨è²¬ä»»ç¯„å›²

**ãƒ•ã‚¡ã‚¤ãƒ«**: `sap_service.py`, `sap_router.py`

**è³ªå•:**
1. SAPç™»éŒ²ã®ãƒˆãƒªã‚¬ãƒ¼
2. SAPç™»éŒ²å¤±æ•—æ™‚ã®å¯¾å¿œ
3. SAPå´ã¨ã®è²¬ä»»åˆ†ç•Œç‚¹

### 9-2. ğŸŸ  é«˜å„ªå…ˆï¼ˆé‹ç”¨ãƒ«ãƒ¼ãƒ«ï¼‰

#### åœ¨åº«ãƒ­ãƒƒã‚¯æ©Ÿèƒ½ã®ç”¨é€”

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lot_models.py` (locked_quantity), `LockMode`

#### èª¿æ•´ç†ç”±ã®åˆ†é¡

**ãƒ•ã‚¡ã‚¤ãƒ«**: `adjustment_service.py`, `AdjustmentType`

### 9-3. ğŸŸ¡ ä¸­å„ªå…ˆï¼ˆæ‹¡å¼µæ€§ãƒ»å°†æ¥å¯¾å¿œï¼‰

#### ãƒãƒ«ãƒå€‰åº«å¯¾å¿œã®æ–¹é‡

**ãƒ•ã‚¡ã‚¤ãƒ«**: `config.py` (DEFAULT_WAREHOUSE_ID)

#### äºˆæ¸¬éœ€è¦ï¼ˆForecastï¼‰ã®æ´»ç”¨æ–¹æ³•

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lot_reservations_model.py` (ReservationSourceType.FORECAST)

**å…ƒ:** `BUSINESS_CONTEXT_NEEDED.md` (2025-12-27)

---

## 10. å¯¾å¿œæ¸ˆã¿

### 10-1. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã®å•é¡Œ (inventory_scenarios)

**è§£æ±ºæ—¥**: 2026-01-18
**ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: `b77dcffc2d98`

ãƒ“ãƒ¥ãƒ¼å®šç¾©ã‚’ä¿®æ­£ã—ã€æ¶ˆè²»ï¼ˆconsumedï¼‰ãŒç¾åœ¨åœ¨åº«ã«å³åº§ã«åæ˜ ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

**å…ƒ:** `TODO.md::å¯¾å¿œæ¸ˆã¿` (2026-01-10)

---

### 10-2. Date Handling ã®å‹ã‚’æ˜ç¤º (orchestrator.py)

**è§£æ±ºæ—¥**: 2026-01-26

`execute_step2` ã® `start_date` / `end_date` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ `Any` ã‹ã‚‰ `date | None` ã«å¤‰æ›´ã€‚

**å…ƒ:** `any-type-reduction.md` (1-4)

---

### 10-3. InboundPlansList ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ—¥æœ¬èªåŒ–

**è§£æ±ºæ—¥**: 2026-01-26

ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’æ—¥æœ¬èªã®ã¿ã«çµ±ä¸€ï¼ˆPlanned â†’ äºˆå®š ç­‰ï¼‰ã€‚

**å…ƒ:** `backlog.md::2-2` (2026-01-18)

---

### 10-4. ConfirmedLinesPage ã®SAPä¸€æ‹¬ç™»éŒ²ãƒœã‚¿ãƒ³é‡è¤‡

**è§£æ±ºæ—¥**: 2026-01-26
**çŠ¶æ…‹**: ç¢ºèªæ™‚ç‚¹ã§æ—¢ã«ä¿®æ­£æ¸ˆã¿ï¼ˆãƒœã‚¿ãƒ³ã¯1ç®‡æ‰€ã®ã¿ï¼‰

**å…ƒ:** `backlog.md::2-4` (2026-01-18)

---

### 10-5. æœ¬ç•ªã‚³ãƒ¼ãƒ‰ã® print() æ–‡å‰Šé™¤

**è§£æ±ºæ—¥**: 2026-01-26
**çŠ¶æ…‹**: ç¢ºèªæ™‚ç‚¹ã§æ—¢ã«å¯¾å¿œæ¸ˆã¿ï¼ˆloggerä½¿ç”¨ã«ç§»è¡Œæ¸ˆã¿ã€ã¾ãŸã¯ã‚³ãƒ¡ãƒ³ãƒˆ/ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å†…ã®ã¿ï¼‰

**å…ƒ:** `BACKLOG.md::8-9` (2026-01-26)

---

## å‚è€ƒæƒ…å ±

### çµ±åˆå…ƒãƒ•ã‚¡ã‚¤ãƒ«

æœ¬ãƒãƒƒã‚¯ãƒ­ã‚°ã¯ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’çµ±åˆã—ãŸã‚‚ã®ã§ã™:

1. `docs/project/plans/backlog/TODO.md` (2026-01-10)
2. `docs/project/plans/backlog/backlog.md` (2026-01-18)
3. `docs/project/plans/backlog/BUSINESS_CONTEXT_NEEDED.md` (2025-12-27)
4. `docs/project/plans/backlog/FUTURE_IMPROVEMENTS.md` (æ—¥ä»˜ãªã—)
5. `docs/project/plans/backlog/MASTER_DATA_FIELD_ALIGNMENT_TASKS.md` (2026-01-19)
6. `docs/project/plans/backlog/any-type-reduction.md` (2026-01-18)
7. `docs/project/plans/backlog/next_reviews_ja.md` (æ—¥ä»˜ãªã—)
8. `docs/project/plans/backlog/smartread-cache-db-save-inconsistency.md` (2026-01-21)
9. `docs/project/plans/backlog/smartread-logging-gaps.md` (2026-01-21)

çµ±åˆå¾Œã®ãƒãƒƒã‚¯ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `docs/project/BACKLOG.md` ã«é…ç½®ã•ã‚Œã¦ã„ã¾ã™ã€‚
å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `docs/archive/backlog/` ã«ä¿ç®¡ã•ã‚Œã¦ã„ã¾ã™ã€‚

### æ›´æ–°å±¥æ­´

- 2026-01-24: 9ãƒ•ã‚¡ã‚¤ãƒ«ã‚’çµ±åˆã—ã€å˜ä¸€ãƒãƒƒã‚¯ãƒ­ã‚°ã¨ã—ã¦æ•´ç†
- 2026-01-26: ã‚¯ã‚¤ãƒƒã‚¯ã‚¦ã‚£ãƒ³4ä»¶å¯¾å¿œ (1-4, 2-2, 2-4, 8-9)
