# API Reference - Lot Management System v2.2

**æœ€çµ‚æ›´æ–°**: 2025-11-15
**API ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.2.1
**ãƒ™ãƒ¼ã‚¹URL**: `/api`

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ãƒ­ãƒƒãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…æ¸ˆã¿ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§ã§ã™ã€‚è©³ç´°ãªä»•æ§˜ã¯ [OpenAPI ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](http://localhost:8000/api/docs) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ“‹ ç›®æ¬¡

1. [Forecasts API](#forecasts-api) - ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆç®¡ç†ï¼ˆãƒ˜ãƒƒãƒ€ãƒ»æ˜ç´°ï¼‰
2. [Inbound Plans API](#inbound-plans-api) - å…¥è·äºˆå®šç®¡ç†
3. [Inventory API](#inventory-api) - åœ¨åº«ç®¡ç†
4. [Orders API](#orders-api) - å—æ³¨ç®¡ç†
5. [Allocations API](#allocations-api) - å¼•å½“ç®¡ç†
6. [Masters API](#masters-api) - ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†
7. [Users & Roles API](#users--roles-api) - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒ­ãƒ¼ãƒ«ç®¡ç†
8. [Integration API](#integration-api) - å¤–éƒ¨é€£æº
9. [Admin API](#admin-api) - ç®¡ç†ãƒ»é‹ç”¨

---

## Forecasts API

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/forecasts`

ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆï¼ˆéœ€è¦äºˆæ¸¬ï¼‰ã‚’ãƒ˜ãƒƒãƒ€ãƒ»æ˜ç´°ã®åˆ†é›¢æ§‹é€ ã§ç®¡ç†ã—ã¾ã™ã€‚

### Forecast Headersï¼ˆãƒ˜ãƒƒãƒ€ï¼‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/forecasts/headers` | ãƒ˜ãƒƒãƒ€ä¸€è¦§å–å¾—ï¼ˆãƒ•ã‚£ãƒ«ã‚¿: customer_id, delivery_place_id, statusï¼‰ |
| `POST` | `/forecasts/headers` | ãƒ˜ãƒƒãƒ€ä½œæˆï¼ˆæ˜ç´°åŒæ™‚ç™»éŒ²å¯ï¼‰ |
| `GET` | `/forecasts/headers/{id}` | ãƒ˜ãƒƒãƒ€è©³ç´°å–å¾—ï¼ˆæ˜ç´°å«ã‚€ï¼‰ |
| `PUT` | `/forecasts/headers/{id}` | ãƒ˜ãƒƒãƒ€æ›´æ–° |
| `DELETE` | `/forecasts/headers/{id}` | ãƒ˜ãƒƒãƒ€å‰Šé™¤ï¼ˆã‚«ã‚¹ã‚±ãƒ¼ãƒ‰å‰Šé™¤ï¼‰ |

### Forecast Linesï¼ˆæ˜ç´°ï¼‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/forecasts/headers/{id}/lines` | ç‰¹å®šãƒ˜ãƒƒãƒ€ã®æ˜ç´°ä¸€è¦§å–å¾— |
| `POST` | `/forecasts/headers/{id}/lines` | æ˜ç´°è¿½åŠ  |
| `PUT` | `/forecasts/lines/{id}` | æ˜ç´°æ›´æ–° |
| `DELETE` | `/forecasts/lines/{id}` | æ˜ç´°å‰Šé™¤ |

### Bulk Import

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `POST` | `/forecasts/headers/bulk-import` | ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆãƒ˜ãƒƒãƒ€ãƒ»æ˜ç´°åŒæ™‚ç™»éŒ²ï¼‰ |

**ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `forecast_number` (STR) - ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆç•ªå·
- `customer_id` (INT) - å¾—æ„å…ˆID
- `delivery_place_id` (INT) - ç´å…¥å…ˆID
- `status` (STR) - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆactive/completed/cancelledï¼‰
- `lines` (ARRAY) - æ˜ç´°ï¼ˆproduct_id, forecast_date, quantityï¼‰

---

## Inbound Plans API

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/inbound-plans`

å…¥è·äºˆå®šã‚’ç®¡ç†ã—ã€å…¥è·å®Ÿç¸¾ç™»éŒ²æ™‚ã«è‡ªå‹•ã§ãƒ­ãƒƒãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚

### Inbound Plan Headers

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/inbound-plans` | å…¥è·äºˆå®šä¸€è¦§å–å¾—ï¼ˆãƒ•ã‚£ãƒ«ã‚¿: supplier_id, statusï¼‰ |
| `POST` | `/inbound-plans` | å…¥è·äºˆå®šç™»éŒ²ï¼ˆæ˜ç´°åŒæ™‚å¯ï¼‰ |
| `GET` | `/inbound-plans/{id}` | å…¥è·äºˆå®šè©³ç´°å–å¾— |
| `PUT` | `/inbound-plans/{id}` | å…¥è·äºˆå®šæ›´æ–° |
| `DELETE` | `/inbound-plans/{id}` | å…¥è·äºˆå®šå‰Šé™¤ |

### Inbound Plan Lines

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/inbound-plans/{id}/lines` | æ˜ç´°ä¸€è¦§å–å¾— |
| `POST` | `/inbound-plans/{id}/lines` | æ˜ç´°è¿½åŠ  |

### Inbound Receiptï¼ˆå…¥è·å®Ÿç¸¾ï¼‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `POST` | `/inbound-plans/{id}/receive` | **å…¥è·å®Ÿç¸¾ç™»éŒ²ï¼ˆãƒ­ãƒƒãƒˆè‡ªå‹•ç”Ÿæˆï¼‰** |

**ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `plan_number` (STR) - å…¥è·äºˆå®šç•ªå·
- `supplier_id` (INT) - ä»•å…¥å…ˆID
- `planned_arrival_date` (DATE) - äºˆå®šå…¥è·æ—¥
- `status` (STR) - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆplanned/partially_received/received/cancelledï¼‰
- `lines` (ARRAY) - æ˜ç´°ï¼ˆproduct_id, quantity, warehouse_idï¼‰

---

## Inventory API

### Lotsï¼ˆãƒ­ãƒƒãƒˆåœ¨åº«ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/lots`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/lots` | ãƒ­ãƒƒãƒˆä¸€è¦§å–å¾—ï¼ˆwith_stock=true ã§åœ¨åº«ä»˜ãï¼‰ |
| `POST` | `/lots` | ãƒ­ãƒƒãƒˆç™»éŒ² |
| `GET` | `/lots/{id}` | ãƒ­ãƒƒãƒˆè©³ç´°å–å¾— |
| `PUT` | `/lots/{id}` | ãƒ­ãƒƒãƒˆæ›´æ–° |
| `DELETE` | `/lots/{id}` | ãƒ­ãƒƒãƒˆå‰Šé™¤ |

### Inventory Itemsï¼ˆåœ¨åº«ã‚µãƒãƒªï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/inventory-items`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/inventory-items` | åœ¨åº«ã‚µãƒãƒªä¸€è¦§å–å¾—ï¼ˆproduct_id, warehouse_id é›†ç´„ï¼‰ |
| `GET` | `/inventory-items/{product_id}/{warehouse_id}` | åœ¨åº«ã‚µãƒãƒªè©³ç´°å–å¾— |

### Adjustmentsï¼ˆåœ¨åº«èª¿æ•´ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/adjustments`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/adjustments` | åœ¨åº«èª¿æ•´å±¥æ­´å–å¾— |
| `POST` | `/adjustments` | åœ¨åº«èª¿æ•´ç™»éŒ²ï¼ˆæ£šå¸å·®ç•°ç­‰ï¼‰ |
| `GET` | `/adjustments/{id}` | åœ¨åº«èª¿æ•´è©³ç´°å–å¾— |

**ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `lot_number` (STR) - ãƒ­ãƒƒãƒˆç•ªå·
- `product_id` (INT) - è£½å“ID
- `warehouse_id` (INT) - å€‰åº«ID
- `quantity` (DECIMAL) - æ•°é‡
- `expiry_date` (DATE) - æœ‰åŠ¹æœŸé™
- `receipt_date` (DATE) - å…¥è·æ—¥

---

## Orders API

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/orders`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/orders` | å—æ³¨ä¸€è¦§å–å¾—ï¼ˆãƒ•ã‚£ãƒ«ã‚¿: customer_id, statusï¼‰ |
| `POST` | `/orders` | å—æ³¨ä½œæˆï¼ˆæ˜ç´°åŒæ™‚ç™»éŒ²å¯ï¼‰ |
| `GET` | `/orders/{id}` | å—æ³¨è©³ç´°å–å¾—ï¼ˆæ˜ç´°ãƒ»å¼•å½“å«ã‚€ï¼‰ |
| `PATCH` | `/orders/{id}/status` | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–° |
| `DELETE` | `/orders/{id}` | å—æ³¨å‰Šé™¤ï¼ˆã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼‰ |

**å—æ³¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**:
- `draft` - ä¸‹æ›¸ã
- `open` - ç¢ºå®šï¼ˆå¼•å½“å¾…ã¡ï¼‰
- `part_allocated` - éƒ¨åˆ†å¼•å½“
- `allocated` - å¼•å½“å®Œäº†
- `shipped` - å‡ºè·æ¸ˆã¿
- `closed` - ã‚¯ãƒ­ãƒ¼ã‚º
- `cancelled` - ã‚­ãƒ£ãƒ³ã‚»ãƒ«

---

## Allocations API

### Allocation Commitï¼ˆå¼•å½“ç¢ºå®šï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/allocations`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `POST` | `/allocations/commit` | **å¼•å½“ç¢ºå®šï¼ˆv2.2.1ï¼‰** |
| `DELETE` | `/allocations/{id}` | å¼•å½“å–æ¶ˆ |

### Allocation Suggestionsï¼ˆå¼•å½“æ¨å¥¨ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/allocation-suggestions`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/allocation-suggestions` | å¼•å½“æ¨å¥¨ä¸€è¦§å–å¾— |
| `POST` | `/allocation-suggestions/manual` | æ‰‹å‹•å¼•å½“ç™»éŒ² |
| `POST` | `/allocation-suggestions/fefo` | FEFOå¼•å½“ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ |

### Allocation Candidatesï¼ˆå€™è£œãƒ­ãƒƒãƒˆï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/allocation-candidates`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/allocation-candidates` | å€™è£œãƒ­ãƒƒãƒˆä¸€è¦§å–å¾—ï¼ˆproduct_id, warehouse_id ãƒ•ã‚£ãƒ«ã‚¿ï¼‰ |

**å¼•å½“ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **: FEFOï¼ˆFirst Expiry First Outï¼‰- æœ‰åŠ¹æœŸé™ãŒæ—©ã„ãƒ­ãƒƒãƒˆã‹ã‚‰å„ªå…ˆçš„ã«å¼•å½“

---

## Masters API

### Warehousesï¼ˆå€‰åº«ãƒã‚¹ã‚¿ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/warehouses` ã¾ãŸã¯ `/masters/warehouses`ï¼ˆäº’æ›æ€§ï¼‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/warehouses` | å€‰åº«ä¸€è¦§å–å¾— |
| `GET` | `/warehouses/{id}` | å€‰åº«è©³ç´°å–å¾— |
| `POST` | `/warehouses` | å€‰åº«ç™»éŒ² |
| `PUT` | `/warehouses/{id}` | å€‰åº«æ›´æ–° |

### Suppliersï¼ˆä»•å…¥å…ˆãƒã‚¹ã‚¿ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/suppliers` ã¾ãŸã¯ `/masters/suppliers`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/suppliers` | ä»•å…¥å…ˆä¸€è¦§å–å¾— |
| `GET` | `/suppliers/{id}` | ä»•å…¥å…ˆè©³ç´°å–å¾— |
| `POST` | `/suppliers` | ä»•å…¥å…ˆç™»éŒ² |
| `PUT` | `/suppliers/{id}` | ä»•å…¥å…ˆæ›´æ–° |

### Customersï¼ˆå¾—æ„å…ˆãƒã‚¹ã‚¿ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/customers` ã¾ãŸã¯ `/masters/customers`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/customers` | å¾—æ„å…ˆä¸€è¦§å–å¾— |
| `GET` | `/customers/{id}` | å¾—æ„å…ˆè©³ç´°å–å¾— |
| `POST` | `/customers` | å¾—æ„å…ˆç™»éŒ² |
| `PUT` | `/customers/{id}` | å¾—æ„å…ˆæ›´æ–° |

### Productsï¼ˆè£½å“ãƒã‚¹ã‚¿ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/products` ã¾ãŸã¯ `/masters/products`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/products` | è£½å“ä¸€è¦§å–å¾— |
| `GET` | `/products/{id}` | è£½å“è©³ç´°å–å¾— |
| `POST` | `/products` | è£½å“ç™»éŒ² |
| `PUT` | `/products/{id}` | è£½å“æ›´æ–° |

### Customer Itemsï¼ˆå¾—æ„å…ˆå“ç•ªãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/customer-items`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/customer-items` | å“ç•ªãƒãƒƒãƒ”ãƒ³ã‚°ä¸€è¦§å–å¾— |
| `POST` | `/customer-items` | å“ç•ªãƒãƒƒãƒ”ãƒ³ã‚°ç™»éŒ² |
| `GET` | `/customer-items/{customer_id}` | ç‰¹å®šå¾—æ„å…ˆã®å“ç•ªä¸€è¦§ |
| `DELETE` | `/customer-items/{customer_id}/{product_id}` | å“ç•ªãƒãƒƒãƒ”ãƒ³ã‚°å‰Šé™¤ |

---

## Users & Roles API

### Usersï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/users`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/users` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾— |
| `POST` | `/users` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ |
| `GET` | `/users/{id}` | ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°å–å¾— |
| `PUT` | `/users/{id}` | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–° |
| `DELETE` | `/users/{id}` | ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ |
| `PATCH` | `/users/{id}/roles` | ãƒ­ãƒ¼ãƒ«å‰²å½“ |

### Rolesï¼ˆãƒ­ãƒ¼ãƒ«ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/roles`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/roles` | ãƒ­ãƒ¼ãƒ«ä¸€è¦§å–å¾— |
| `POST` | `/roles` | ãƒ­ãƒ¼ãƒ«ä½œæˆ |
| `GET` | `/roles/{id}` | ãƒ­ãƒ¼ãƒ«è©³ç´°å–å¾— |
| `PUT` | `/roles/{id}` | ãƒ­ãƒ¼ãƒ«æ›´æ–° |

---

## Integration API

### OCR Submissionsï¼ˆOCRå–è¾¼ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/submissions`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `POST` | `/submissions` | OCRå–è¾¼å®Ÿè¡Œ |
| `GET` | `/submissions` | OCRå–è¾¼å±¥æ­´å–å¾— |
| `GET` | `/submissions/{id}` | OCRå–è¾¼è©³ç´°å–å¾— |

### SAP Syncï¼ˆSAPé€£æºï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/integration`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `POST` | `/integration/sap/register` | SAPç™»éŒ²ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ |
| `GET` | `/integration/sap/logs` | SAPé€£æºãƒ­ã‚°å–å¾— |

---

## Admin API

### Operation Logsï¼ˆæ“ä½œãƒ­ã‚°ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/operation-logs`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/operation-logs` | æ“ä½œãƒ­ã‚°ä¸€è¦§å–å¾— |
| `GET` | `/operation-logs/{id}` | æ“ä½œãƒ­ã‚°è©³ç´°å–å¾— |

### Business Rulesï¼ˆæ¥­å‹™ãƒ«ãƒ¼ãƒ«ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/business-rules`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/business-rules` | æ¥­å‹™ãƒ«ãƒ¼ãƒ«ä¸€è¦§å–å¾— |
| `GET` | `/business-rules/{code}` | æ¥­å‹™ãƒ«ãƒ¼ãƒ«è©³ç´°å–å¾— |
| `PUT` | `/business-rules/{code}` | æ¥­å‹™ãƒ«ãƒ¼ãƒ«æ›´æ–° |

### Batch Jobsï¼ˆãƒãƒƒãƒã‚¸ãƒ§ãƒ–ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/batch-jobs`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/batch-jobs` | ãƒãƒƒãƒã‚¸ãƒ§ãƒ–ä¸€è¦§å–å¾— |
| `GET` | `/batch-jobs/{id}` | ãƒãƒƒãƒã‚¸ãƒ§ãƒ–è©³ç´°å–å¾— |
| `POST` | `/batch-jobs/{id}/execute` | ãƒãƒƒãƒã‚¸ãƒ§ãƒ–å®Ÿè¡Œ |

### Health Checkï¼ˆãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹**: `/admin`

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| `GET` | `/admin/healthcheck` | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ï¼ˆDBæ¥ç¶šç¢ºèªï¼‰ |
| `GET` | `/admin/stats` | çµ±è¨ˆæƒ…å ±å–å¾— |
| `POST` | `/admin/reset-database` | DBãƒªã‚»ãƒƒãƒˆï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰ |
| `POST` | `/admin/seeds` | ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŠ•å…¥ |

---

## å…±é€šä»•æ§˜

### ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³

å¤šãã®ä¸€è¦§å–å¾—APIã¯ã€ä»¥ä¸‹ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ï¼š

- `skip` (INT, default: 0) - ã‚¹ã‚­ãƒƒãƒ—ä»¶æ•°
- `limit` (INT, default: 100, max: 1000) - å–å¾—ä»¶æ•°ä¸Šé™

### ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

å„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ã€ãƒªã‚½ãƒ¼ã‚¹ã«å¿œã˜ãŸãƒ•ã‚£ãƒ«ã‚¿ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æä¾›ã—ã¾ã™ã€‚è©³ç´°ã¯ [OpenAPI ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](http://localhost:8000/api/docs) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹

```json
{
  "detail": "Error message here"
}
```

HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ï¼š
- `200` - æˆåŠŸ
- `201` - ä½œæˆæˆåŠŸ
- `204` - å‰Šé™¤æˆåŠŸï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ãªã—ï¼‰
- `400` - ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼
- `404` - ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚‰ãªã„
- `409` - ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆï¼ˆå¼•å½“ã‚¨ãƒ©ãƒ¼ç­‰ï¼‰
- `500` - ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

## Deprecated API

ä»¥ä¸‹ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯éæ¨å¥¨ã§ã™ã€‚ç§»è¡ŒæœŸé™ã¾ã§ã«æ–°ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ç§»è¡Œã—ã¦ãã ã•ã„ã€‚

| éæ¨å¥¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ä»£æ›¿ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ç§»è¡ŒæœŸé™ |
|-------------------|------------------|---------|
| `GET /api/forecast` | `GET /api/forecasts/headers` | 2026-02-15 |
| `POST /api/allocations/drag-assign` | `POST /api/allocation-suggestions/manual` | 2026-02-15 |
| `POST /api/allocations/preview` | `POST /api/allocation-suggestions/fefo` | 2026-02-15 |
| `GET /api/allocations/candidate-lots` | `GET /api/allocation-candidates` | 2026-02-15 |

è©³ç´°ã¯ [API Migration Guide](./api_migration_guide_v2.2.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [OpenAPI ä»•æ§˜ï¼ˆSwagger UIï¼‰](http://localhost:8000/api/docs)
- [API Migration Guide v2.2](./api_migration_guide_v2.2.md)
- [API Refactor Plan v2.2](./architecture/api_refactor_plan_v2.2.md)
- [Database Schema](./schema/current/db_schema.sql)

**Last Updated**: 2025-11-15
