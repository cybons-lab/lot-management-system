{
  "openapi": "3.1.0",
  "info": {
    "title": "Lot Management API",
    "description": "材料ロット管理システム - バックエンドAPI",
    "version": "2.0.0"
  },
  "paths": {
    "/api/lots": {
      "get": {
        "tags": [
          "lots"
        ],
        "summary": "List Lots",
        "description": "ロット一覧取得.\n\nArgs:\n    skip: スキップ件数\n    limit: 取得件数\n    product_id: 製品ID\n    product_code: 製品コード\n    supplier_code: 仕入先コード\n    warehouse_code: 倉庫コード\n    expiry_from: 有効期限開始日\n    expiry_to: 有効期限終了日\n    with_stock: 在庫ありのみ取得するかどうか\n    db: データベースセッション\n\nロット一覧取得（v_lots_with_master ビュー使用）.\n\n製品コード・仕入先コード・倉庫コード・有効期限範囲でフィルタリング可能.\nFEFO (先入先出) 順に並べて返す.",
        "operationId": "list_lots_api_lots_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Product Id"
            }
          },
          {
            "name": "product_code",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Product Code"
            }
          },
          {
            "name": "supplier_code",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Supplier Code"
            }
          },
          {
            "name": "warehouse_code",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Code"
            }
          },
          {
            "name": "expiry_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Expiry From"
            }
          },
          {
            "name": "expiry_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Expiry To"
            }
          },
          {
            "name": "with_stock",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "With Stock"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/LotResponse"
                  },
                  "title": "Response List Lots Api Lots Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "lots"
        ],
        "summary": "Create Lot",
        "description": "ロット新規登録.\n\n- ロットマスタ登録\n- 現在在庫テーブル初期化",
        "operationId": "create_lot_api_lots_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LotCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LotResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/lots/{lot_id}": {
      "get": {
        "tags": [
          "lots"
        ],
        "summary": "Get Lot",
        "description": "ロット詳細取得（v2.2: Lot モデルから直接取得）.",
        "operationId": "get_lot_api_lots__lot_id__get",
        "parameters": [
          {
            "name": "lot_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Lot Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LotResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "lots"
        ],
        "summary": "Update Lot",
        "description": "ロット更新.",
        "operationId": "update_lot_api_lots__lot_id__put",
        "parameters": [
          {
            "name": "lot_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Lot Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LotUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LotResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "lots"
        ],
        "summary": "Delete Lot",
        "description": "ロット削除.",
        "operationId": "delete_lot_api_lots__lot_id__delete",
        "parameters": [
          {
            "name": "lot_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Lot Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/lots/{lot_id}/lock": {
      "post": {
        "tags": [
          "lots"
        ],
        "summary": "Lock Lot",
        "description": "ロットをロックする.",
        "operationId": "lock_lot_api_lots__lot_id__lock_post",
        "parameters": [
          {
            "name": "lot_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Lot Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LotLock"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LotResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/lots/{lot_id}/unlock": {
      "post": {
        "tags": [
          "lots"
        ],
        "summary": "Unlock Lot",
        "description": "ロットのロックを解除する.",
        "operationId": "unlock_lot_api_lots__lot_id__unlock_post",
        "parameters": [
          {
            "name": "lot_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Lot Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LotResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/lots/{lot_id}/movements": {
      "get": {
        "tags": [
          "lots"
        ],
        "summary": "List Lot Movements",
        "description": "ロットの在庫変動履歴取得.",
        "operationId": "list_lot_movements_api_lots__lot_id__movements_get",
        "parameters": [
          {
            "name": "lot_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Lot Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/StockHistoryResponse"
                  },
                  "title": "Response List Lot Movements Api Lots  Lot Id  Movements Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/lots/movements": {
      "post": {
        "tags": [
          "lots"
        ],
        "summary": "Create Stock Movement",
        "description": "在庫変動記録.\n\n- 在庫変動履歴追加\n- 現在在庫更新",
        "operationId": "create_stock_movement_api_lots_movements_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StockHistoryCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StockHistoryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders": {
      "get": {
        "tags": [
          "orders"
        ],
        "summary": "List Orders",
        "description": "受注一覧取得（読み取り専用）.",
        "operationId": "list_orders_api_orders_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "name": "customer_code",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Customer Code"
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/OrderWithLinesResponse"
                  },
                  "title": "Response List Orders Api Orders Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "orders"
        ],
        "summary": "Create Order",
        "description": "受注作成.",
        "operationId": "create_order_api_orders_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderWithLinesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{order_id}": {
      "get": {
        "tags": [
          "orders"
        ],
        "summary": "Get Order",
        "description": "受注詳細取得（読み取り専用、明細含む）.",
        "operationId": "get_order_api_orders__order_id__get",
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Order Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderWithLinesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{order_id}/cancel": {
      "delete": {
        "tags": [
          "orders"
        ],
        "summary": "Cancel Order",
        "description": "受注キャンセル.",
        "operationId": "cancel_order_api_orders__order_id__cancel_delete",
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Order Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{order_line_id}/allocations": {
      "post": {
        "tags": [
          "orders"
        ],
        "summary": "Save Manual Allocations",
        "description": "手動引当保存 (確定).\n\n既存の引当を一度クリアし、リクエストされた内容で再作成する（上書き保存）。\nこれにより、DB上の在庫数(allocated_quantity)とステータスが更新される。",
        "operationId": "save_manual_allocations_api_orders__order_line_id__allocations_post",
        "parameters": [
          {
            "name": "order_line_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Order Line Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ManualAllocationSavePayload"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/refresh-all-statuses": {
      "post": {
        "tags": [
          "orders"
        ],
        "summary": "Refresh All Order Line Statuses",
        "description": "全受注明細および受注のステータスを再計算・更新.\n\n既存の allocations データに基づいて OrderLine.status と Order.status を正しい値に更新します。",
        "operationId": "refresh_all_order_line_statuses_api_orders_refresh_all_statuses_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/allocations/drag-assign": {
      "post": {
        "tags": [
          "allocations"
        ],
        "summary": "Drag Assign",
        "description": "手動引当実行 (Drag & Assign) - Deprecated endpoint name but kept for compatibility.",
        "operationId": "drag_assign_api_allocations_drag_assign_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DragAssignRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DragAssignResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/allocations/{allocation_id}": {
      "delete": {
        "tags": [
          "allocations"
        ],
        "summary": "Delete Allocation",
        "description": "引当取消（DELETE API, ソフトキャンセル対応）.",
        "operationId": "delete_allocation_api_allocations__allocation_id__delete",
        "parameters": [
          {
            "name": "allocation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Allocation Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/allocations/preview": {
      "post": {
        "tags": [
          "allocations"
        ],
        "summary": "Preview Allocations",
        "description": "FEFO引当シミュレーション実行.\n\nArgs:\n    request: プレビューリクエスト（order_id）\n    db: データベースセッション\n\nReturns:\n    FefoPreviewResponse: 引当プレビュー結果",
        "operationId": "preview_allocations_api_allocations_preview_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FefoPreviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FefoPreviewResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/allocations/commit": {
      "post": {
        "tags": [
          "allocations"
        ],
        "summary": "Commit Allocation",
        "description": "引当確定（v2.2.1準拠）.\n\nFEFO・手動いずれかで作成された仮引当案を元に、実績の allocations を生成し、在庫を確定させる。\n\nArgs:\n    request: 引当確定リクエスト（order_id）\n    db: データベースセッション\n\nReturns:\n    AllocationCommitResponse: 確定結果\n\nNote:\n    - allocations テーブルにレコード作成\n    - lots.quantity から実績数量を減算\n    - stock_history への出庫履歴記録",
        "operationId": "commit_allocation_api_allocations_commit_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AllocationCommitRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AllocationCommitResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/allocation-candidates": {
      "get": {
        "tags": [
          "allocation-candidates"
        ],
        "summary": "Get Allocation Candidates",
        "description": "候補ロット一覧取得（v2.5準拠）.\n\n指定された受注明細に対して、利用可能なロット候補を返却する（プレビューのみ、DB保存なし）。\n\nv2.5 Refactor:\n- forecast に含まれない商品でも、有効在庫があれば候補ロットを返す\n- v_lot_available_qty + v_order_line_context を使用\n\nArgs:\n    order_line_id: 対象の受注明細 ID（必須）\n    strategy: 引当戦略（デフォルト \"fefo\"、将来 \"fifo\" や \"custom\" 拡張を想定）\n    limit: 最大取得件数（デフォルト200）\n    db: データベースセッション\n\nReturns:\n    CandidateLotsResponse: 候補ロット一覧\n\nNote:\n    - available_quantity > 0 のみ返却\n    - ロック済み・期限切れは除外\n    - 並び順: expiry_date NULLS LAST, received_date, lot_id（FEFO戦略の場合）",
        "operationId": "get_allocation_candidates_api_allocation_candidates_get",
        "parameters": [
          {
            "name": "order_line_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Order Line Id"
            }
          },
          {
            "name": "strategy",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "fefo",
              "title": "Strategy"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 200,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CandidateLotsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/allocation-suggestions/preview": {
      "post": {
        "tags": [
          "allocation-suggestions"
        ],
        "summary": "Preview Allocation Suggestions",
        "description": "引当推奨の生成・プレビュー.\n\nMode:\n- forecast: 指定期間のForecastに対して引当推奨を一括再生成（DB保存あり）\n- order: 指定オーダー行に対して引当プレビュー（DB保存なし）",
        "operationId": "preview_allocation_suggestions_api_allocation_suggestions_preview_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AllocationSuggestionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AllocationSuggestionPreviewResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/allocation-suggestions": {
      "get": {
        "tags": [
          "allocation-suggestions"
        ],
        "summary": "List Allocation Suggestions",
        "description": "引当推奨一覧取得.",
        "operationId": "list_allocation_suggestions_api_allocation_suggestions_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "スキップ件数",
              "default": 0,
              "title": "Skip"
            },
            "description": "スキップ件数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "取得件数上限",
              "default": 100,
              "title": "Limit"
            },
            "description": "取得件数上限"
          },
          {
            "name": "forecast_period",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "期間 (YYYY-MM)",
              "title": "Forecast Period"
            },
            "description": "期間 (YYYY-MM)"
          },
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "製品ID",
              "title": "Product Id"
            },
            "description": "製品ID"
          },
          {
            "name": "customer_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "得意先ID",
              "title": "Customer Id"
            },
            "description": "得意先ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AllocationSuggestionListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/warehouse-alloc/warehouses": {
      "get": {
        "tags": [
          "warehouse-alloc"
        ],
        "summary": "List Warehouses",
        "description": "配分対象の倉庫一覧（新しいwarehouseテーブル）を取得.",
        "operationId": "list_warehouses_api_warehouse_alloc_warehouses_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/forecasts": {
      "get": {
        "tags": [
          "forecasts"
        ],
        "summary": "List Forecasts",
        "description": "フォーキャスト一覧取得（顧客×納入先×製品でグループ化）.\n\nArgs:\n    skip: スキップ件数（ページネーション用）\n    limit: 取得件数上限\n    customer_id: 得意先IDでフィルタ\n    delivery_place_id: 納入先IDでフィルタ\n    product_id: 製品IDでフィルタ\n    db: データベースセッション\n\nReturns:\n    グループ化されたフォーキャストリスト",
        "operationId": "list_forecasts_api_forecasts_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "customer_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Customer Id"
            }
          },
          {
            "name": "delivery_place_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Delivery Place Id"
            }
          },
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Product Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForecastListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "forecasts"
        ],
        "summary": "Create Forecast",
        "description": "フォーキャスト作成.\n\nArgs:\n    data: フォーキャスト作成データ\n    db: データベースセッション\n\nReturns:\n    作成されたフォーキャスト",
        "operationId": "create_forecast_api_forecasts_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForecastCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForecastResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/forecasts/history": {
      "get": {
        "tags": [
          "forecasts"
        ],
        "summary": "List Forecast History",
        "description": "フォーキャスト履歴取得.\n\nArgs:\n    skip: スキップ件数\n    limit: 取得件数上限\n    customer_id: 得意先IDでフィルタ\n    delivery_place_id: 納入先IDでフィルタ\n    product_id: 製品IDでフィルタ\n    db: データベースセッション\n\nReturns:\n    アーカイブ済みフォーキャストリスト",
        "operationId": "list_forecast_history_api_forecasts_history_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "customer_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Customer Id"
            }
          },
          {
            "name": "delivery_place_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Delivery Place Id"
            }
          },
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Product Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ForecastHistoryResponse"
                  },
                  "title": "Response List Forecast History Api Forecasts History Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/forecasts/{forecast_id}": {
      "get": {
        "tags": [
          "forecasts"
        ],
        "summary": "Get Forecast",
        "description": "フォーキャスト詳細取得.\n\nArgs:\n    forecast_id: フォーキャストID\n    db: データベースセッション\n\nReturns:\n    フォーキャスト\n\nRaises:\n    HTTPException: 見つからない場合は404",
        "operationId": "get_forecast_api_forecasts__forecast_id__get",
        "parameters": [
          {
            "name": "forecast_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Forecast Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForecastResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "forecasts"
        ],
        "summary": "Update Forecast",
        "description": "フォーキャスト更新.\n\nArgs:\n    forecast_id: フォーキャストID\n    data: 更新データ\n    db: データベースセッション\n\nReturns:\n    更新後のフォーキャスト\n\nRaises:\n    HTTPException: 見つからない場合は404",
        "operationId": "update_forecast_api_forecasts__forecast_id__put",
        "parameters": [
          {
            "name": "forecast_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Forecast Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForecastUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForecastResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "forecasts"
        ],
        "summary": "Delete Forecast",
        "description": "フォーキャスト削除.\n\nArgs:\n    forecast_id: フォーキャストID\n    db: データベースセッション\n\nReturns:\n    None\n\nRaises:\n    HTTPException: 見つからない場合は404",
        "operationId": "delete_forecast_api_forecasts__forecast_id__delete",
        "parameters": [
          {
            "name": "forecast_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Forecast Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/forecasts/bulk-import": {
      "post": {
        "tags": [
          "forecasts"
        ],
        "summary": "Bulk Import Forecasts",
        "description": "フォーキャスト一括インポート.\n\nCSVデータからフォーキャストを一括登録します。\nreplace_existing=True の場合、同じ顧客×納入先×製品の既存データを\n履歴テーブルにアーカイブしてから新データを登録します。\n\nArgs:\n    request: インポートリクエスト（items + replace_existing）\n    db: データベースセッション\n\nReturns:\n    インポート結果サマリ",
        "operationId": "bulk_import_forecasts_api_forecasts_bulk_import_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForecastBulkImportRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForecastBulkImportSummary"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/alerts": {
      "get": {
        "tags": [
          "alerts"
        ],
        "summary": "List Alerts",
        "description": "Get list of current alerts.\n\nQuery parameters:\n- severity: Filter by severity (comma-separated: critical,warning,info)\n- category: Filter by category (comma-separated: order,inventory,lot,forecast)\n- limit: Max alerts to return (default: 50, max: 500)\n- only_open: Only show open alerts (default: true)\n\nReturns:\n    List of alert items sorted by severity and time",
        "operationId": "list_alerts_api_alerts_get",
        "parameters": [
          {
            "name": "severity",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Comma-separated severity levels: critical,warning,info",
              "title": "Severity"
            },
            "description": "Comma-separated severity levels: critical,warning,info"
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Comma-separated categories: order,inventory,lot,forecast",
              "title": "Category"
            },
            "description": "Comma-separated categories: order,inventory,lot,forecast"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Maximum number of alerts to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of alerts to return"
          },
          {
            "name": "only_open",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Only return open/active alerts",
              "default": true,
              "title": "Only Open"
            },
            "description": "Only return open/active alerts"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AlertItem"
                  },
                  "title": "Response List Alerts Api Alerts Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/alerts/summary": {
      "get": {
        "tags": [
          "alerts"
        ],
        "summary": "Get Alert Summary",
        "description": "Get summary of all current alerts.\n\nReturns:\n    Alert counts grouped by severity and category",
        "operationId": "get_alert_summary_api_alerts_summary_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AlertSummaryResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/inbound-plans": {
      "get": {
        "tags": [
          "inbound-plans"
        ],
        "summary": "List Inbound Plans",
        "description": "入荷予定一覧取得.\n\nArgs:\n    skip: スキップ件数（ページネーション用）\n    limit: 取得件数上限\n    supplier_id: 仕入先IDでフィルタ\n    product_id: 商品IDでフィルタ\n    status: ステータスでフィルタ（planned/partially_received/received/cancelled）\n    db: データベースセッション\n\nReturns:\n    入荷予定リスト",
        "operationId": "list_inbound_plans_api_inbound_plans_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "supplier_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Supplier Id"
            }
          },
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Product Id"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InboundPlanListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "inbound-plans"
        ],
        "summary": "Create Inbound Plan",
        "description": "入荷予定登録（明細も同時登録可能）.\n\nArgs:\n    plan: 入荷予定作成データ（明細含む）\n    db: データベースセッション\n\nReturns:\n    作成された入荷予定（明細含む）",
        "operationId": "create_inbound_plan_api_inbound_plans_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InboundPlanCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InboundPlanDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/inbound-plans/{plan_id}": {
      "get": {
        "tags": [
          "inbound-plans"
        ],
        "summary": "Get Inbound Plan",
        "description": "入荷予定詳細取得（明細含む）.\n\nArgs:\n    plan_id: 入荷予定ID\n    db: データベースセッション\n\nReturns:\n    入荷予定（明細含む）\n\nRaises:\n    HTTPException: 入荷予定が見つからない場合は404",
        "operationId": "get_inbound_plan_api_inbound_plans__plan_id__get",
        "parameters": [
          {
            "name": "plan_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Plan Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InboundPlanDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "inbound-plans"
        ],
        "summary": "Update Inbound Plan",
        "description": "入荷予定更新.\n\nArgs:\n    plan_id: 入荷予定ID\n    plan: 更新データ\n    db: データベースセッション\n\nReturns:\n    更新後の入荷予定\n\nRaises:\n    HTTPException: 入荷予定が見つからない場合は404",
        "operationId": "update_inbound_plan_api_inbound_plans__plan_id__put",
        "parameters": [
          {
            "name": "plan_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Plan Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InboundPlanUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InboundPlanResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "inbound-plans"
        ],
        "summary": "Delete Inbound Plan",
        "description": "入荷予定削除（カスケード削除：明細も削除される）.\n\nArgs:\n    plan_id: 入荷予定ID\n    db: データベースセッション\n\nReturns:\n    None\n\nRaises:\n    HTTPException: 入荷予定が見つからない場合は404",
        "operationId": "delete_inbound_plan_api_inbound_plans__plan_id__delete",
        "parameters": [
          {
            "name": "plan_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Plan Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/inbound-plans/sync-from-sap": {
      "post": {
        "tags": [
          "inbound-plans"
        ],
        "summary": "Sync From Sap",
        "description": "SAP から発注データを取得して入荷予定を作成.\n\nSAP の発注データ（モック）を取得し、入荷予定（InboundPlan）として\nシステムに登録します。既に存在する発注番号はスキップされます。\n\nArgs:\n    request: SAP同期リクエスト（現在パラメータなし）\n    db: データベースセッション\n\nReturns:\n    SAP同期結果（作成された入荷予定リスト、スキップ数）\n\nNote:\n    現在はモック実装です。本番環境では実際のSAP RFC/APIに接続します。",
        "operationId": "sync_from_sap_api_inbound_plans_sync_from_sap_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SAPSyncRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SAPSyncResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/inbound-plans/{plan_id}/lines": {
      "get": {
        "tags": [
          "inbound-plans"
        ],
        "summary": "List Inbound Plan Lines",
        "description": "入荷予定明細一覧取得.\n\nArgs:\n    plan_id: 入荷予定ID\n    db: データベースセッション\n\nReturns:\n    入荷予定明細のリスト",
        "operationId": "list_inbound_plan_lines_api_inbound_plans__plan_id__lines_get",
        "parameters": [
          {
            "name": "plan_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Plan Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InboundPlanLineResponse"
                  },
                  "title": "Response List Inbound Plan Lines Api Inbound Plans  Plan Id  Lines Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "inbound-plans"
        ],
        "summary": "Create Inbound Plan Line",
        "description": "入荷予定明細追加.\n\nArgs:\n    plan_id: 入荷予定ID\n    line: 明細作成データ\n    db: データベースセッション\n\nReturns:\n    作成された明細\n\nRaises:\n    HTTPException: 入荷予定が見つからない場合は404",
        "operationId": "create_inbound_plan_line_api_inbound_plans__plan_id__lines_post",
        "parameters": [
          {
            "name": "plan_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Plan Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InboundPlanLineCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InboundPlanLineResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/inbound-plans/{plan_id}/receive": {
      "post": {
        "tags": [
          "inbound-plans"
        ],
        "summary": "Receive Inbound Plan",
        "description": "入荷実績登録（ロット自動生成）.\n\nArgs:\n    plan_id: 入荷予定ID\n    request: 入荷実績データ\n    db: データベースセッション\n\nReturns:\n    入荷実績登録結果（生成されたロットIDリスト）\n\nRaises:\n    HTTPException: 入荷予定が見つからない場合は404",
        "operationId": "receive_inbound_plan_api_inbound_plans__plan_id__receive_post",
        "parameters": [
          {
            "name": "plan_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Plan Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InboundPlanReceiveRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InboundPlanReceiveResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/adjustments": {
      "post": {
        "tags": [
          "adjustments"
        ],
        "summary": "Create Adjustment",
        "description": "在庫調整登録.\n\nArgs:\n    adjustment: 在庫調整データ\n    db: データベースセッション\n\nReturns:\n    作成された在庫調整レコード\n\nNote:\n    - ロットの current_quantity を更新\n    - stock_history に履歴を記録",
        "operationId": "create_adjustment_api_adjustments_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdjustmentCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdjustmentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "adjustments"
        ],
        "summary": "List Adjustments",
        "description": "在庫調整履歴取得.\n\nArgs:\n    skip: スキップ件数（ページネーション用）\n    limit: 取得件数上限\n    lot_id: ロットIDでフィルタ\n    adjustment_type: 調整タイプでフィルタ\n    db: データベースセッション\n\nReturns:\n    在庫調整レコードのリスト",
        "operationId": "list_adjustments_api_adjustments_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "lot_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Lot Id"
            }
          },
          {
            "name": "adjustment_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Adjustment Type"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AdjustmentResponse"
                  },
                  "title": "Response List Adjustments Api Adjustments Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/adjustments/{adjustment_id}": {
      "get": {
        "tags": [
          "adjustments"
        ],
        "summary": "Get Adjustment",
        "description": "在庫調整詳細取得.\n\nArgs:\n    adjustment_id: 在庫調整ID\n    db: データベースセッション\n\nReturns:\n    在庫調整レコード\n\nRaises:\n    HTTPException: レコードが見つからない場合は404",
        "operationId": "get_adjustment_api_adjustments__adjustment_id__get",
        "parameters": [
          {
            "name": "adjustment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Adjustment Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdjustmentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/inventory-items": {
      "get": {
        "tags": [
          "inventory-items"
        ],
        "summary": "List Inventory Items",
        "description": "在庫サマリ一覧取得.\n\nArgs:\n    skip: スキップ件数（ページネーション用）\n    limit: 取得件数上限\n    product_id: 製品IDでフィルタ\n    warehouse_id: 倉庫IDでフィルタ\n    db: データベースセッション\n\nReturns:\n    在庫サマリのリスト",
        "operationId": "list_inventory_items_api_inventory_items_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Product Id"
            }
          },
          {
            "name": "warehouse_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InventoryItemResponse"
                  },
                  "title": "Response List Inventory Items Api Inventory Items Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/inventory-items/{product_id}/{warehouse_id}": {
      "get": {
        "tags": [
          "inventory-items"
        ],
        "summary": "Get Inventory Item",
        "description": "在庫サマリ詳細取得（製品ID + 倉庫ID単位）.\n\nArgs:\n    product_id: 製品ID\n    warehouse_id: 倉庫ID\n    db: データベースセッション\n\nReturns:\n    在庫サマリ\n\nRaises:\n    HTTPException: 在庫サマリが見つからない場合は404",
        "operationId": "get_inventory_item_api_inventory_items__product_id___warehouse_id__get",
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Product Id"
            }
          },
          {
            "name": "warehouse_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Warehouse Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InventoryItemResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/warehouses": {
      "get": {
        "tags": [
          "warehouses"
        ],
        "summary": "List Warehouses",
        "description": "List warehouses.",
        "operationId": "list_warehouses_api_warehouses_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/WarehouseResponse"
                  },
                  "title": "Response List Warehouses Api Warehouses Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "warehouses"
        ],
        "summary": "Create Warehouse",
        "description": "Create warehouse.",
        "operationId": "create_warehouse_api_warehouses_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WarehouseCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/warehouses/{warehouse_code}": {
      "get": {
        "tags": [
          "warehouses"
        ],
        "summary": "Get Warehouse",
        "description": "Get warehouse by code.",
        "operationId": "get_warehouse_api_warehouses__warehouse_code__get",
        "parameters": [
          {
            "name": "warehouse_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Warehouse Code"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "warehouses"
        ],
        "summary": "Update Warehouse",
        "description": "Update warehouse.",
        "operationId": "update_warehouse_api_warehouses__warehouse_code__put",
        "parameters": [
          {
            "name": "warehouse_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Warehouse Code"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WarehouseUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "warehouses"
        ],
        "summary": "Delete Warehouse",
        "description": "Delete warehouse.",
        "operationId": "delete_warehouse_api_warehouses__warehouse_code__delete",
        "parameters": [
          {
            "name": "warehouse_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Warehouse Code"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/suppliers": {
      "get": {
        "tags": [
          "suppliers"
        ],
        "summary": "List Suppliers",
        "description": "List suppliers.",
        "operationId": "list_suppliers_api_suppliers_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SupplierResponse"
                  },
                  "title": "Response List Suppliers Api Suppliers Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "suppliers"
        ],
        "summary": "Create Supplier",
        "description": "Create supplier.",
        "operationId": "create_supplier_api_suppliers_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SupplierCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SupplierResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/suppliers/{supplier_code}": {
      "get": {
        "tags": [
          "suppliers"
        ],
        "summary": "Get Supplier",
        "description": "Get supplier by code.",
        "operationId": "get_supplier_api_suppliers__supplier_code__get",
        "parameters": [
          {
            "name": "supplier_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Supplier Code"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SupplierResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "suppliers"
        ],
        "summary": "Update Supplier",
        "description": "Update supplier.",
        "operationId": "update_supplier_api_suppliers__supplier_code__put",
        "parameters": [
          {
            "name": "supplier_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Supplier Code"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SupplierUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SupplierResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "suppliers"
        ],
        "summary": "Delete Supplier",
        "description": "Delete supplier.",
        "operationId": "delete_supplier_api_suppliers__supplier_code__delete",
        "parameters": [
          {
            "name": "supplier_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Supplier Code"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/customers": {
      "get": {
        "tags": [
          "customers"
        ],
        "summary": "List Customers",
        "description": "Return customers.",
        "operationId": "list_customers_api_customers_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CustomerResponse"
                  },
                  "title": "Response List Customers Api Customers Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "customers"
        ],
        "summary": "Create Customer",
        "description": "Create a new customer.",
        "operationId": "create_customer_api_customers_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CustomerCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomerResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/customers/{customer_code}": {
      "get": {
        "tags": [
          "customers"
        ],
        "summary": "Get Customer",
        "description": "Fetch a customer by code.",
        "operationId": "get_customer_api_customers__customer_code__get",
        "parameters": [
          {
            "name": "customer_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Customer Code"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomerResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "customers"
        ],
        "summary": "Update Customer",
        "description": "Update a customer.",
        "operationId": "update_customer_api_customers__customer_code__put",
        "parameters": [
          {
            "name": "customer_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Customer Code"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CustomerUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomerResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "customers"
        ],
        "summary": "Delete Customer",
        "description": "Delete a customer.",
        "operationId": "delete_customer_api_customers__customer_code__delete",
        "parameters": [
          {
            "name": "customer_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Customer Code"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/products": {
      "get": {
        "tags": [
          "products"
        ],
        "summary": "List Products",
        "description": "Return a paginated list of products.",
        "operationId": "list_products_api_products_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Search"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductOut"
                  },
                  "title": "Response List Products Api Products Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "products"
        ],
        "summary": "Create Product",
        "description": "Create a new product.",
        "operationId": "create_product_api_products_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/{product_code}": {
      "get": {
        "tags": [
          "products"
        ],
        "summary": "Get Product",
        "description": "Fetch a product by its code (maker_part_code).",
        "operationId": "get_product_api_products__product_code__get",
        "parameters": [
          {
            "name": "product_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Product Code"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "products"
        ],
        "summary": "Update Product",
        "description": "Update an existing product (by maker_part_code).",
        "operationId": "update_product_api_products__product_code__put",
        "parameters": [
          {
            "name": "product_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Product Code"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "products"
        ],
        "summary": "Delete Product",
        "description": "Delete a product by its code (maker_part_code).",
        "operationId": "delete_product_api_products__product_code__delete",
        "parameters": [
          {
            "name": "product_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Product Code"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/customer-items": {
      "get": {
        "tags": [
          "customer-items"
        ],
        "summary": "List Customer Items",
        "description": "得意先品番マッピング一覧取得.\n\nArgs:\n    skip: スキップ件数\n    limit: 取得件数上限\n    customer_id: 得意先IDでフィルタ（オプション）\n    product_id: 製品IDでフィルタ（オプション）\n    db: データベースセッション\n\nReturns:\n    得意先品番マッピングのリスト",
        "operationId": "list_customer_items_api_customer_items_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "customer_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "得意先IDでフィルタ",
              "title": "Customer Id"
            },
            "description": "得意先IDでフィルタ"
          },
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "製品IDでフィルタ",
              "title": "Product Id"
            },
            "description": "製品IDでフィルタ"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CustomerItemResponse"
                  },
                  "title": "Response List Customer Items Api Customer Items Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "customer-items"
        ],
        "summary": "Create Customer Item",
        "description": "得意先品番マッピング登録.\n\nArgs:\n    item: 登録する品番マッピング情報\n    db: データベースセッション\n\nReturns:\n    登録された品番マッピング\n\nRaises:\n    HTTPException: 既に同じマッピングが存在する場合",
        "operationId": "create_customer_item_api_customer_items_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CustomerItemCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomerItemResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/customer-items/{customer_id}": {
      "get": {
        "tags": [
          "customer-items"
        ],
        "summary": "List Customer Items By Customer",
        "description": "特定得意先の品番マッピング一覧取得.\n\nArgs:\n    customer_id: 得意先ID\n    db: データベースセッション\n\nReturns:\n    該当得意先の品番マッピングリスト",
        "operationId": "list_customer_items_by_customer_api_customer_items__customer_id__get",
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Customer Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CustomerItemResponse"
                  },
                  "title": "Response List Customer Items By Customer Api Customer Items  Customer Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/customer-items/{customer_id}/{external_product_code}": {
      "put": {
        "tags": [
          "customer-items"
        ],
        "summary": "Update Customer Item",
        "description": "得意先品番マッピング更新.\n\nArgs:\n    customer_id: 得意先ID\n    external_product_code: 得意先品番\n    item: 更新する品番マッピング情報\n    db: データベースセッション\n\nReturns:\n    更新された品番マッピング\n\nRaises:\n    HTTPException: マッピングが存在しない場合",
        "operationId": "update_customer_item_api_customer_items__customer_id___external_product_code__put",
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Customer Id"
            }
          },
          {
            "name": "external_product_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "External Product Code"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CustomerItemUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomerItemResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "customer-items"
        ],
        "summary": "Delete Customer Item",
        "description": "得意先品番マッピング削除.\n\nArgs:\n    customer_id: 得意先ID\n    external_product_code: 得意先品番\n    db: データベースセッション\n\nRaises:\n    HTTPException: マッピングが存在しない場合",
        "operationId": "delete_customer_item_api_customer_items__customer_id___external_product_code__delete",
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Customer Id"
            }
          },
          {
            "name": "external_product_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "External Product Code"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/users": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "List Users",
        "description": "ユーザー一覧取得.\n\nArgs:\n    skip: スキップ件数\n    limit: 取得件数上限\n    is_active: 有効フラグでフィルタ（オプション）\n    db: データベースセッション\n\nReturns:\n    ユーザーのリスト",
        "operationId": "list_users_api_users_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "is_active",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "有効フラグでフィルタ",
              "title": "Is Active"
            },
            "description": "有効フラグでフィルタ"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserResponse"
                  },
                  "title": "Response List Users Api Users Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "users"
        ],
        "summary": "Create User",
        "description": "ユーザー作成.\n\nArgs:\n    user: 作成するユーザー情報\n    db: データベースセッション\n\nReturns:\n    作成されたユーザー\n\nRaises:\n    HTTPException: ユーザー名またはメールアドレスが既に存在する場合",
        "operationId": "create_user_api_users_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{user_id}": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "Get User",
        "description": "ユーザー詳細取得.\n\nArgs:\n    user_id: ユーザーID\n    db: データベースセッション\n\nReturns:\n    ユーザー詳細（ロール情報含む）\n\nRaises:\n    HTTPException: ユーザーが存在しない場合",
        "operationId": "get_user_api_users__user_id__get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserWithRoles"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "users"
        ],
        "summary": "Update User",
        "description": "ユーザー更新.\n\nArgs:\n    user_id: ユーザーID\n    user: 更新するユーザー情報\n    db: データベースセッション\n\nReturns:\n    更新されたユーザー\n\nRaises:\n    HTTPException: ユーザーが存在しない場合",
        "operationId": "update_user_api_users__user_id__put",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "users"
        ],
        "summary": "Delete User",
        "description": "ユーザー削除.\n\nArgs:\n    user_id: ユーザーID\n    db: データベースセッション\n\nRaises:\n    HTTPException: ユーザーが存在しない場合",
        "operationId": "delete_user_api_users__user_id__delete",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{user_id}/roles": {
      "patch": {
        "tags": [
          "users"
        ],
        "summary": "Assign User Roles",
        "description": "ユーザーへのロール割当.\n\nArgs:\n    user_id: ユーザーID\n    assignment: 割り当てるロールID\n    db: データベースセッション\n\nReturns:\n    ロール割り当て後のユーザー情報\n\nRaises:\n    HTTPException: ユーザーが存在しない場合",
        "operationId": "assign_user_roles_api_users__user_id__roles_patch",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRoleAssignment"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserWithRoles"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/roles": {
      "get": {
        "tags": [
          "roles"
        ],
        "summary": "List Roles",
        "description": "ロール一覧取得.\n\nArgs:\n    skip: スキップ件数\n    limit: 取得件数上限\n    db: データベースセッション\n\nReturns:\n    ロールのリスト",
        "operationId": "list_roles_api_roles_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RoleResponse"
                  },
                  "title": "Response List Roles Api Roles Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "roles"
        ],
        "summary": "Create Role",
        "description": "ロール作成.\n\nArgs:\n    role: 作成するロール情報\n    db: データベースセッション\n\nReturns:\n    作成されたロール\n\nRaises:\n    HTTPException: ロールコードが既に存在する場合",
        "operationId": "create_role_api_roles_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RoleCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/roles/{role_id}": {
      "get": {
        "tags": [
          "roles"
        ],
        "summary": "Get Role",
        "description": "ロール詳細取得.\n\nArgs:\n    role_id: ロールID\n    db: データベースセッション\n\nReturns:\n    ロール詳細\n\nRaises:\n    HTTPException: ロールが存在しない場合",
        "operationId": "get_role_api_roles__role_id__get",
        "parameters": [
          {
            "name": "role_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Role Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "roles"
        ],
        "summary": "Update Role",
        "description": "ロール更新.\n\nArgs:\n    role_id: ロールID\n    role: 更新するロール情報\n    db: データベースセッション\n\nReturns:\n    更新されたロール\n\nRaises:\n    HTTPException: ロールが存在しない場合",
        "operationId": "update_role_api_roles__role_id__put",
        "parameters": [
          {
            "name": "role_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Role Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RoleUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "roles"
        ],
        "summary": "Delete Role",
        "description": "ロール削除.\n\nArgs:\n    role_id: ロールID\n    db: データベースセッション\n\nRaises:\n    HTTPException: ロールが存在しない場合、またはロールが使用中の場合",
        "operationId": "delete_role_api_roles__role_id__delete",
        "parameters": [
          {
            "name": "role_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Role Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/assignments/user/{user_id}/suppliers": {
      "get": {
        "tags": [
          "assignments"
        ],
        "summary": "Get User Suppliers",
        "description": "ユーザーの担当仕入先一覧を取得.",
        "operationId": "get_user_suppliers_api_assignments_user__user_id__suppliers_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserSupplierAssignmentResponse"
                  },
                  "title": "Response Get User Suppliers Api Assignments User  User Id  Suppliers Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/assignments/supplier/{supplier_id}/users": {
      "get": {
        "tags": [
          "assignments"
        ],
        "summary": "Get Supplier Users",
        "description": "仕入先の担当者一覧を取得.",
        "operationId": "get_supplier_users_api_assignments_supplier__supplier_id__users_get",
        "parameters": [
          {
            "name": "supplier_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Supplier Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserSupplierAssignmentResponse"
                  },
                  "title": "Response Get Supplier Users Api Assignments Supplier  Supplier Id  Users Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/assignments/": {
      "post": {
        "tags": [
          "assignments"
        ],
        "summary": "Create Assignment",
        "description": "担当割り当てを作成.",
        "operationId": "create_assignment_api_assignments__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserSupplierAssignmentCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserSupplierAssignmentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/assignments/{assignment_id}": {
      "put": {
        "tags": [
          "assignments"
        ],
        "summary": "Update Assignment",
        "description": "担当割り当てを更新（主担当の変更など）.",
        "operationId": "update_assignment_api_assignments__assignment_id__put",
        "parameters": [
          {
            "name": "assignment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Assignment Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserSupplierAssignmentUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserSupplierAssignmentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "assignments"
        ],
        "summary": "Delete Assignment",
        "description": "担当割り当てを削除.",
        "operationId": "delete_assignment_api_assignments__assignment_id__delete",
        "parameters": [
          {
            "name": "assignment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Assignment Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Delete Assignment Api Assignments  Assignment Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/assignments/supplier/{supplier_id}/set-primary/{user_id}": {
      "post": {
        "tags": [
          "assignments"
        ],
        "summary": "Set Primary User",
        "description": "仕入先の主担当者を設定.",
        "operationId": "set_primary_user_api_assignments_supplier__supplier_id__set_primary__user_id__post",
        "parameters": [
          {
            "name": "supplier_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Supplier Id"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserSupplierAssignmentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/admin/stats": {
      "get": {
        "tags": [
          "admin"
        ],
        "summary": "Get Dashboard Stats",
        "description": "ダッシュボード用の統計情報を返す.\n\n在庫総数は lots.current_quantity の合計値を使用。\nlot_current_stock ビューは使用しない（v2.2 以降は廃止）。",
        "operationId": "get_dashboard_stats_api_admin_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardStatsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/admin/reset-database": {
      "post": {
        "tags": [
          "admin"
        ],
        "summary": "Reset Database",
        "description": "データベースリセット（開発環境のみ）\n- テーブル構造は保持したまま、全データを削除\n- alembic_versionは保持（マイグレーション履歴を維持）\n- TRUNCATE ... RESTART IDENTITY CASCADEで高速にデータをクリア.",
        "operationId": "reset_database_api_admin_reset_database_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseBase"
                }
              }
            }
          }
        }
      }
    },
    "/api/admin/diagnostics/allocatable-lots": {
      "get": {
        "tags": [
          "admin"
        ],
        "summary": "Get Allocatable Lots",
        "description": "診断API: 引当可能ロット一覧（読み取り専用）.\n\nv2.2: v_lot_details ビューを使用して在庫情報を取得。\nlot_current_stock ビューは廃止。\n\nArgs:\n    prod: 製品コード（任意フィルタ）\n    wh: 倉庫コード（任意フィルタ）\n    limit: 最大取得件数（デフォルト100）\n    db: データベースセッション\n\nReturns:\n    CandidateLotsResponse: 引当可能ロット一覧\n\nNote:\n    - 読み取り専用トランザクション\n    - available_quantity > 0 のみ\n    - 期限切れは除外",
        "operationId": "get_allocatable_lots_api_admin_diagnostics_allocatable_lots_get",
        "parameters": [
          {
            "name": "prod",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Prod"
            }
          },
          {
            "name": "wh",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Wh"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CandidateLotsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/admin/healthcheck/db-counts": {
      "get": {
        "tags": [
          "admin"
        ],
        "summary": "Get Db Counts",
        "description": "各テーブルのレコード件数を返す.\n\nReturns:\n    dict: テーブル名をキー、件数を値とする辞書",
        "operationId": "get_db_counts_api_admin_healthcheck_db_counts_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/admin/healthcheck/masters": {
      "get": {
        "tags": [
          "admin"
        ],
        "summary": "Get Masters Health",
        "description": "マスタテーブルのヘルスチェック.\n\nReturns:\n    dict: 各マスタテーブルの件数とサンプルデータ（先頭5件のコード）",
        "operationId": "get_masters_health_api_admin_healthcheck_masters_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/admin/test-data/generate": {
      "post": {
        "summary": "Generate Test Data Endpoint",
        "description": "Generate test data for development.\nWARNING: This will DELETE all existing data in related tables.",
        "operationId": "generate_test_data_endpoint_api_admin_test_data_generate_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/healthz": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Healthz",
        "operationId": "healthz_api_healthz_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/readyz": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Readyz",
        "operationId": "readyz_api_readyz_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/health": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Health",
        "operationId": "health_api_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/operation-logs": {
      "get": {
        "tags": [
          "logs"
        ],
        "summary": "List Operation Logs",
        "description": "操作ログ一覧取得.\n\nArgs:\n    skip: スキップ件数\n    limit: 取得件数上限\n    user_id: ユーザーIDでフィルタ（オプション）\n    operation_type: 操作種別でフィルタ（オプション）\n    target_table: 対象テーブル名でフィルタ（オプション）\n    start_date: 開始日時（オプション）\n    end_date: 終了日時（オプション）\n    db: データベースセッション\n\nReturns:\n    操作ログのリスト（ページネーション付き）",
        "operationId": "list_operation_logs_api_operation_logs_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "スキップ件数",
              "default": 0,
              "title": "Skip"
            },
            "description": "スキップ件数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "取得件数上限",
              "default": 100,
              "title": "Limit"
            },
            "description": "取得件数上限"
          },
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "ユーザーIDでフィルタ",
              "title": "User Id"
            },
            "description": "ユーザーIDでフィルタ"
          },
          {
            "name": "operation_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "操作種別でフィルタ",
              "title": "Operation Type"
            },
            "description": "操作種別でフィルタ"
          },
          {
            "name": "target_table",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "対象テーブル名でフィルタ",
              "title": "Target Table"
            },
            "description": "対象テーブル名でフィルタ"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "開始日時（この日時以降）",
              "title": "Start Date"
            },
            "description": "開始日時（この日時以降）"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "終了日時（この日時以前）",
              "title": "End Date"
            },
            "description": "終了日時（この日時以前）"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OperationLogListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/operation-logs/{log_id}": {
      "get": {
        "tags": [
          "logs"
        ],
        "summary": "Get Operation Log",
        "description": "操作ログ詳細取得.\n\nArgs:\n    log_id: ログID\n    db: データベースセッション\n\nReturns:\n    操作ログ詳細\n\nRaises:\n    HTTPException: ログが存在しない場合",
        "operationId": "get_operation_log_api_operation_logs__log_id__get",
        "parameters": [
          {
            "name": "log_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Log Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OperationLogResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/master-change-logs": {
      "get": {
        "tags": [
          "logs"
        ],
        "summary": "List Master Change Logs",
        "description": "マスタ変更履歴一覧取得.\n\nArgs:\n    skip: スキップ件数\n    limit: 取得件数上限\n    table_name: テーブル名でフィルタ（オプション）\n    record_id: レコードIDでフィルタ（オプション）\n    change_type: 変更種別でフィルタ（オプション）\n    changed_by: 変更者でフィルタ（オプション）\n    start_date: 開始日時（オプション）\n    end_date: 終了日時（オプション）\n    db: データベースセッション\n\nReturns:\n    マスタ変更履歴のリスト（ページネーション付き）",
        "operationId": "list_master_change_logs_api_master_change_logs_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "スキップ件数",
              "default": 0,
              "title": "Skip"
            },
            "description": "スキップ件数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "取得件数上限",
              "default": 100,
              "title": "Limit"
            },
            "description": "取得件数上限"
          },
          {
            "name": "table_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "テーブル名でフィルタ",
              "title": "Table Name"
            },
            "description": "テーブル名でフィルタ"
          },
          {
            "name": "record_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "レコードIDでフィルタ",
              "title": "Record Id"
            },
            "description": "レコードIDでフィルタ"
          },
          {
            "name": "change_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "変更種別でフィルタ",
              "title": "Change Type"
            },
            "description": "変更種別でフィルタ"
          },
          {
            "name": "changed_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "変更者でフィルタ",
              "title": "Changed By"
            },
            "description": "変更者でフィルタ"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "開始日時（この日時以降）",
              "title": "Start Date"
            },
            "description": "開始日時（この日時以降）"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "終了日時（この日時以前）",
              "title": "End Date"
            },
            "description": "終了日時（この日時以前）"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MasterChangeLogListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/master-change-logs/{change_log_id}": {
      "get": {
        "tags": [
          "logs"
        ],
        "summary": "Get Master Change Log",
        "description": "マスタ変更履歴詳細取得.\n\nArgs:\n    change_log_id: 変更ログID\n    db: データベースセッション\n\nReturns:\n    マスタ変更履歴詳細\n\nRaises:\n    HTTPException: ログが存在しない場合",
        "operationId": "get_master_change_log_api_master_change_logs__change_log_id__get",
        "parameters": [
          {
            "name": "change_log_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Change Log Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MasterChangeLogResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/master-change-logs/record/{table_name}/{record_id}": {
      "get": {
        "tags": [
          "logs"
        ],
        "summary": "Get Master Change Logs By Record",
        "description": "特定レコードのマスタ変更履歴取得.\n\nArgs:\n    table_name: テーブル名\n    record_id: レコードID\n    db: データベースセッション\n\nReturns:\n    マスタ変更履歴のリスト（降順）",
        "operationId": "get_master_change_logs_by_record_api_master_change_logs_record__table_name___record_id__get",
        "parameters": [
          {
            "name": "table_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Table Name"
            }
          },
          {
            "name": "record_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Record Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MasterChangeLogResponse"
                  },
                  "title": "Response Get Master Change Logs By Record Api Master Change Logs Record  Table Name   Record Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/business-rules": {
      "get": {
        "tags": [
          "business-rules"
        ],
        "summary": "List Business Rules",
        "description": "業務ルール一覧取得.\n\nArgs:\n    skip: スキップ件数\n    limit: 取得件数上限\n    rule_type: ルール種別でフィルタ（オプション）\n    is_active: 有効フラグでフィルタ（オプション）\n    db: データベースセッション\n\nReturns:\n    業務ルールのリスト",
        "operationId": "list_business_rules_api_business_rules_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "スキップ件数",
              "default": 0,
              "title": "Skip"
            },
            "description": "スキップ件数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "取得件数上限",
              "default": 100,
              "title": "Limit"
            },
            "description": "取得件数上限"
          },
          {
            "name": "rule_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "ルール種別でフィルタ",
              "title": "Rule Type"
            },
            "description": "ルール種別でフィルタ"
          },
          {
            "name": "is_active",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "有効フラグでフィルタ",
              "title": "Is Active"
            },
            "description": "有効フラグでフィルタ"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BusinessRuleListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "business-rules"
        ],
        "summary": "Create Business Rule",
        "description": "業務ルール作成.\n\nArgs:\n    rule: 作成する業務ルール情報\n    db: データベースセッション\n\nReturns:\n    作成された業務ルール\n\nRaises:\n    HTTPException: ルールコードが重複している場合",
        "operationId": "create_business_rule_api_business_rules_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BusinessRuleCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BusinessRuleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/business-rules/{rule_id}": {
      "get": {
        "tags": [
          "business-rules"
        ],
        "summary": "Get Business Rule",
        "description": "業務ルール詳細取得（ID指定）.\n\nArgs:\n    rule_id: ルールID\n    db: データベースセッション\n\nReturns:\n    業務ルール詳細\n\nRaises:\n    HTTPException: ルールが存在しない場合",
        "operationId": "get_business_rule_api_business_rules__rule_id__get",
        "parameters": [
          {
            "name": "rule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Rule Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BusinessRuleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "business-rules"
        ],
        "summary": "Update Business Rule",
        "description": "業務ルール更新（ID指定）.\n\nArgs:\n    rule_id: ルールID\n    rule: 更新する業務ルール情報\n    db: データベースセッション\n\nReturns:\n    更新された業務ルール\n\nRaises:\n    HTTPException: ルールが存在しない場合",
        "operationId": "update_business_rule_api_business_rules__rule_id__put",
        "parameters": [
          {
            "name": "rule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Rule Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BusinessRuleUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BusinessRuleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "business-rules"
        ],
        "summary": "Delete Business Rule",
        "description": "業務ルール削除.\n\nArgs:\n    rule_id: ルールID\n    db: データベースセッション\n\nRaises:\n    HTTPException: ルールが存在しない場合",
        "operationId": "delete_business_rule_api_business_rules__rule_id__delete",
        "parameters": [
          {
            "name": "rule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Rule Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/business-rules/code/{rule_code}": {
      "get": {
        "tags": [
          "business-rules"
        ],
        "summary": "Get Business Rule By Code",
        "description": "業務ルール詳細取得（コード指定）.\n\nArgs:\n    rule_code: ルールコード\n    db: データベースセッション\n\nReturns:\n    業務ルール詳細\n\nRaises:\n    HTTPException: ルールが存在しない場合",
        "operationId": "get_business_rule_by_code_api_business_rules_code__rule_code__get",
        "parameters": [
          {
            "name": "rule_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Rule Code"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BusinessRuleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "business-rules"
        ],
        "summary": "Update Business Rule By Code",
        "description": "業務ルール更新（コード指定）.\n\nArgs:\n    rule_code: ルールコード\n    rule: 更新する業務ルール情報\n    db: データベースセッション\n\nReturns:\n    更新された業務ルール\n\nRaises:\n    HTTPException: ルールが存在しない場合",
        "operationId": "update_business_rule_by_code_api_business_rules_code__rule_code__put",
        "parameters": [
          {
            "name": "rule_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Rule Code"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BusinessRuleUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BusinessRuleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/business-rules/{rule_id}/toggle": {
      "patch": {
        "tags": [
          "business-rules"
        ],
        "summary": "Toggle Business Rule Active",
        "description": "業務ルール有効/無効切り替え.\n\nArgs:\n    rule_id: ルールID\n    db: データベースセッション\n\nReturns:\n    更新された業務ルール\n\nRaises:\n    HTTPException: ルールが存在しない場合",
        "operationId": "toggle_business_rule_active_api_business_rules__rule_id__toggle_patch",
        "parameters": [
          {
            "name": "rule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Rule Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BusinessRuleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/batch-jobs": {
      "get": {
        "tags": [
          "batch-jobs"
        ],
        "summary": "List Batch Jobs",
        "description": "バッチジョブ一覧取得.\n\nArgs:\n    skip: スキップ件数\n    limit: 取得件数上限\n    job_type: ジョブ種別でフィルタ（オプション）\n    status: ステータスでフィルタ（オプション）\n    db: データベースセッション\n\nReturns:\n    バッチジョブのリスト（ページネーション付き）",
        "operationId": "list_batch_jobs_api_batch_jobs_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "スキップ件数",
              "default": 0,
              "title": "Skip"
            },
            "description": "スキップ件数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "取得件数上限",
              "default": 100,
              "title": "Limit"
            },
            "description": "取得件数上限"
          },
          {
            "name": "job_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "ジョブ種別でフィルタ",
              "title": "Job Type"
            },
            "description": "ジョブ種別でフィルタ"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "ステータスでフィルタ",
              "title": "Status"
            },
            "description": "ステータスでフィルタ"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BatchJobListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "batch-jobs"
        ],
        "summary": "Create Batch Job",
        "description": "バッチジョブ作成.\n\nArgs:\n    job: 作成するバッチジョブ情報\n    db: データベースセッション\n\nReturns:\n    作成されたバッチジョブ",
        "operationId": "create_batch_job_api_batch_jobs_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchJobCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BatchJobResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/batch-jobs/{job_id}": {
      "get": {
        "tags": [
          "batch-jobs"
        ],
        "summary": "Get Batch Job",
        "description": "バッチジョブ詳細取得.\n\nArgs:\n    job_id: ジョブID\n    db: データベースセッション\n\nReturns:\n    バッチジョブ詳細\n\nRaises:\n    HTTPException: ジョブが存在しない場合",
        "operationId": "get_batch_job_api_batch_jobs__job_id__get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BatchJobResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "batch-jobs"
        ],
        "summary": "Delete Batch Job",
        "description": "バッチジョブ削除.\n\nArgs:\n    job_id: ジョブID\n    db: データベースセッション\n\nRaises:\n    HTTPException: ジョブが存在しない場合",
        "operationId": "delete_batch_job_api_batch_jobs__job_id__delete",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/batch-jobs/{job_id}/execute": {
      "post": {
        "tags": [
          "batch-jobs"
        ],
        "summary": "Execute Batch Job",
        "description": "バッチジョブ実行.\n\n注意: これはスタブ実装です。本番環境では、非同期ジョブキュー（Celery、RQ等）を使用してください。\n\nArgs:\n    job_id: ジョブID\n    request: 実行リクエスト（パラメータ上書き可能）\n    db: データベースセッション\n\nReturns:\n    実行結果\n\nRaises:\n    HTTPException: ジョブが存在しない場合",
        "operationId": "execute_batch_job_api_batch_jobs__job_id__execute_post",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Job Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/BatchJobExecuteRequest"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Request"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BatchJobExecuteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/batch-jobs/{job_id}/cancel": {
      "post": {
        "tags": [
          "batch-jobs"
        ],
        "summary": "Cancel Batch Job",
        "description": "バッチジョブキャンセル.\n\nArgs:\n    job_id: ジョブID\n    db: データベースセッション\n\nReturns:\n    キャンセルされたバッチジョブ\n\nRaises:\n    HTTPException: ジョブが存在しないか、キャンセルできない状態の場合",
        "operationId": "cancel_batch_job_api_batch_jobs__job_id__cancel_post",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BatchJobResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/batch-jobs/inventory-sync/execute": {
      "post": {
        "tags": [
          "batch-jobs"
        ],
        "summary": "Execute Inventory Sync Direct",
        "description": "SAP在庫同期を即座に実行する（バッチジョブ経由なし）.\n\n管理画面から簡単に実行できるよう、直接実行エンドポイントを提供。\nバッチジョブレコードは作成せず、即座に同期処理を実行して結果を返す。\n\nArgs:\n    db: データベースセッション\n\nReturns:\n    dict: 実行結果の詳細\n        - checked_products: チェックした商品数\n        - discrepancies_found: 発見された差異数\n        - alerts_created: 作成されたアラート数\n        - details: 差異の詳細リスト",
        "operationId": "execute_inventory_sync_direct_api_batch_jobs_inventory_sync_execute_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/integration/sap/sales-orders": {
      "post": {
        "tags": [
          "integration"
        ],
        "summary": "Register Sales Orders",
        "description": "Register sales orders to SAP (Mock implementation).\n\nThis endpoint simulates the registration of sales orders to SAP ERP.\nIt returns dummy SAP order numbers for the provided order IDs.",
        "operationId": "register_sales_orders_api_integration_sap_sales_orders_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SAPOrderRegistrationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SAPOrderRegistrationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "ルートエンドポイント.",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AdjustmentCreate": {
        "properties": {
          "lot_id": {
            "type": "integer",
            "title": "Lot Id"
          },
          "adjustment_type": {
            "$ref": "#/components/schemas/AdjustmentType"
          },
          "adjusted_quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "title": "Adjusted Quantity"
          },
          "reason": {
            "type": "string",
            "title": "Reason"
          },
          "adjusted_by": {
            "type": "integer",
            "title": "Adjusted By"
          }
        },
        "type": "object",
        "required": [
          "lot_id",
          "adjustment_type",
          "adjusted_quantity",
          "reason",
          "adjusted_by"
        ],
        "title": "AdjustmentCreate",
        "description": "Payload for recording adjustments."
      },
      "AdjustmentResponse": {
        "properties": {
          "lot_id": {
            "type": "integer",
            "title": "Lot Id"
          },
          "adjustment_type": {
            "$ref": "#/components/schemas/AdjustmentType"
          },
          "adjusted_quantity": {
            "type": "string",
            "title": "Adjusted Quantity"
          },
          "reason": {
            "type": "string",
            "title": "Reason"
          },
          "adjusted_by": {
            "type": "integer",
            "title": "Adjusted By"
          },
          "adjustment_id": {
            "type": "integer",
            "title": "Adjustment Id"
          },
          "adjusted_at": {
            "type": "string",
            "format": "date-time",
            "title": "Adjusted At"
          }
        },
        "type": "object",
        "required": [
          "lot_id",
          "adjustment_type",
          "adjusted_quantity",
          "reason",
          "adjusted_by",
          "adjustment_id",
          "adjusted_at"
        ],
        "title": "AdjustmentResponse",
        "description": "API response model for adjustments."
      },
      "AdjustmentType": {
        "type": "string",
        "enum": [
          "physical_count",
          "damage",
          "loss",
          "found",
          "other"
        ],
        "title": "AdjustmentType",
        "description": "Allowed adjustment reason codes."
      },
      "AlertItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique alert identifier"
          },
          "category": {
            "type": "string",
            "enum": [
              "order",
              "inventory",
              "lot",
              "forecast"
            ],
            "title": "Category",
            "description": "Alert category"
          },
          "type": {
            "type": "string",
            "title": "Type",
            "description": "Specific alert type code"
          },
          "severity": {
            "type": "string",
            "enum": [
              "info",
              "warning",
              "critical"
            ],
            "title": "Severity",
            "description": "Alert severity level"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Short alert description"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Detailed explanation",
            "default": ""
          },
          "occurred_at": {
            "type": "string",
            "format": "date-time",
            "title": "Occurred At",
            "description": "Alert occurrence timestamp"
          },
          "target": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AlertTargetOrder"
              },
              {
                "$ref": "#/components/schemas/AlertTargetInventoryItem"
              },
              {
                "$ref": "#/components/schemas/AlertTargetLot"
              },
              {
                "$ref": "#/components/schemas/AlertTargetForecastDaily"
              }
            ],
            "title": "Target",
            "description": "Target resource for navigation"
          }
        },
        "type": "object",
        "required": [
          "id",
          "category",
          "type",
          "severity",
          "title",
          "occurred_at",
          "target"
        ],
        "title": "AlertItem",
        "description": "Represents a single alert item.\n\nAttributes:\n    id: Unique identifier for the alert\n    category: Alert category (order, inventory, lot, forecast)\n    type: Specific alert type code (e.g., 'UNFORECASTED_ORDER_STALE')\n    severity: Alert severity level\n    title: Short description displayed in alert list\n    message: Detailed explanation (optional)\n    occurred_at: When the alert condition was detected\n    target: Resource this alert is about (for navigation)",
        "example": {
          "category": "order",
          "id": "alert_order_12345_20231124",
          "message": "受注番号 ORD-12345 はフォーキャストに紐づいておらず、30分以上未処理です。",
          "occurred_at": "2023-11-24T10:30:00Z",
          "severity": "critical",
          "target": {
            "id": 12345,
            "resource_type": "order"
          },
          "title": "無予測受注が30分以上未処理",
          "type": "UNFORECASTED_ORDER_STALE"
        }
      },
      "AlertSummaryResponse": {
        "properties": {
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total alert count"
          },
          "by_severity": {
            "additionalProperties": {
              "type": "integer"
            },
            "propertyNames": {
              "enum": [
                "info",
                "warning",
                "critical"
              ]
            },
            "type": "object",
            "title": "By Severity",
            "description": "Alert counts by severity"
          },
          "by_category": {
            "additionalProperties": {
              "type": "integer"
            },
            "propertyNames": {
              "enum": [
                "order",
                "inventory",
                "lot",
                "forecast"
              ]
            },
            "type": "object",
            "title": "By Category",
            "description": "Alert counts by category"
          }
        },
        "type": "object",
        "required": [
          "total"
        ],
        "title": "AlertSummaryResponse",
        "description": "Summary of alert counts by severity and category.\n\nAttributes:\n    total: Total number of alerts\n    by_severity: Count of alerts grouped by severity\n    by_category: Count of alerts grouped by category",
        "example": {
          "by_category": {
            "forecast": 5,
            "inventory": 7,
            "lot": 6,
            "order": 5
          },
          "by_severity": {
            "critical": 3,
            "info": 8,
            "warning": 12
          },
          "total": 23
        }
      },
      "AlertTargetForecastDaily": {
        "properties": {
          "resource_type": {
            "type": "string",
            "const": "forecast_daily",
            "title": "Resource Type",
            "default": "forecast_daily"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "AlertTargetForecastDaily",
        "description": "Alert target for daily forecast resources."
      },
      "AlertTargetInventoryItem": {
        "properties": {
          "resource_type": {
            "type": "string",
            "const": "inventory_item",
            "title": "Resource Type",
            "default": "inventory_item"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "AlertTargetInventoryItem",
        "description": "Alert target for inventory item resources."
      },
      "AlertTargetLot": {
        "properties": {
          "resource_type": {
            "type": "string",
            "const": "lot",
            "title": "Resource Type",
            "default": "lot"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "AlertTargetLot",
        "description": "Alert target for lot resources."
      },
      "AlertTargetOrder": {
        "properties": {
          "resource_type": {
            "type": "string",
            "const": "order",
            "title": "Resource Type",
            "default": "order"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "AlertTargetOrder",
        "description": "Alert target for order resources."
      },
      "AllocationCommitRequest": {
        "properties": {
          "order_id": {
            "type": "integer",
            "title": "Order Id"
          }
        },
        "type": "object",
        "required": [
          "order_id"
        ],
        "title": "AllocationCommitRequest",
        "description": "Allocation commit request (v2.2.1)."
      },
      "AllocationCommitResponse": {
        "properties": {
          "order_id": {
            "type": "integer",
            "title": "Order Id"
          },
          "created_allocation_ids": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Created Allocation Ids"
          },
          "preview": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FefoPreviewResponse"
              },
              {
                "type": "null"
              }
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "default": "committed"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "order_id"
        ],
        "title": "AllocationCommitResponse",
        "description": "Allocation commit response (v2.2.1)."
      },
      "AllocationGap": {
        "properties": {
          "customer_id": {
            "type": "integer",
            "title": "Customer Id"
          },
          "delivery_place_id": {
            "type": "integer",
            "title": "Delivery Place Id"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "forecast_period": {
            "type": "string",
            "title": "Forecast Period"
          },
          "shortage_quantity": {
            "type": "string",
            "title": "Shortage Quantity"
          },
          "related_order_line_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "integer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Related Order Line Ids"
          }
        },
        "type": "object",
        "required": [
          "customer_id",
          "delivery_place_id",
          "product_id",
          "forecast_period",
          "shortage_quantity"
        ],
        "title": "AllocationGap",
        "description": "不足情報."
      },
      "AllocationOptions": {
        "properties": {
          "allocation_type": {
            "type": "string",
            "enum": [
              "soft",
              "hard"
            ],
            "title": "Allocation Type",
            "default": "soft"
          },
          "fefo": {
            "type": "boolean",
            "title": "Fefo",
            "default": true
          },
          "allow_cross_warehouse": {
            "type": "boolean",
            "title": "Allow Cross Warehouse",
            "default": false
          },
          "ignore_existing_suggestions": {
            "type": "boolean",
            "title": "Ignore Existing Suggestions",
            "default": false
          }
        },
        "type": "object",
        "title": "AllocationOptions"
      },
      "AllocationResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "order_line_id": {
            "type": "integer",
            "title": "Order Line Id"
          },
          "lot_id": {
            "type": "integer",
            "title": "Lot Id"
          },
          "allocated_quantity": {
            "type": "string",
            "title": "Allocated Quantity"
          },
          "status": {
            "type": "string",
            "pattern": "^(allocated|shipped|cancelled)$",
            "title": "Status"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "order_line_id",
          "lot_id",
          "allocated_quantity",
          "status",
          "created_at",
          "updated_at"
        ],
        "title": "AllocationResponse",
        "description": "Allocation response for order line (DDL: allocations)."
      },
      "AllocationScopeForecast": {
        "properties": {
          "forecast_periods": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Forecast Periods"
          },
          "customer_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "integer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Ids"
          },
          "delivery_place_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "integer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Place Ids"
          },
          "product_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "integer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Ids"
          }
        },
        "type": "object",
        "required": [
          "forecast_periods"
        ],
        "title": "AllocationScopeForecast"
      },
      "AllocationScopeOrder": {
        "properties": {
          "order_line_id": {
            "type": "integer",
            "title": "Order Line Id"
          }
        },
        "type": "object",
        "required": [
          "order_line_id"
        ],
        "title": "AllocationScopeOrder"
      },
      "AllocationStatsPerKey": {
        "properties": {
          "customer_id": {
            "type": "integer",
            "title": "Customer Id"
          },
          "delivery_place_id": {
            "type": "integer",
            "title": "Delivery Place Id"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "forecast_period": {
            "type": "string",
            "title": "Forecast Period"
          },
          "forecast_quantity": {
            "type": "string",
            "title": "Forecast Quantity"
          },
          "allocated_quantity": {
            "type": "string",
            "title": "Allocated Quantity"
          },
          "shortage_quantity": {
            "type": "string",
            "title": "Shortage Quantity"
          }
        },
        "type": "object",
        "required": [
          "customer_id",
          "delivery_place_id",
          "product_id",
          "forecast_period",
          "forecast_quantity",
          "allocated_quantity",
          "shortage_quantity"
        ],
        "title": "AllocationStatsPerKey",
        "description": "キーごとの集計結果."
      },
      "AllocationStatsSummary": {
        "properties": {
          "total_forecast_quantity": {
            "type": "string",
            "title": "Total Forecast Quantity"
          },
          "total_allocated_quantity": {
            "type": "string",
            "title": "Total Allocated Quantity"
          },
          "total_shortage_quantity": {
            "type": "string",
            "title": "Total Shortage Quantity"
          },
          "per_key": {
            "items": {
              "$ref": "#/components/schemas/AllocationStatsPerKey"
            },
            "type": "array",
            "title": "Per Key"
          }
        },
        "type": "object",
        "required": [
          "total_forecast_quantity",
          "total_allocated_quantity",
          "total_shortage_quantity",
          "per_key"
        ],
        "title": "AllocationStatsSummary",
        "description": "全体集計."
      },
      "AllocationSuggestionListResponse": {
        "properties": {
          "suggestions": {
            "items": {
              "$ref": "#/components/schemas/AllocationSuggestionResponse"
            },
            "type": "array",
            "title": "Suggestions"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "suggestions",
          "total"
        ],
        "title": "AllocationSuggestionListResponse",
        "description": "引当推奨一覧レスポンス."
      },
      "AllocationSuggestionPreviewResponse": {
        "properties": {
          "suggestions": {
            "items": {
              "$ref": "#/components/schemas/AllocationSuggestionResponse"
            },
            "type": "array",
            "title": "Suggestions"
          },
          "stats": {
            "$ref": "#/components/schemas/AllocationStatsSummary"
          },
          "gaps": {
            "items": {
              "$ref": "#/components/schemas/AllocationGap"
            },
            "type": "array",
            "title": "Gaps"
          }
        },
        "type": "object",
        "required": [
          "suggestions",
          "stats",
          "gaps"
        ],
        "title": "AllocationSuggestionPreviewResponse",
        "description": "プレビュー/生成結果レスポンス."
      },
      "AllocationSuggestionRequest": {
        "properties": {
          "mode": {
            "type": "string",
            "enum": [
              "forecast",
              "order"
            ],
            "title": "Mode"
          },
          "forecast_scope": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AllocationScopeForecast"
              },
              {
                "type": "null"
              }
            ]
          },
          "order_scope": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AllocationScopeOrder"
              },
              {
                "type": "null"
              }
            ]
          },
          "options": {
            "$ref": "#/components/schemas/AllocationOptions"
          }
        },
        "type": "object",
        "required": [
          "mode"
        ],
        "title": "AllocationSuggestionRequest",
        "description": "引当推奨生成/プレビューリクエスト."
      },
      "AllocationSuggestionResponse": {
        "properties": {
          "forecast_period": {
            "type": "string",
            "title": "Forecast Period",
            "description": "対象期間 (YYYY-MM)"
          },
          "customer_id": {
            "type": "integer",
            "title": "Customer Id",
            "description": "得意先ID"
          },
          "delivery_place_id": {
            "type": "integer",
            "title": "Delivery Place Id",
            "description": "納入先ID"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id",
            "description": "製品ID"
          },
          "lot_id": {
            "type": "integer",
            "title": "Lot Id",
            "description": "ロットID"
          },
          "quantity": {
            "type": "string",
            "title": "Quantity",
            "description": "引当数量"
          },
          "allocation_type": {
            "type": "string",
            "enum": [
              "soft",
              "hard"
            ],
            "title": "Allocation Type",
            "description": "引当タイプ"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "発生源 (forecast_import / order_preview)"
          },
          "order_line_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Line Id",
            "description": "オーダー明細ID (Preview時など)"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "lot_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lot Number",
            "description": "ロット番号"
          },
          "lot_expiry_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lot Expiry Date",
            "description": "ロット有効期限"
          },
          "warehouse_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Name",
            "description": "倉庫名"
          }
        },
        "type": "object",
        "required": [
          "forecast_period",
          "customer_id",
          "delivery_place_id",
          "product_id",
          "lot_id",
          "quantity",
          "allocation_type",
          "source",
          "id",
          "created_at",
          "updated_at"
        ],
        "title": "AllocationSuggestionResponse",
        "description": "引当推奨レスポンス."
      },
      "BatchJobCreate": {
        "properties": {
          "job_name": {
            "type": "string",
            "title": "Job Name",
            "description": "ジョブ名"
          },
          "job_type": {
            "type": "string",
            "title": "Job Type",
            "description": "ジョブ種別（allocation_suggestion/allocation_finalize/inventory_sync/data_import/report_generation）"
          },
          "parameters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parameters",
            "description": "ジョブパラメータ（JSON）"
          }
        },
        "type": "object",
        "required": [
          "job_name",
          "job_type"
        ],
        "title": "BatchJobCreate",
        "description": "バッチジョブ作成スキーマ."
      },
      "BatchJobExecuteRequest": {
        "properties": {
          "parameters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parameters",
            "description": "実行時パラメータ（上書き）"
          }
        },
        "type": "object",
        "title": "BatchJobExecuteRequest",
        "description": "バッチジョブ実行リクエスト."
      },
      "BatchJobExecuteResponse": {
        "properties": {
          "job_id": {
            "type": "integer",
            "title": "Job Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "status",
          "message"
        ],
        "title": "BatchJobExecuteResponse",
        "description": "バッチジョブ実行レスポンス."
      },
      "BatchJobListResponse": {
        "properties": {
          "jobs": {
            "items": {
              "$ref": "#/components/schemas/BatchJobResponse"
            },
            "type": "array",
            "title": "Jobs"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "page": {
            "type": "integer",
            "title": "Page"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size"
          }
        },
        "type": "object",
        "required": [
          "jobs",
          "total",
          "page",
          "page_size"
        ],
        "title": "BatchJobListResponse",
        "description": "バッチジョブ一覧レスポンス."
      },
      "BatchJobResponse": {
        "properties": {
          "job_name": {
            "type": "string",
            "title": "Job Name",
            "description": "ジョブ名"
          },
          "job_type": {
            "type": "string",
            "title": "Job Type",
            "description": "ジョブ種別（allocation_suggestion/allocation_finalize/inventory_sync/data_import/report_generation）"
          },
          "parameters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parameters",
            "description": "ジョブパラメータ（JSON）"
          },
          "job_id": {
            "type": "integer",
            "title": "Job Id"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "ステータス（pending/running/completed/failed）"
          },
          "result_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result Message",
            "description": "実行結果メッセージ"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At",
            "description": "開始日時"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "完了日時"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "作成日時"
          }
        },
        "type": "object",
        "required": [
          "job_name",
          "job_type",
          "job_id",
          "status",
          "created_at"
        ],
        "title": "BatchJobResponse",
        "description": "バッチジョブレスポンス."
      },
      "BusinessRuleCreate": {
        "properties": {
          "rule_code": {
            "type": "string",
            "title": "Rule Code",
            "description": "ルールコード（一意）"
          },
          "rule_name": {
            "type": "string",
            "title": "Rule Name",
            "description": "ルール名"
          },
          "rule_type": {
            "type": "string",
            "title": "Rule Type",
            "description": "ルール種別（allocation/expiry_warning/kanban/other）"
          },
          "rule_parameters": {
            "type": "object",
            "title": "Rule Parameters",
            "description": "ルールパラメータ（JSON）"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "有効フラグ",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "rule_code",
          "rule_name",
          "rule_type",
          "rule_parameters"
        ],
        "title": "BusinessRuleCreate",
        "description": "業務ルール作成スキーマ."
      },
      "BusinessRuleListResponse": {
        "properties": {
          "rules": {
            "items": {
              "$ref": "#/components/schemas/BusinessRuleResponse"
            },
            "type": "array",
            "title": "Rules"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "rules",
          "total"
        ],
        "title": "BusinessRuleListResponse",
        "description": "業務ルール一覧レスポンス."
      },
      "BusinessRuleResponse": {
        "properties": {
          "rule_code": {
            "type": "string",
            "title": "Rule Code",
            "description": "ルールコード（一意）"
          },
          "rule_name": {
            "type": "string",
            "title": "Rule Name",
            "description": "ルール名"
          },
          "rule_type": {
            "type": "string",
            "title": "Rule Type",
            "description": "ルール種別（allocation/expiry_warning/kanban/other）"
          },
          "rule_parameters": {
            "type": "object",
            "title": "Rule Parameters",
            "description": "ルールパラメータ（JSON）"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "有効フラグ",
            "default": true
          },
          "rule_id": {
            "type": "integer",
            "title": "Rule Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "rule_code",
          "rule_name",
          "rule_type",
          "rule_parameters",
          "rule_id",
          "created_at",
          "updated_at"
        ],
        "title": "BusinessRuleResponse",
        "description": "業務ルールレスポンス."
      },
      "BusinessRuleUpdate": {
        "properties": {
          "rule_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rule Name",
            "description": "ルール名"
          },
          "rule_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rule Type",
            "description": "ルール種別"
          },
          "rule_parameters": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rule Parameters",
            "description": "ルールパラメータ（JSON）"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active",
            "description": "有効フラグ"
          }
        },
        "type": "object",
        "title": "BusinessRuleUpdate",
        "description": "業務ルール更新スキーマ."
      },
      "CandidateLotItem": {
        "properties": {
          "lot_id": {
            "type": "integer",
            "title": "Lot Id"
          },
          "lot_number": {
            "type": "string",
            "title": "Lot Number"
          },
          "current_quantity": {
            "type": "string",
            "title": "Current Quantity"
          },
          "allocated_quantity": {
            "type": "string",
            "title": "Allocated Quantity"
          },
          "available_quantity": {
            "type": "string",
            "title": "Available Quantity",
            "description": "引当可能数量"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "warehouse_id": {
            "type": "integer",
            "title": "Warehouse Id"
          },
          "warehouse_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Code"
          },
          "warehouse_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Name"
          },
          "expiry_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date"
          },
          "received_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Received Date"
          },
          "delivery_place_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Place Id"
          },
          "delivery_place_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Place Name"
          },
          "internal_unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Internal Unit"
          },
          "external_unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "External Unit"
          },
          "qty_per_internal_unit": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty Per Internal Unit"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "default": "active"
          },
          "lock_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lock Reason"
          }
        },
        "type": "object",
        "required": [
          "lot_id",
          "lot_number",
          "current_quantity",
          "allocated_quantity",
          "available_quantity",
          "product_id",
          "warehouse_id"
        ],
        "title": "CandidateLotItem",
        "description": "Candidate lot item (DDL: lots)."
      },
      "CandidateLotsResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/CandidateLotItem"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "default": 0
          }
        },
        "type": "object",
        "title": "CandidateLotsResponse",
        "description": "Candidate lots list response."
      },
      "CustomerCreate": {
        "properties": {
          "customer_code": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Customer Code"
          },
          "customer_name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Customer Name"
          }
        },
        "type": "object",
        "required": [
          "customer_code",
          "customer_name"
        ],
        "title": "CustomerCreate",
        "description": "Create customer request."
      },
      "CustomerItemCreate": {
        "properties": {
          "customer_id": {
            "type": "integer",
            "title": "Customer Id",
            "description": "得意先ID"
          },
          "external_product_code": {
            "type": "string",
            "maxLength": 100,
            "title": "External Product Code",
            "description": "得意先品番"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id",
            "description": "製品ID"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id",
            "description": "仕入先ID"
          },
          "base_unit": {
            "type": "string",
            "maxLength": 20,
            "title": "Base Unit",
            "description": "基本単位"
          },
          "pack_unit": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Pack Unit",
            "description": "梱包単位"
          },
          "pack_quantity": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pack Quantity",
            "description": "梱包数量"
          },
          "special_instructions": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Special Instructions",
            "description": "特記事項"
          }
        },
        "type": "object",
        "required": [
          "customer_id",
          "external_product_code",
          "product_id",
          "base_unit"
        ],
        "title": "CustomerItemCreate",
        "description": "Schema for creating a customer item mapping."
      },
      "CustomerItemResponse": {
        "properties": {
          "customer_id": {
            "type": "integer",
            "title": "Customer Id",
            "description": "得意先ID"
          },
          "external_product_code": {
            "type": "string",
            "maxLength": 100,
            "title": "External Product Code",
            "description": "得意先品番"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id",
            "description": "製品ID"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id",
            "description": "仕入先ID"
          },
          "base_unit": {
            "type": "string",
            "maxLength": 20,
            "title": "Base Unit",
            "description": "基本単位"
          },
          "pack_unit": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Pack Unit",
            "description": "梱包単位"
          },
          "pack_quantity": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pack Quantity",
            "description": "梱包数量"
          },
          "special_instructions": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Special Instructions",
            "description": "特記事項"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "customer_id",
          "external_product_code",
          "product_id",
          "base_unit",
          "created_at",
          "updated_at"
        ],
        "title": "CustomerItemResponse",
        "description": "Schema for customer item response."
      },
      "CustomerItemUpdate": {
        "properties": {
          "product_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Id",
            "description": "製品ID"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id",
            "description": "仕入先ID"
          },
          "base_unit": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Unit",
            "description": "基本単位"
          },
          "pack_unit": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Pack Unit",
            "description": "梱包単位"
          },
          "pack_quantity": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pack Quantity",
            "description": "梱包数量"
          },
          "special_instructions": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Special Instructions",
            "description": "特記事項"
          }
        },
        "type": "object",
        "title": "CustomerItemUpdate",
        "description": "Schema for updating a customer item mapping."
      },
      "CustomerResponse": {
        "properties": {
          "customer_code": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Customer Code"
          },
          "customer_name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Customer Name"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "customer_code",
          "customer_name",
          "id",
          "created_at",
          "updated_at"
        ],
        "title": "CustomerResponse",
        "description": "Customer response (DDL: customers)."
      },
      "CustomerUpdate": {
        "properties": {
          "customer_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Name"
          }
        },
        "type": "object",
        "title": "CustomerUpdate",
        "description": "Update customer request."
      },
      "DashboardStatsResponse": {
        "properties": {
          "total_stock": {
            "type": "number",
            "title": "Total Stock"
          },
          "total_orders": {
            "type": "integer",
            "title": "Total Orders"
          },
          "unallocated_orders": {
            "type": "integer",
            "title": "Unallocated Orders"
          },
          "allocation_rate": {
            "type": "number",
            "title": "Allocation Rate"
          }
        },
        "type": "object",
        "required": [
          "total_stock",
          "total_orders",
          "unallocated_orders",
          "allocation_rate"
        ],
        "title": "DashboardStatsResponse",
        "description": "ダッシュボード統計レスポンス."
      },
      "DragAssignRequest": {
        "properties": {
          "order_line_id": {
            "type": "integer",
            "title": "Order Line Id"
          },
          "lot_id": {
            "type": "integer",
            "title": "Lot Id"
          },
          "allocated_quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allocated Quantity"
          },
          "allocate_qty": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allocate Qty",
            "description": "Deprecated: use allocated_quantity"
          }
        },
        "type": "object",
        "required": [
          "order_line_id",
          "lot_id"
        ],
        "title": "DragAssignRequest",
        "description": "Deprecated: Use ManualAllocationRequest instead."
      },
      "DragAssignResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "allocation_id": {
            "type": "integer",
            "title": "Allocation Id"
          },
          "remaining_lot_qty": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remaining Lot Qty"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "allocation_id"
        ],
        "title": "DragAssignResponse",
        "description": "Deprecated: Use ManualAllocationResponse instead."
      },
      "ExpectedLotCreate": {
        "properties": {
          "inbound_plan_line_id": {
            "type": "integer",
            "title": "Inbound Plan Line Id"
          },
          "expected_lot_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expected Lot Number"
          },
          "expected_quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "title": "Expected Quantity"
          },
          "expected_expiry_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expected Expiry Date"
          }
        },
        "type": "object",
        "required": [
          "inbound_plan_line_id",
          "expected_quantity"
        ],
        "title": "ExpectedLotCreate",
        "description": "Payload for creating expected lots."
      },
      "ExpectedLotResponse": {
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "inbound_plan_line_id": {
            "type": "integer",
            "title": "Inbound Plan Line Id"
          },
          "expected_lot_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expected Lot Number"
          },
          "expected_quantity": {
            "type": "string",
            "title": "Expected Quantity"
          },
          "expected_expiry_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expected Expiry Date"
          },
          "expected_lot_id": {
            "type": "integer",
            "title": "Expected Lot Id"
          }
        },
        "type": "object",
        "required": [
          "created_at",
          "inbound_plan_line_id",
          "expected_quantity",
          "expected_lot_id"
        ],
        "title": "ExpectedLotResponse",
        "description": "Response model for expected lots."
      },
      "FefoLineAllocation": {
        "properties": {
          "order_line_id": {
            "type": "integer",
            "title": "Order Line Id"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "order_quantity": {
            "type": "string",
            "title": "Order Quantity",
            "description": "受注数量"
          },
          "already_allocated_quantity": {
            "type": "string",
            "title": "Already Allocated Quantity",
            "description": "既存引当数量",
            "default": "0"
          },
          "allocations": {
            "items": {
              "$ref": "#/components/schemas/FefoLotAllocation"
            },
            "type": "array",
            "title": "Allocations"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings"
          }
        },
        "type": "object",
        "required": [
          "order_line_id",
          "product_id",
          "order_quantity"
        ],
        "title": "FefoLineAllocation",
        "description": "FEFO line allocation detail."
      },
      "FefoLotAllocation": {
        "properties": {
          "lot_id": {
            "type": "integer",
            "title": "Lot Id"
          },
          "lot_number": {
            "type": "string",
            "title": "Lot Number"
          },
          "allocated_quantity": {
            "type": "string",
            "title": "Allocated Quantity",
            "description": "引当数量"
          },
          "expiry_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date"
          },
          "received_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Received Date"
          }
        },
        "type": "object",
        "required": [
          "lot_id",
          "lot_number",
          "allocated_quantity"
        ],
        "title": "FefoLotAllocation",
        "description": "FEFO lot allocation detail."
      },
      "FefoPreviewRequest": {
        "properties": {
          "order_id": {
            "type": "integer",
            "title": "Order Id"
          }
        },
        "type": "object",
        "required": [
          "order_id"
        ],
        "title": "FefoPreviewRequest",
        "description": "FEFO preview request."
      },
      "FefoPreviewResponse": {
        "properties": {
          "order_id": {
            "type": "integer",
            "title": "Order Id"
          },
          "lines": {
            "items": {
              "$ref": "#/components/schemas/FefoLineAllocation"
            },
            "type": "array",
            "title": "Lines"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings"
          }
        },
        "type": "object",
        "required": [
          "order_id"
        ],
        "title": "FefoPreviewResponse",
        "description": "FEFO preview response."
      },
      "ForecastBulkImportItem": {
        "properties": {
          "customer_code": {
            "type": "string",
            "title": "Customer Code"
          },
          "delivery_place_code": {
            "type": "string",
            "title": "Delivery Place Code"
          },
          "product_code": {
            "type": "string",
            "title": "Product Code"
          },
          "forecast_date": {
            "type": "string",
            "format": "date",
            "title": "Forecast Date"
          },
          "forecast_quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "title": "Forecast Quantity"
          },
          "unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unit"
          },
          "forecast_period": {
            "type": "string",
            "title": "Forecast Period"
          }
        },
        "type": "object",
        "required": [
          "customer_code",
          "delivery_place_code",
          "product_code",
          "forecast_date",
          "forecast_quantity",
          "forecast_period"
        ],
        "title": "ForecastBulkImportItem",
        "description": "Single item for bulk import."
      },
      "ForecastBulkImportRequest": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/ForecastBulkImportItem"
            },
            "type": "array",
            "title": "Items"
          },
          "replace_existing": {
            "type": "boolean",
            "title": "Replace Existing",
            "description": "If true, archive existing forecasts before importing new ones",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "items"
        ],
        "title": "ForecastBulkImportRequest",
        "description": "Bulk import request payload."
      },
      "ForecastBulkImportSummary": {
        "properties": {
          "imported_count": {
            "type": "integer",
            "title": "Imported Count"
          },
          "archived_count": {
            "type": "integer",
            "title": "Archived Count"
          },
          "skipped_count": {
            "type": "integer",
            "title": "Skipped Count",
            "default": 0
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors"
          }
        },
        "type": "object",
        "required": [
          "imported_count",
          "archived_count"
        ],
        "title": "ForecastBulkImportSummary",
        "description": "Aggregated summary of bulk import outcomes."
      },
      "ForecastCreate": {
        "properties": {
          "customer_id": {
            "type": "integer",
            "title": "Customer Id"
          },
          "delivery_place_id": {
            "type": "integer",
            "title": "Delivery Place Id"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "forecast_date": {
            "type": "string",
            "format": "date",
            "title": "Forecast Date"
          },
          "forecast_quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "title": "Forecast Quantity"
          },
          "unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unit"
          },
          "forecast_period": {
            "type": "string",
            "title": "Forecast Period"
          }
        },
        "type": "object",
        "required": [
          "customer_id",
          "delivery_place_id",
          "product_id",
          "forecast_date",
          "forecast_quantity",
          "forecast_period"
        ],
        "title": "ForecastCreate",
        "description": "Payload for creating a new forecast entry."
      },
      "ForecastGroupKey": {
        "properties": {
          "customer_id": {
            "type": "integer",
            "title": "Customer Id"
          },
          "delivery_place_id": {
            "type": "integer",
            "title": "Delivery Place Id"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "customer_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Code"
          },
          "customer_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Name"
          },
          "delivery_place_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Place Code"
          },
          "delivery_place_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Place Name"
          },
          "product_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Code"
          },
          "product_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Name"
          }
        },
        "type": "object",
        "required": [
          "customer_id",
          "delivery_place_id",
          "product_id"
        ],
        "title": "ForecastGroupKey",
        "description": "Group key for customer × delivery_place × product."
      },
      "ForecastGroupResponse": {
        "properties": {
          "group_key": {
            "$ref": "#/components/schemas/ForecastGroupKey"
          },
          "forecasts": {
            "items": {
              "$ref": "#/components/schemas/ForecastResponse"
            },
            "type": "array",
            "title": "Forecasts"
          },
          "snapshot_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Snapshot At"
          },
          "related_orders": {
            "items": {
              "$ref": "#/components/schemas/OrderWithLinesResponse"
            },
            "type": "array",
            "title": "Related Orders"
          }
        },
        "type": "object",
        "required": [
          "group_key"
        ],
        "title": "ForecastGroupResponse",
        "description": "Grouped forecasts by customer × delivery_place × product."
      },
      "ForecastHistoryResponse": {
        "properties": {
          "customer_id": {
            "type": "integer",
            "title": "Customer Id"
          },
          "delivery_place_id": {
            "type": "integer",
            "title": "Delivery Place Id"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "forecast_date": {
            "type": "string",
            "format": "date",
            "title": "Forecast Date"
          },
          "forecast_quantity": {
            "type": "string",
            "title": "Forecast Quantity"
          },
          "unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unit"
          },
          "forecast_period": {
            "type": "string",
            "title": "Forecast Period"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "snapshot_at": {
            "type": "string",
            "format": "date-time",
            "title": "Snapshot At"
          },
          "archived_at": {
            "type": "string",
            "format": "date-time",
            "title": "Archived At"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "customer_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Code"
          },
          "customer_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Name"
          },
          "delivery_place_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Place Code"
          },
          "delivery_place_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Place Name"
          },
          "product_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Code"
          },
          "product_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Name"
          }
        },
        "type": "object",
        "required": [
          "customer_id",
          "delivery_place_id",
          "product_id",
          "forecast_date",
          "forecast_quantity",
          "forecast_period",
          "id",
          "snapshot_at",
          "archived_at",
          "created_at",
          "updated_at"
        ],
        "title": "ForecastHistoryResponse",
        "description": "API response model for forecast_history entries."
      },
      "ForecastListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/ForecastGroupResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total"
        ],
        "title": "ForecastListResponse",
        "description": "List response with grouped forecasts."
      },
      "ForecastResponse": {
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "customer_id": {
            "type": "integer",
            "title": "Customer Id"
          },
          "delivery_place_id": {
            "type": "integer",
            "title": "Delivery Place Id"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "forecast_date": {
            "type": "string",
            "format": "date",
            "title": "Forecast Date"
          },
          "forecast_quantity": {
            "type": "string",
            "title": "Forecast Quantity"
          },
          "unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unit"
          },
          "forecast_period": {
            "type": "string",
            "title": "Forecast Period"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "snapshot_at": {
            "type": "string",
            "format": "date-time",
            "title": "Snapshot At"
          },
          "customer_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Code"
          },
          "customer_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Name"
          },
          "delivery_place_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Place Code"
          },
          "delivery_place_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Place Name"
          },
          "product_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Code"
          },
          "product_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Name"
          }
        },
        "type": "object",
        "required": [
          "created_at",
          "customer_id",
          "delivery_place_id",
          "product_id",
          "forecast_date",
          "forecast_quantity",
          "forecast_period",
          "id",
          "snapshot_at"
        ],
        "title": "ForecastResponse",
        "description": "API response model for forecast_current entries."
      },
      "ForecastUpdate": {
        "properties": {
          "forecast_quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Forecast Quantity"
          },
          "unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unit"
          }
        },
        "type": "object",
        "title": "ForecastUpdate",
        "description": "Mutable fields for updating a forecast entry."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "InboundPlanCreate": {
        "properties": {
          "plan_number": {
            "type": "string",
            "title": "Plan Number"
          },
          "supplier_id": {
            "type": "integer",
            "title": "Supplier Id"
          },
          "planned_arrival_date": {
            "type": "string",
            "format": "date",
            "title": "Planned Arrival Date"
          },
          "status": {
            "$ref": "#/components/schemas/InboundPlanStatus",
            "default": "planned"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "lines": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/InboundPlanLineCreate"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lines"
          }
        },
        "type": "object",
        "required": [
          "plan_number",
          "supplier_id",
          "planned_arrival_date"
        ],
        "title": "InboundPlanCreate",
        "description": "Payload for registering inbound plans."
      },
      "InboundPlanDetailResponse": {
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "plan_number": {
            "type": "string",
            "title": "Plan Number"
          },
          "supplier_id": {
            "type": "integer",
            "title": "Supplier Id"
          },
          "planned_arrival_date": {
            "type": "string",
            "format": "date",
            "title": "Planned Arrival Date"
          },
          "status": {
            "$ref": "#/components/schemas/InboundPlanStatus",
            "default": "planned"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "inbound_plan_id": {
            "type": "integer",
            "title": "Inbound Plan Id"
          },
          "lines": {
            "items": {
              "$ref": "#/components/schemas/InboundPlanLineResponse"
            },
            "type": "array",
            "title": "Lines"
          }
        },
        "type": "object",
        "required": [
          "created_at",
          "plan_number",
          "supplier_id",
          "planned_arrival_date",
          "inbound_plan_id"
        ],
        "title": "InboundPlanDetailResponse",
        "description": "Inbound plan representation bundled with lines and expected lots."
      },
      "InboundPlanLineCreate": {
        "properties": {
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "planned_quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "title": "Planned Quantity"
          },
          "unit": {
            "type": "string",
            "title": "Unit"
          },
          "expected_lots": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ExpectedLotCreate"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expected Lots"
          }
        },
        "type": "object",
        "required": [
          "product_id",
          "planned_quantity",
          "unit"
        ],
        "title": "InboundPlanLineCreate",
        "description": "Payload for creating inbound plan lines."
      },
      "InboundPlanLineResponse": {
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "planned_quantity": {
            "type": "string",
            "title": "Planned Quantity"
          },
          "unit": {
            "type": "string",
            "title": "Unit"
          },
          "inbound_plan_line_id": {
            "type": "integer",
            "title": "Inbound Plan Line Id"
          },
          "inbound_plan_id": {
            "type": "integer",
            "title": "Inbound Plan Id"
          },
          "expected_lots": {
            "items": {
              "$ref": "#/components/schemas/ExpectedLotResponse"
            },
            "type": "array",
            "title": "Expected Lots"
          }
        },
        "type": "object",
        "required": [
          "created_at",
          "product_id",
          "planned_quantity",
          "unit",
          "inbound_plan_line_id",
          "inbound_plan_id"
        ],
        "title": "InboundPlanLineResponse",
        "description": "Response model for inbound plan lines."
      },
      "InboundPlanListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/InboundPlanResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total"
        ],
        "title": "InboundPlanListResponse",
        "description": "Response wrapper for inbound plan listings."
      },
      "InboundPlanReceiveRequest": {
        "properties": {
          "received_at": {
            "type": "string",
            "format": "date-time",
            "title": "Received At"
          },
          "lot_numbers": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "string"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lot Numbers"
          }
        },
        "type": "object",
        "required": [
          "received_at"
        ],
        "title": "InboundPlanReceiveRequest",
        "description": "Payload for confirming inbound receipt."
      },
      "InboundPlanReceiveResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "created_lot_ids": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Created Lot Ids"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "InboundPlanReceiveResponse",
        "description": "Response model returned after processing inbound receipt."
      },
      "InboundPlanResponse": {
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "plan_number": {
            "type": "string",
            "title": "Plan Number"
          },
          "supplier_id": {
            "type": "integer",
            "title": "Supplier Id"
          },
          "planned_arrival_date": {
            "type": "string",
            "format": "date",
            "title": "Planned Arrival Date"
          },
          "status": {
            "$ref": "#/components/schemas/InboundPlanStatus",
            "default": "planned"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "inbound_plan_id": {
            "type": "integer",
            "title": "Inbound Plan Id"
          }
        },
        "type": "object",
        "required": [
          "created_at",
          "plan_number",
          "supplier_id",
          "planned_arrival_date",
          "inbound_plan_id"
        ],
        "title": "InboundPlanResponse",
        "description": "Response model for inbound plans."
      },
      "InboundPlanStatus": {
        "type": "string",
        "enum": [
          "planned",
          "partially_received",
          "received",
          "cancelled"
        ],
        "title": "InboundPlanStatus",
        "description": "Valid lifecycle states for inbound plans."
      },
      "InboundPlanUpdate": {
        "properties": {
          "planned_arrival_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Planned Arrival Date"
          },
          "status": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/InboundPlanStatus"
              },
              {
                "type": "null"
              }
            ]
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "title": "InboundPlanUpdate",
        "description": "Mutable fields for inbound plans."
      },
      "InventoryItemResponse": {
        "properties": {
          "inventory_item_id": {
            "type": "integer",
            "title": "Inventory Item Id"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "warehouse_id": {
            "type": "integer",
            "title": "Warehouse Id"
          },
          "total_quantity": {
            "type": "string",
            "title": "Total Quantity"
          },
          "allocated_quantity": {
            "type": "string",
            "title": "Allocated Quantity"
          },
          "available_quantity": {
            "type": "string",
            "title": "Available Quantity"
          },
          "last_updated": {
            "type": "string",
            "format": "date-time",
            "title": "Last Updated"
          },
          "product_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Name"
          },
          "product_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Code"
          },
          "warehouse_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Name"
          },
          "warehouse_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Code"
          }
        },
        "type": "object",
        "required": [
          "inventory_item_id",
          "product_id",
          "warehouse_id",
          "total_quantity",
          "allocated_quantity",
          "available_quantity",
          "last_updated"
        ],
        "title": "InventoryItemResponse",
        "description": "API response model for inventory items (aggregated summary).\n\nThis schema represents a calculated summary of inventory from the lots table,\naggregated by product and warehouse. It does not map to a physical table."
      },
      "LotCreate": {
        "properties": {
          "lot_number": {
            "type": "string",
            "title": "Lot Number"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "warehouse_id": {
            "type": "integer",
            "title": "Warehouse Id"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id"
          },
          "expected_lot_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expected Lot Id"
          },
          "received_date": {
            "type": "string",
            "format": "date",
            "title": "Received Date"
          },
          "expiry_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date"
          },
          "current_quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "title": "Current Quantity",
            "default": "0"
          },
          "allocated_quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "title": "Allocated Quantity",
            "default": "0"
          },
          "unit": {
            "type": "string",
            "title": "Unit"
          },
          "status": {
            "$ref": "#/components/schemas/LotStatus",
            "default": "active"
          },
          "inspection_status": {
            "type": "string",
            "title": "Inspection Status",
            "default": "not_required"
          },
          "inspection_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Date"
          },
          "inspection_cert_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Cert Number"
          }
        },
        "type": "object",
        "required": [
          "lot_number",
          "product_id",
          "warehouse_id",
          "received_date",
          "unit"
        ],
        "title": "LotCreate",
        "description": "Payload for creating lots."
      },
      "LotLock": {
        "properties": {
          "reason": {
            "type": "string",
            "title": "Reason"
          }
        },
        "type": "object",
        "required": [
          "reason"
        ],
        "title": "LotLock",
        "description": "Payload for locking a lot."
      },
      "LotResponse": {
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "lot_number": {
            "type": "string",
            "title": "Lot Number"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "warehouse_id": {
            "type": "integer",
            "title": "Warehouse Id"
          },
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id"
          },
          "expected_lot_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expected Lot Id"
          },
          "received_date": {
            "type": "string",
            "format": "date",
            "title": "Received Date"
          },
          "expiry_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date"
          },
          "current_quantity": {
            "type": "string",
            "title": "Current Quantity",
            "default": "0"
          },
          "allocated_quantity": {
            "type": "string",
            "title": "Allocated Quantity",
            "default": "0"
          },
          "unit": {
            "type": "string",
            "title": "Unit"
          },
          "status": {
            "$ref": "#/components/schemas/LotStatus",
            "default": "active"
          },
          "inspection_status": {
            "type": "string",
            "title": "Inspection Status",
            "default": "not_required"
          },
          "inspection_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Date"
          },
          "inspection_cert_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Cert Number"
          },
          "lot_id": {
            "type": "integer",
            "title": "Lot Id"
          },
          "product_name": {
            "type": "string",
            "title": "Product Name"
          },
          "product_code": {
            "type": "string",
            "title": "Product Code"
          },
          "supplier_name": {
            "type": "string",
            "title": "Supplier Name"
          },
          "warehouse_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Name"
          },
          "warehouse_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Code"
          },
          "supplier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Code"
          },
          "last_updated": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Updated"
          }
        },
        "type": "object",
        "required": [
          "created_at",
          "lot_number",
          "product_id",
          "warehouse_id",
          "received_date",
          "unit",
          "lot_id",
          "product_name",
          "product_code",
          "supplier_name"
        ],
        "title": "LotResponse",
        "description": "API response model for lots."
      },
      "LotStatus": {
        "type": "string",
        "enum": [
          "active",
          "depleted",
          "expired",
          "quarantine",
          "locked"
        ],
        "title": "LotStatus",
        "description": "Valid lot lifecycle statuses."
      },
      "LotUpdate": {
        "properties": {
          "supplier_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Id"
          },
          "expected_lot_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expected Lot Id"
          },
          "received_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Received Date"
          },
          "expiry_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expiry Date"
          },
          "current_quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Quantity"
          },
          "allocated_quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allocated Quantity"
          },
          "unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Unit"
          },
          "status": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/LotStatus"
              },
              {
                "type": "null"
              }
            ]
          },
          "inspection_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Status"
          },
          "inspection_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Date"
          },
          "inspection_cert_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Cert Number"
          }
        },
        "type": "object",
        "title": "LotUpdate",
        "description": "Mutable fields for lot updates."
      },
      "ManualAllocationItem": {
        "properties": {
          "lot_id": {
            "type": "integer",
            "title": "Lot Id"
          },
          "quantity": {
            "type": "number",
            "title": "Quantity"
          }
        },
        "type": "object",
        "required": [
          "lot_id",
          "quantity"
        ],
        "title": "ManualAllocationItem"
      },
      "ManualAllocationSavePayload": {
        "properties": {
          "allocations": {
            "items": {
              "$ref": "#/components/schemas/ManualAllocationItem"
            },
            "type": "array",
            "title": "Allocations"
          }
        },
        "type": "object",
        "required": [
          "allocations"
        ],
        "title": "ManualAllocationSavePayload"
      },
      "MasterChangeLogListResponse": {
        "properties": {
          "logs": {
            "items": {
              "$ref": "#/components/schemas/MasterChangeLogResponse"
            },
            "type": "array",
            "title": "Logs"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "page": {
            "type": "integer",
            "title": "Page"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size"
          }
        },
        "type": "object",
        "required": [
          "logs",
          "total",
          "page",
          "page_size"
        ],
        "title": "MasterChangeLogListResponse",
        "description": "マスタ変更履歴一覧レスポンス."
      },
      "MasterChangeLogResponse": {
        "properties": {
          "change_log_id": {
            "type": "integer",
            "title": "Change Log Id"
          },
          "table_name": {
            "type": "string",
            "title": "Table Name",
            "description": "テーブル名"
          },
          "record_id": {
            "type": "integer",
            "title": "Record Id",
            "description": "レコードID"
          },
          "change_type": {
            "type": "string",
            "title": "Change Type",
            "description": "変更種別（insert/update/delete）"
          },
          "old_values": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Old Values",
            "description": "変更前の値（JSON）"
          },
          "new_values": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Values",
            "description": "変更後の値（JSON）"
          },
          "changed_by": {
            "type": "integer",
            "title": "Changed By",
            "description": "変更者（ユーザーID）"
          },
          "changed_at": {
            "type": "string",
            "format": "date-time",
            "title": "Changed At",
            "description": "変更日時"
          }
        },
        "type": "object",
        "required": [
          "change_log_id",
          "table_name",
          "record_id",
          "change_type",
          "changed_by",
          "changed_at"
        ],
        "title": "MasterChangeLogResponse",
        "description": "マスタ変更履歴レスポンス."
      },
      "OperationLogListResponse": {
        "properties": {
          "logs": {
            "items": {
              "$ref": "#/components/schemas/OperationLogResponse"
            },
            "type": "array",
            "title": "Logs"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "page": {
            "type": "integer",
            "title": "Page"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size"
          }
        },
        "type": "object",
        "required": [
          "logs",
          "total",
          "page",
          "page_size"
        ],
        "title": "OperationLogListResponse",
        "description": "操作ログ一覧レスポンス."
      },
      "OperationLogResponse": {
        "properties": {
          "log_id": {
            "type": "integer",
            "title": "Log Id"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id"
          },
          "operation_type": {
            "type": "string",
            "title": "Operation Type",
            "description": "操作種別（create/update/delete/login/logout/export）"
          },
          "target_table": {
            "type": "string",
            "title": "Target Table",
            "description": "対象テーブル名"
          },
          "target_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Id",
            "description": "対象レコードID"
          },
          "changes": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Changes",
            "description": "変更内容（JSON）"
          },
          "ip_address": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ip Address",
            "description": "IPアドレス"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "作成日時"
          }
        },
        "type": "object",
        "required": [
          "log_id",
          "operation_type",
          "target_table",
          "created_at"
        ],
        "title": "OperationLogResponse",
        "description": "操作ログレスポンス."
      },
      "OrderCreate": {
        "properties": {
          "order_number": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Order Number"
          },
          "customer_id": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Customer Id"
          },
          "order_date": {
            "type": "string",
            "format": "date",
            "title": "Order Date"
          },
          "lines": {
            "items": {
              "$ref": "#/components/schemas/OrderLineCreate"
            },
            "type": "array",
            "title": "Lines"
          }
        },
        "type": "object",
        "required": [
          "order_number",
          "customer_id",
          "order_date"
        ],
        "title": "OrderCreate",
        "description": "Create order request."
      },
      "OrderLineCreate": {
        "properties": {
          "product_id": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Product Id"
          },
          "delivery_date": {
            "type": "string",
            "format": "date",
            "title": "Delivery Date"
          },
          "order_quantity": {
            "anyOf": [
              {
                "type": "number",
                "exclusiveMinimum": 0.0
              },
              {
                "type": "string"
              }
            ],
            "title": "Order Quantity",
            "description": "受注数量"
          },
          "unit": {
            "type": "string",
            "maxLength": 20,
            "minLength": 1,
            "title": "Unit"
          },
          "converted_quantity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Converted Quantity",
            "description": "社内基準単位換算数量"
          },
          "delivery_place_id": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Delivery Place Id"
          },
          "status": {
            "type": "string",
            "pattern": "^(pending|allocated|shipped|completed|cancelled)$",
            "title": "Status",
            "default": "pending"
          }
        },
        "type": "object",
        "required": [
          "product_id",
          "delivery_date",
          "order_quantity",
          "unit",
          "delivery_place_id"
        ],
        "title": "OrderLineCreate",
        "description": "Create order line request."
      },
      "OrderLineResponse": {
        "properties": {
          "product_id": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Product Id"
          },
          "delivery_date": {
            "type": "string",
            "format": "date",
            "title": "Delivery Date"
          },
          "order_quantity": {
            "type": "string",
            "title": "Order Quantity",
            "description": "受注数量"
          },
          "unit": {
            "type": "string",
            "maxLength": 20,
            "minLength": 1,
            "title": "Unit"
          },
          "converted_quantity": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Converted Quantity",
            "description": "社内基準単位換算数量"
          },
          "delivery_place_id": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Delivery Place Id"
          },
          "status": {
            "type": "string",
            "pattern": "^(pending|allocated|shipped|completed|cancelled)$",
            "title": "Status",
            "default": "pending"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "order_id": {
            "type": "integer",
            "title": "Order Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "supplier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Name"
          },
          "product_internal_unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Internal Unit"
          },
          "product_external_unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product External Unit"
          },
          "product_qty_per_internal_unit": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Qty Per Internal Unit"
          },
          "product_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Code"
          },
          "product_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Name"
          },
          "delivery_place_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Place Name"
          },
          "allocations": {
            "items": {
              "$ref": "#/components/schemas/AllocationResponse"
            },
            "type": "array",
            "title": "Allocations"
          },
          "allocated_quantity": {
            "type": "string",
            "title": "Allocated Quantity",
            "description": "引当済数量",
            "default": "0"
          }
        },
        "type": "object",
        "required": [
          "product_id",
          "delivery_date",
          "order_quantity",
          "unit",
          "delivery_place_id",
          "id",
          "order_id",
          "created_at",
          "updated_at"
        ],
        "title": "OrderLineResponse",
        "description": "Order line response (DDL: order_lines)."
      },
      "OrderWithLinesResponse": {
        "properties": {
          "order_number": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Order Number"
          },
          "customer_id": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Customer Id"
          },
          "order_date": {
            "type": "string",
            "format": "date",
            "title": "Order Date"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "lines": {
            "items": {
              "$ref": "#/components/schemas/OrderLineResponse"
            },
            "type": "array",
            "title": "Lines"
          }
        },
        "type": "object",
        "required": [
          "order_number",
          "customer_id",
          "order_date",
          "id",
          "created_at",
          "updated_at"
        ],
        "title": "OrderWithLinesResponse",
        "description": "Order with lines response."
      },
      "ProductCreate": {
        "properties": {
          "product_code": {
            "type": "string",
            "minLength": 1,
            "title": "Product Code"
          },
          "product_name": {
            "type": "string",
            "minLength": 1,
            "title": "Product Name"
          },
          "internal_unit": {
            "type": "string",
            "minLength": 1,
            "title": "Internal Unit",
            "default": "CAN"
          },
          "external_unit": {
            "type": "string",
            "minLength": 1,
            "title": "External Unit",
            "default": "KG"
          },
          "qty_per_internal_unit": {
            "type": "number",
            "exclusiveMinimum": 0.0,
            "title": "Qty Per Internal Unit",
            "default": 1.0
          },
          "customer_part_no": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Part No"
          },
          "maker_item_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Maker Item Code"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "product_code",
          "product_name"
        ],
        "title": "ProductCreate",
        "description": "Payload to create a product."
      },
      "ProductOut": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "product_code": {
            "type": "string",
            "title": "Product Code"
          },
          "product_name": {
            "type": "string",
            "title": "Product Name"
          },
          "internal_unit": {
            "type": "string",
            "title": "Internal Unit"
          },
          "external_unit": {
            "type": "string",
            "title": "External Unit"
          },
          "qty_per_internal_unit": {
            "type": "number",
            "title": "Qty Per Internal Unit"
          },
          "customer_part_no": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Part No"
          },
          "maker_item_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Maker Item Code"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "product_code",
          "product_name",
          "internal_unit",
          "external_unit",
          "qty_per_internal_unit",
          "customer_part_no",
          "maker_item_code",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "title": "ProductOut",
        "description": "Product response model."
      },
      "ProductUpdate": {
        "properties": {
          "product_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Code"
          },
          "product_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Product Name"
          },
          "internal_unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Internal Unit"
          },
          "external_unit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "External Unit"
          },
          "qty_per_internal_unit": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty Per Internal Unit"
          },
          "customer_part_no": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Part No"
          },
          "maker_item_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Maker Item Code"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          }
        },
        "type": "object",
        "title": "ProductUpdate",
        "description": "Payload to partially update a product."
      },
      "ResponseBase": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "data": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "ResponseBase",
        "description": "API共通レスポンス."
      },
      "RoleCreate": {
        "properties": {
          "role_code": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Role Code",
            "description": "ロールコード"
          },
          "role_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Role Name",
            "description": "ロール名"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "説明"
          }
        },
        "type": "object",
        "required": [
          "role_code",
          "role_name"
        ],
        "title": "RoleCreate",
        "description": "Schema for creating a role."
      },
      "RoleResponse": {
        "properties": {
          "role_code": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Role Code",
            "description": "ロールコード"
          },
          "role_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Role Name",
            "description": "ロール名"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "説明"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "role_code",
          "role_name",
          "id",
          "created_at",
          "updated_at"
        ],
        "title": "RoleResponse",
        "description": "Schema for role response (DDL: roles)."
      },
      "RoleUpdate": {
        "properties": {
          "role_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Role Name",
            "description": "ロール名"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "説明"
          }
        },
        "type": "object",
        "title": "RoleUpdate",
        "description": "Schema for updating a role."
      },
      "SAPOrderRegistrationRequest": {
        "properties": {
          "order_ids": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Order Ids",
            "description": "List of Order IDs to register"
          }
        },
        "type": "object",
        "required": [
          "order_ids"
        ],
        "title": "SAPOrderRegistrationRequest",
        "description": "Request schema for SAP order registration."
      },
      "SAPOrderRegistrationResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          },
          "registered_count": {
            "type": "integer",
            "title": "Registered Count"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/SAPOrderRegistrationResult"
            },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": [
          "status",
          "registered_count",
          "results"
        ],
        "title": "SAPOrderRegistrationResponse",
        "description": "Response schema for SAP order registration."
      },
      "SAPOrderRegistrationResult": {
        "properties": {
          "order_id": {
            "type": "integer",
            "title": "Order Id"
          },
          "sap_order_no": {
            "type": "string",
            "title": "Sap Order No"
          },
          "status": {
            "type": "string",
            "title": "Status"
          }
        },
        "type": "object",
        "required": [
          "order_id",
          "sap_order_no",
          "status"
        ],
        "title": "SAPOrderRegistrationResult",
        "description": "Result for a single order registration."
      },
      "SAPSyncRequest": {
        "properties": {},
        "type": "object",
        "title": "SAPSyncRequest",
        "description": "Payload for SAP purchase order synchronization."
      },
      "SAPSyncResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "created_plans": {
            "items": {
              "$ref": "#/components/schemas/InboundPlanDetailResponse"
            },
            "type": "array",
            "title": "Created Plans"
          },
          "skipped_count": {
            "type": "integer",
            "title": "Skipped Count",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "SAPSyncResponse",
        "description": "Response model for SAP synchronization."
      },
      "StockHistoryCreate": {
        "properties": {
          "lot_id": {
            "type": "integer",
            "title": "Lot Id"
          },
          "transaction_type": {
            "$ref": "#/components/schemas/StockTransactionType"
          },
          "quantity_change": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "title": "Quantity Change"
          },
          "quantity_after": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "title": "Quantity After"
          },
          "reference_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reference Type"
          },
          "reference_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reference Id"
          },
          "transaction_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Transaction Date"
          }
        },
        "type": "object",
        "required": [
          "lot_id",
          "transaction_type",
          "quantity_change",
          "quantity_after"
        ],
        "title": "StockHistoryCreate",
        "description": "Payload for creating stock history records."
      },
      "StockHistoryResponse": {
        "properties": {
          "lot_id": {
            "type": "integer",
            "title": "Lot Id"
          },
          "transaction_type": {
            "$ref": "#/components/schemas/StockTransactionType"
          },
          "quantity_change": {
            "type": "string",
            "title": "Quantity Change"
          },
          "quantity_after": {
            "type": "string",
            "title": "Quantity After"
          },
          "reference_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reference Type"
          },
          "reference_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reference Id"
          },
          "history_id": {
            "type": "integer",
            "title": "History Id"
          },
          "transaction_date": {
            "type": "string",
            "format": "date-time",
            "title": "Transaction Date"
          }
        },
        "type": "object",
        "required": [
          "lot_id",
          "transaction_type",
          "quantity_change",
          "quantity_after",
          "history_id",
          "transaction_date"
        ],
        "title": "StockHistoryResponse",
        "description": "API response model for stock history entries."
      },
      "StockTransactionType": {
        "type": "string",
        "enum": [
          "inbound",
          "allocation",
          "shipment",
          "adjustment",
          "return"
        ],
        "title": "StockTransactionType",
        "description": "Transaction types tracked in stock history."
      },
      "SupplierCreate": {
        "properties": {
          "supplier_code": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Supplier Code"
          },
          "supplier_name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Supplier Name"
          }
        },
        "type": "object",
        "required": [
          "supplier_code",
          "supplier_name"
        ],
        "title": "SupplierCreate",
        "description": "Create supplier request."
      },
      "SupplierResponse": {
        "properties": {
          "supplier_code": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Supplier Code"
          },
          "supplier_name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Supplier Name"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "supplier_code",
          "supplier_name",
          "id",
          "created_at",
          "updated_at"
        ],
        "title": "SupplierResponse",
        "description": "Supplier response (DDL: suppliers)."
      },
      "SupplierUpdate": {
        "properties": {
          "supplier_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Name"
          }
        },
        "type": "object",
        "title": "SupplierUpdate",
        "description": "Update supplier request."
      },
      "UserCreate": {
        "properties": {
          "username": {
            "type": "string",
            "maxLength": 50,
            "minLength": 3,
            "title": "Username",
            "description": "ユーザー名"
          },
          "email": {
            "type": "string",
            "maxLength": 255,
            "format": "email",
            "title": "Email",
            "description": "メールアドレス"
          },
          "display_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Display Name",
            "description": "表示名"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "有効フラグ",
            "default": true
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "title": "Password",
            "description": "パスワード（平文）"
          }
        },
        "type": "object",
        "required": [
          "username",
          "email",
          "display_name",
          "password"
        ],
        "title": "UserCreate",
        "description": "Schema for creating a user."
      },
      "UserResponse": {
        "properties": {
          "username": {
            "type": "string",
            "maxLength": 50,
            "minLength": 3,
            "title": "Username",
            "description": "ユーザー名"
          },
          "email": {
            "type": "string",
            "maxLength": 255,
            "format": "email",
            "title": "Email",
            "description": "メールアドレス"
          },
          "display_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Display Name",
            "description": "表示名"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "有効フラグ",
            "default": true
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "last_login_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login At"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "username",
          "email",
          "display_name",
          "id",
          "created_at",
          "updated_at"
        ],
        "title": "UserResponse",
        "description": "Schema for user response (DDL: users)."
      },
      "UserRoleAssignment": {
        "properties": {
          "role_ids": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Role Ids",
            "description": "割り当てるロールIDリスト"
          }
        },
        "type": "object",
        "required": [
          "role_ids"
        ],
        "title": "UserRoleAssignment",
        "description": "Schema for assigning roles to a user."
      },
      "UserSupplierAssignmentCreate": {
        "properties": {
          "user_id": {
            "type": "integer",
            "title": "User Id"
          },
          "supplier_id": {
            "type": "integer",
            "title": "Supplier Id"
          },
          "is_primary": {
            "type": "boolean",
            "title": "Is Primary",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "supplier_id"
        ],
        "title": "UserSupplierAssignmentCreate",
        "description": "Schema for creating a user-supplier assignment."
      },
      "UserSupplierAssignmentResponse": {
        "properties": {
          "user_id": {
            "type": "integer",
            "title": "User Id"
          },
          "supplier_id": {
            "type": "integer",
            "title": "Supplier Id"
          },
          "is_primary": {
            "type": "boolean",
            "title": "Is Primary",
            "default": false
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "assigned_at": {
            "type": "string",
            "format": "date-time",
            "title": "Assigned At"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          },
          "user_display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Display Name"
          },
          "supplier_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Code"
          },
          "supplier_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supplier Name"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "supplier_id",
          "id",
          "assigned_at",
          "created_at",
          "updated_at"
        ],
        "title": "UserSupplierAssignmentResponse",
        "description": "Schema for user-supplier assignment responses."
      },
      "UserSupplierAssignmentUpdate": {
        "properties": {
          "is_primary": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Primary"
          }
        },
        "type": "object",
        "title": "UserSupplierAssignmentUpdate",
        "description": "Schema for updating a user-supplier assignment."
      },
      "UserUpdate": {
        "properties": {
          "email": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255,
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email",
            "description": "メールアドレス"
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name",
            "description": "表示名"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active",
            "description": "有効フラグ"
          },
          "password": {
            "anyOf": [
              {
                "type": "string",
                "minLength": 8
              },
              {
                "type": "null"
              }
            ],
            "title": "Password",
            "description": "パスワード（平文）"
          }
        },
        "type": "object",
        "title": "UserUpdate",
        "description": "Schema for updating a user."
      },
      "UserWithRoles": {
        "properties": {
          "username": {
            "type": "string",
            "maxLength": 50,
            "minLength": 3,
            "title": "Username",
            "description": "ユーザー名"
          },
          "email": {
            "type": "string",
            "maxLength": 255,
            "format": "email",
            "title": "Email",
            "description": "メールアドレス"
          },
          "display_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Display Name",
            "description": "表示名"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "有効フラグ",
            "default": true
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "last_login_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login At"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "role_codes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Role Codes",
            "description": "割り当てられたロールコード"
          }
        },
        "type": "object",
        "required": [
          "username",
          "email",
          "display_name",
          "id",
          "created_at",
          "updated_at"
        ],
        "title": "UserWithRoles",
        "description": "Schema for user with assigned roles."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "WarehouseCreate": {
        "properties": {
          "warehouse_code": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Warehouse Code"
          },
          "warehouse_name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Warehouse Name"
          },
          "warehouse_type": {
            "type": "string",
            "pattern": "^(internal|external|supplier)$",
            "title": "Warehouse Type",
            "description": "internal/external/supplier"
          }
        },
        "type": "object",
        "required": [
          "warehouse_code",
          "warehouse_name",
          "warehouse_type"
        ],
        "title": "WarehouseCreate",
        "description": "Create warehouse request."
      },
      "WarehouseListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/WarehouseOut"
            },
            "type": "array",
            "title": "Items"
          }
        },
        "type": "object",
        "required": [
          "items"
        ],
        "title": "WarehouseListResponse"
      },
      "WarehouseOut": {
        "properties": {
          "warehouse_id": {
            "type": "integer",
            "title": "Warehouse Id"
          },
          "warehouse_name": {
            "type": "string",
            "title": "Warehouse Name"
          }
        },
        "type": "object",
        "required": [
          "warehouse_id",
          "warehouse_name"
        ],
        "title": "WarehouseOut"
      },
      "WarehouseResponse": {
        "properties": {
          "warehouse_code": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Warehouse Code"
          },
          "warehouse_name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Warehouse Name"
          },
          "warehouse_type": {
            "type": "string",
            "pattern": "^(internal|external|supplier)$",
            "title": "Warehouse Type",
            "description": "internal/external/supplier"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "warehouse_code",
          "warehouse_name",
          "warehouse_type",
          "id",
          "created_at",
          "updated_at"
        ],
        "title": "WarehouseResponse",
        "description": "Warehouse response (DDL: warehouses)."
      },
      "WarehouseUpdate": {
        "properties": {
          "warehouse_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Name"
          },
          "warehouse_type": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(internal|external|supplier)$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warehouse Type",
            "description": "internal/external/supplier"
          }
        },
        "type": "object",
        "title": "WarehouseUpdate",
        "description": "Update warehouse request."
      }
    }
  }
}